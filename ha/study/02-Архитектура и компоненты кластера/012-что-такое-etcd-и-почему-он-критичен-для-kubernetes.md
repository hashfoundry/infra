# 12. –ß—Ç–æ —Ç–∞–∫–æ–µ etcd –∏ –ø–æ—á–µ–º—É –æ–Ω –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è Kubernetes?

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ etcd?**

**etcd** ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–∞—è —Å–ª—É–∂–∏—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–∞. –≠—Ç–æ –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ –∞–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ Raft.

## üèóÔ∏è **–ü–æ—á–µ–º—É etcd –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è Kubernetes:**

### **1. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**
- –•—Ä–∞–Ω–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### **2. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
- ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- Strong consistency
- –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ Raft
- –ó–∞—â–∏—Ç–∞ –æ—Ç split-brain

### **3. High Availability**
- –ö–ª–∞—Å—Ç–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–æ–±—ã—á–Ω–æ 3-5 –Ω–æ–¥)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º

## üìä **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ etcd:**

### **1. –í—Å–µ Kubernetes –æ–±—ä–µ–∫—Ç—ã:**
```bash
# –í—Å–µ Pod'—ã –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl get pods -A

# –í—Å–µ Deployments
kubectl get deployments -A

# –í—Å–µ Services
kubectl get services -A

# –í—Å–µ ConfigMaps –∏ Secrets
kubectl get configmaps,secrets -A

# –í—Å–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ etcd
```

### **2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞:**
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Node'–∞—Ö
kubectl get nodes

# Namespace'—ã
kubectl get namespaces

# RBAC –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
kubectl get roles,rolebindings -A
kubectl get clusterroles,clusterrolebindings

# Custom Resource Definitions
kubectl get crd
```

### **3. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:**
```bash
# ArgoCD Applications (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ etcd)
kubectl get applications -n argocd

# ReplicaSets –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ
kubectl get replicasets -A

# Events (–≤—Ä–µ–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ etcd)
kubectl get events -A --sort-by=.metadata.creationTimestamp
```

## üîÑ **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å etcd:**

### **1. –¢–æ–ª—å–∫–æ API Server —Ä–∞–±–æ—Ç–∞–µ—Ç —Å etcd:**
```bash
# API Server - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç etcd
kubectl cluster-info

# –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ API Server:
# kubectl ‚Üí API Server ‚Üí etcd
# kubelet ‚Üí API Server ‚Üí etcd
# controller-manager ‚Üí API Server ‚Üí etcd
# scheduler ‚Üí API Server ‚Üí etcd
```

### **2. Watch –º–µ—Ö–∞–Ω–∏–∑–º:**
```bash
# etcd –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç watch –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
kubectl get pods -w

# –ö–æ–≥–¥–∞ Pod –∏–∑–º–µ–Ω—è–µ—Ç—Å—è:
# 1. API Server –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ etcd
# 2. etcd —É–≤–µ–¥–æ–º–ª—è–µ—Ç API Server –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
# 3. API Server —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (kubectl, controllers)
```

### **3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤:**
```bash
# etcd —Ö—Ä–∞–Ω–∏—Ç resourceVersion –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
kubectl get pod <pod-name> -o yaml | grep resourceVersion

# Optimistic concurrency control
# –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
```

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ etcd –≤ –≤–∞—à–µ–º HA –∫–ª–∞—Å—Ç–µ—Ä–µ:**

### **1. etcd –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus:**
```bash
# Port forward –∫ Prometheus
kubectl port-forward svc/prometheus-server -n monitoring 9090:80

# –ú–µ—Ç—Ä–∏–∫–∏ etcd (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã):
# etcd_server_has_leader - –µ—Å—Ç—å –ª–∏ –ª–∏–¥–µ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
# etcd_server_leader_changes_seen_total - —Å–º–µ–Ω—ã –ª–∏–¥–µ—Ä–∞
# etcd_disk_wal_fsync_duration_seconds - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∏—Å–∫–∞
# etcd_network_peer_round_trip_time_seconds - —Å–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
# etcd_mvcc_db_total_size_in_bytes - —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

### **2. API Server –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è etcd:**
```bash
# –ú–µ—Ç—Ä–∏–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è API Server —Å etcd:
# etcd_request_duration_seconds - –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ etcd
# etcd_request_total - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ etcd
# apiserver_storage_objects - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ etcd

# –í Prometheus UI –Ω–∞–π—Ç–∏ —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
```

### **3. Grafana –¥–∞—à–±–æ—Ä–¥—ã etcd:**
```bash
# Port forward –∫ Grafana
kubectl port-forward svc/grafana -n monitoring 3000:80

# –î–∞—à–±–æ—Ä–¥—ã –º–æ–≥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
# - etcd cluster health
# - Request latency
# - Database size
# - Leader elections
```

## üè≠ **etcd –≤ –≤–∞—à–µ–º HA –∫–ª–∞—Å—Ç–µ—Ä–µ Digital Ocean:**

### **1. Managed etcd –∫–ª–∞—Å—Ç–µ—Ä:**
```bash
# Digital Ocean —É–ø—Ä–∞–≤–ª—è–µ—Ç etcd –∫–ª–∞—Å—Ç–µ—Ä–æ–º
# –û–±—ã—á–Ω–æ 3-5 –Ω–æ–¥ etcd –¥–ª—è HA
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ etcd
kubectl cluster-info
```

### **2. –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
```bash
# etcd –∫–ª–∞—Å—Ç–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–æ –∑–æ–Ω–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover –ø—Ä–∏ —Å–±–æ—è—Ö
# –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏
# –ö–æ–Ω—Å–µ–Ω—Å—É—Å Raft –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
```

### **3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```bash
# SSD –¥–∏—Å–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ I/O
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# –†–µ–≥—É–ª—è—Ä–Ω–∞—è –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

## üîß **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å etcd –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ Pod'–∞
kubectl run test-etcd --image=nginx

# –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
# 1. kubectl ‚Üí API Server
# 2. API Server –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å
# 3. API Server –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç Pod –≤ etcd
# 4. etcd –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å
# 5. API Server –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—Ö
# 6. Scheduler —á–∏—Ç–∞–µ—Ç –∏–∑ etcd (—á–µ—Ä–µ–∑ API Server)
# 7. kubelet —á–∏—Ç–∞–µ—Ç –∏–∑ etcd (—á–µ—Ä–µ–∑ API Server)
```

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**
```bash
# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ Deployment
kubectl scale deployment argocd-server --replicas=4 -n argocd

# –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
# 1. API Server —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ etcd
# 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç resourceVersion (optimistic locking)
# 3. –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ etcd
# 4. Controller Manager —á–∏—Ç–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∑ etcd
# 5. –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ Pod'—ã
```

### **3. Watch –∏ —Å–æ–±—ã—Ç–∏—è:**
```bash
# Controller'—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
kubectl get events -w

# –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
# 1. Controller –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ watch —á–µ—Ä–µ–∑ API Server
# 2. API Server –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ watch –≤ etcd
# 3. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ etcd —É–≤–µ–¥–æ–º–ª—è–µ—Ç API Server
# 4. API Server —É–≤–µ–¥–æ–º–ª—è–µ—Ç Controller
# 5. Controller —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```

## üíæ **–ë—ç–∫–∞–ø—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ etcd:**

### **1. –í–∞–∂–Ω–æ—Å—Ç—å –±—ç–∫–∞–ø–æ–≤:**
```bash
# etcd —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
# –ü–æ—Ç–µ—Ä—è etcd = –ø–æ—Ç–µ—Ä—è –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã

# –í managed –∫–ª–∞—Å—Ç–µ—Ä–µ Digital Ocean –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
```

### **2. –ß—Ç–æ –≤–∫–ª—é—á–∞—é—Ç –±—ç–∫–∞–ø—ã:**
```bash
# –í—Å–µ –æ–±—ä–µ–∫—Ç—ã Kubernetes
kubectl get all -A | wc -l

# –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
kubectl get configmaps,secrets -A | wc -l

# RBAC –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
kubectl get roles,rolebindings,clusterroles,clusterrolebindings | wc -l

# Custom Resources
kubectl get crd | wc -l
```

### **3. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±—ç–∫–∞–ø–æ–≤:**
```bash
# Snapshot-based backups
# Incremental backups
# Cross-region replication
# Point-in-time recovery

# –í managed –∫–ª–∞—Å—Ç–µ—Ä–µ —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
```

## üîÑ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å etcd:**

### **1. –§–∞–∫—Ç–æ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
# –î–∏—Å–∫–æ–≤—ã–π I/O - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω
# –°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏ etcd
# –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ watch'–µ—Ä–æ–≤
# –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å–µ–π
```

### **2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
```bash
# SSD –¥–∏—Å–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
# –ù–∏–∑–∫–∞—è —Å–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
# –†–µ–≥—É–ª—è—Ä–Ω–∞—è –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ë–î
# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π
```

### **3. –õ–∏–º–∏—Ç—ã etcd:**
```bash
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—ä–µ–∫—Ç–∞: 1.5MB
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –ë–î: < 8GB
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ watch'–µ—Ä–æ–≤: ~1000
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: < 10ms
```

## üö® **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–±–æ–µ etcd:**

### **1. –ü–æ—Ç–µ—Ä—è –∫–≤–æ—Ä—É–º–∞:**
```bash
# –ï—Å–ª–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–æ–¥ etcd –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ:
# - API Server —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è read-only
# - –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å –æ–±—ä–µ–∫—Ç—ã
# - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Pod'—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
# - –ù–æ–≤—ã–µ Pod'—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
```

### **2. –ü–æ–ª–Ω–∞—è –ø–æ—Ç–µ—Ä—è etcd:**
```bash
# –ï—Å–ª–∏ –≤–µ—Å—å etcd –∫–ª–∞—Å—Ç–µ—Ä –ø–æ—Ç–µ—Ä—è–Ω:
# - –ö–ª–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
# - –ù—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
# - –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
# - –î–ª–∏—Ç–µ–ª—å–Ω—ã–π downtime
```

### **3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```bash
# –í managed –∫–ª–∞—Å—Ç–µ—Ä–µ Digital Ocean:
# - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–æ–≤
# - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RTO (Recovery Time Objective)
# - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
```

## üéØ **Best Practices –¥–ª—è etcd:**

### **1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –∑–¥–æ—Ä–æ–≤—å–µ–º –∫–ª–∞—Å—Ç–µ—Ä–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ê–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ health checks

### **2. –ë—ç–∫–∞–ø—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- Cross-region —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤

### **3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- SSD –¥–∏—Å–∫–∏ –¥–ª—è etcd
- –ù–∏–∑–∫–∞—è —Å–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ë–î
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è

## üèóÔ∏è **etcd –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Digital Ocean Cloud                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  etcd Cluster (Managed HA)                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ etcd-1 (Zone A) - Leader/Follower                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ etcd-2 (Zone B) - Leader/Follower                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ etcd-3 (Zone C) - Leader/Follower                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Raft Consensus Algorithm                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Leader Election                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Log Replication                                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Strong Consistency                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  API Server Cluster (HA)                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ API Server 1 ‚Üí etcd Client                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ API Server 2 ‚Üí etcd Client                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ API Server 3 ‚Üí etcd Client                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Stored Data in etcd                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ All Kubernetes Objects                                ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Pods, Deployments, Services                       ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ ConfigMaps, Secrets                               ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ RBAC, CRDs                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Cluster State                                         ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Node Information                                  ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Resource Quotas                                   ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ Events (TTL)                                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Application Data                                       ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ ArgoCD Applications                               ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Prometheus Configuration                          ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Ingress Rules                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**etcd ‚Äî —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç Kubernetes. –ë–µ–∑ etcd –Ω–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞!**
