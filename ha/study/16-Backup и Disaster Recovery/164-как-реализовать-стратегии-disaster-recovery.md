# 164. –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ disaster recovery?

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ Disaster Recovery –¥–ª—è Kubernetes?**

**Disaster Recovery (DR) –¥–ª—è Kubernetes** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ—Å–ª–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤, –≤–∫–ª—é—á–∞—é—â–∞—è multi-region —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π failover, backup/restore –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö RTO –∏ RPO.

## üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã DR —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**

### **1. Multi-Region Architecture (–ú—É–ª—å—Ç–∏-—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)**
- **Primary Cluster** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π –∫–ª–∞—Å—Ç–µ—Ä
- **Secondary Cluster** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä –≤ –¥—Ä—É–≥–æ–º —Ä–µ–≥–∏–æ–Ω–µ
- **Backup Storage** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ backup
- **DNS Failover** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞

### **2. RTO/RPO Targets (–¶–µ–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)**
- **RTO (Recovery Time Objective)** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **RPO (Recovery Point Objective)** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
- **Availability Targets** - —Ü–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- **Service Tiers** - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

### **3. Automation & Monitoring (–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)**
- **Health Checks** - –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
- **Automated Failover** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- **Alert Management** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **Recovery Orchestration** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

## üìä **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ HA –∫–ª–∞—Å—Ç–µ—Ä–∞:**

### **1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π DR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è primary –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl cluster-info
kubectl get nodes -o wide
kubectl get pods --all-namespaces --field-selector=status.phase!=Running

# –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
kubectl get pods -n kube-system -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,NODE:.spec.nodeName

# –ü—Ä–æ–≤–µ—Ä–∫–∞ backup —Å–∏—Å—Ç–µ–º
kubectl get pods -n velero
kubectl get backups -n velero --sort-by=.metadata.creationTimestamp

# –ê–Ω–∞–ª–∏–∑ persistent volumes
kubectl get pv -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,STORAGECLASS:.spec.storageClassName,SIZE:.spec.capacity.storage
```

### **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ DR –º–µ—Ç—Ä–∏–∫:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ etcd
kubectl get --raw /healthz/etcd

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl top nodes
kubectl top pods --all-namespaces --sort-by=cpu

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏
kubectl get svc -n ingress-nginx
kubectl get ingress --all-namespaces
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ backup –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
```bash
# –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö backup
velero backup get --sort-by=.metadata.creationTimestamp
velero backup describe $(velero backup get -o name | tail -1)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ backup locations
velero backup-location get
velero snapshot-location get

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ backup
kubectl get backups -n velero -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,SIZE:.status.totalItems,CREATED:.metadata.creationTimestamp
```

## üîÑ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ DR —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ Multi-Region DR –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç multi-region-dr-setup.sh
cat << 'EOF' > multi-region-dr-setup.sh
#!/bin/bash

echo "üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Multi-Region Disaster Recovery"
echo "=========================================="

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
PRIMARY_CLUSTER="hashfoundry-ha"
DR_CLUSTER="hashfoundry-dr"
PRIMARY_REGION="fra1"
DR_REGION="ams3"
BACKUP_BUCKET="hashfoundry-backup"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
check_dependencies() {
    log "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
    for tool in kubectl doctl terraform helm; do
        if ! command -v $tool &> /dev/null; then
            log "‚ùå $tool –Ω–µ –Ω–∞–π–¥–µ–Ω"
            exit 1
        fi
    done
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if [ -z "$DO_TOKEN" ]; then
        log "‚ùå DO_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        exit 1
    fi
    
    log "‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã"
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
create_dr_cluster() {
    log "üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ DR –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è DR
    cat << TERRAFORM_EOF > dr-cluster.tf
# DR Cluster Configuration
resource "digitalocean_kubernetes_cluster" "dr_cluster" {
  name    = "$DR_CLUSTER"
  region  = "$DR_REGION"
  version = "1.31.9-do.2"
  
  node_pool {
    name       = "dr-worker-pool"
    size       = "s-2vcpu-4gb"
    node_count = 3
    
    auto_scale = true
    min_nodes  = 2
    max_nodes  = 8
    
    labels = {
      environment = "disaster-recovery"
      cluster     = "$DR_CLUSTER"
    }
    
    taint {
      key    = "disaster-recovery"
      value  = "true"
      effect = "NoSchedule"
    }
  }
  
  tags = ["disaster-recovery", "secondary", "ha"]
}

# VPC –¥–ª—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
resource "digitalocean_vpc" "dr_vpc" {
  name     = "$DR_CLUSTER-vpc"
  region   = "$DR_REGION"
  ip_range = "10.20.0.0/16"
  
  tags = ["disaster-recovery"]
}

# Load Balancer –¥–ª—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
resource "digitalocean_loadbalancer" "dr_lb" {
  name   = "$DR_CLUSTER-lb"
  region = "$DR_REGION"
  vpc_uuid = digitalocean_vpc.dr_vpc.id
  
  forwarding_rule {
    entry_protocol  = "https"
    entry_port      = 443
    target_protocol = "https"
    target_port     = 443
    tls_passthrough = true
  }
  
  forwarding_rule {
    entry_protocol  = "http"
    entry_port      = 80
    target_protocol = "http"
    target_port     = 80
  }
  
  healthcheck {
    protocol               = "http"
    port                   = 80
    path                   = "/healthz"
    check_interval_seconds = 10
    response_timeout_seconds = 5
    unhealthy_threshold    = 3
    healthy_threshold      = 2
  }
  
  tags = ["disaster-recovery"]
}

# Outputs
output "dr_cluster_id" {
  value = digitalocean_kubernetes_cluster.dr_cluster.id
}

output "dr_cluster_endpoint" {
  value = digitalocean_kubernetes_cluster.dr_cluster.endpoint
}

output "dr_lb_ip" {
  value = digitalocean_loadbalancer.dr_lb.ip
}
TERRAFORM_EOF
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    terraform init
    terraform plan -var="do_token=$DO_TOKEN"
    terraform apply -auto-approve -var="do_token=$DO_TOKEN"
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ kubeconfig –¥–ª—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
    doctl kubernetes cluster kubeconfig save $DR_CLUSTER
    
    log "‚úÖ DR –∫–ª–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω"
}

# –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DR –∫–ª–∞—Å—Ç–µ—Ä–∞
setup_dr_cluster() {
    log "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DR –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$DR_REGION-$DR_CLUSTER
    
    # –°–æ–∑–¥–∞–Ω–∏–µ namespace –¥–ª—è DR
    kubectl create namespace disaster-recovery --dry-run=client -o yaml | kubectl apply -f -
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    install_dr_components
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tolerations –¥–ª—è DR —É–∑–ª–æ–≤
    setup_dr_tolerations
    
    log "‚úÖ DR –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ DR –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
install_dr_components() {
    log "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ DR –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤..."
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NGINX Ingress
    helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
    helm repo update
    
    helm upgrade --install ingress-nginx ingress-nginx/ingress-nginx \
        --namespace ingress-nginx \
        --create-namespace \
        --set controller.replicaCount=2 \
        --set controller.nodeSelector."kubernetes\.io/os"=linux \
        --set controller.tolerations[0].key=disaster-recovery \
        --set controller.tolerations[0].value=true \
        --set controller.tolerations[0].effect=NoSchedule \
        --set controller.service.type=LoadBalancer \
        --set controller.service.annotations."service\.beta\.kubernetes\.io/do-loadbalancer-name"=$DR_CLUSTER-lb
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Velero –¥–ª—è DR
    install_velero_dr
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    install_monitoring_dr
    
    log "‚úÖ DR –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Velero –¥–ª—è DR
install_velero_dr() {
    log "üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Velero –¥–ª—è DR..."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ credentials
    cat > /tmp/credentials-velero-dr << CRED_EOF
[default]
aws_access_key_id=${DO_SPACES_ACCESS_KEY}
aws_secret_access_key=${DO_SPACES_SECRET_KEY}
CRED_EOF
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Velero
    velero install \
        --provider aws \
        --plugins velero/velero-plugin-for-aws:v1.8.1,digitalocean/velero-plugin:v1.1.0 \
        --bucket $BACKUP_BUCKET \
        --secret-file /tmp/credentials-velero-dr \
        --backup-location-config region=$DR_REGION,s3ForcePathStyle="true",s3Url=https://$DR_REGION.digitaloceanspaces.com \
        --snapshot-location-config region=$DR_REGION \
        --use-volume-snapshots=true \
        --use-node-agent
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tolerations –¥–ª—è Velero
    kubectl patch deployment velero -n velero -p '{"spec":{"template":{"spec":{"tolerations":[{"key":"disaster-recovery","value":"true","effect":"NoSchedule"}]}}}}'
    
    rm -f /tmp/credentials-velero-dr
    log "‚úÖ Velero –¥–ª—è DR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è DR
install_monitoring_dr() {
    log "üìä –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è DR..."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ namespace
    kubectl create namespace monitoring --dry-run=client -o yaml | kubectl apply -f -
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus –¥–ª—è DR
    helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
    helm repo update
    
    helm upgrade --install prometheus prometheus-community/kube-prometheus-stack \
        --namespace monitoring \
        --set prometheus.prometheusSpec.nodeSelector."kubernetes\.io/os"=linux \
        --set prometheus.prometheusSpec.tolerations[0].key=disaster-recovery \
        --set prometheus.prometheusSpec.tolerations[0].value=true \
        --set prometheus.prometheusSpec.tolerations[0].effect=NoSchedule \
        --set grafana.nodeSelector."kubernetes\.io/os"=linux \
        --set grafana.tolerations[0].key=disaster-recovery \
        --set grafana.tolerations[0].value=true \
        --set grafana.tolerations[0].effect=NoSchedule \
        --set prometheus.prometheusSpec.retention=7d \
        --set prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.storageClassName=do-block-storage \
        --set prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.resources.requests.storage=20Gi
    
    log "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è DR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ tolerations
setup_dr_tolerations() {
    log "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tolerations –¥–ª—è DR..."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ DaemonSet –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∑–ª–æ–≤
    cat << DAEMONSET_EOF | kubectl apply -f -
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: dr-node-setup
  namespace: kube-system
spec:
  selector:
    matchLabels:
      name: dr-node-setup
  template:
    metadata:
      labels:
        name: dr-node-setup
    spec:
      tolerations:
      - key: disaster-recovery
        value: "true"
        effect: NoSchedule
      hostNetwork: true
      hostPID: true
      containers:
      - name: node-setup
        image: alpine:latest
        command: ["/bin/sh"]
        args: ["-c", "while true; do sleep 3600; done"]
        securityContext:
          privileged: true
        volumeMounts:
        - name: host-root
          mountPath: /host
      volumes:
      - name: host-root
        hostPath:
          path: /
      nodeSelector:
        kubernetes.io/os: linux
DAEMONSET_EOF
    
    log "‚úÖ Tolerations –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è DNS failover
setup_dns_failover() {
    log "üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS failover..."
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–æ–≤
    PRIMARY_LB_IP=$(kubectl config use-context do-$PRIMARY_REGION-$PRIMARY_CLUSTER && kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
    DR_LB_IP=$(kubectl config use-context do-$DR_REGION-$DR_CLUSTER && kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
    
    # –°–æ–∑–¥–∞–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π
    doctl compute domain records create hashfoundry.com \
        --record-type A \
        --record-name api \
        --record-data $PRIMARY_LB_IP \
        --record-ttl 300 \
        --record-priority 10
    
    doctl compute domain records create hashfoundry.com \
        --record-type A \
        --record-name api-dr \
        --record-data $DR_LB_IP \
        --record-ttl 300
    
    log "‚úÖ DNS failover –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
    log "Primary: api.hashfoundry.com -> $PRIMARY_LB_IP"
    log "DR: api-dr.hashfoundry.com -> $DR_LB_IP"
}

# –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è DR
test_dr_setup() {
    log "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DR –Ω–∞—Å—Ç—Ä–æ–π–∫–∏..."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$DR_REGION-$DR_CLUSTER
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∑–ª–æ–≤
    kubectl get nodes -o wide
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–≤
    kubectl get pods --all-namespaces
    
    # –¢–µ—Å—Ç–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
    kubectl run dr-test --image=nginx:alpine --port=80
    kubectl expose pod dr-test --type=LoadBalancer --port=80
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ IP
    log "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP..."
    kubectl wait --for=condition=ready pod/dr-test --timeout=300s
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP
    EXTERNAL_IP=$(kubectl get svc dr-test -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
    log "üåê –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω: http://$EXTERNAL_IP"
    
    # –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
    kubectl delete pod dr-test
    kubectl delete svc dr-test
    
    log "‚úÖ DR —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
main() {
    log "üöÄ –ó–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Multi-Region DR"
    
    check_dependencies
    create_dr_cluster
    setup_dr_cluster
    setup_dns_failover
    test_dr_setup
    
    log "üéâ MULTI-REGION DR –£–°–ü–ï–®–ù–û –ù–ê–°–¢–†–û–ï–ù!"
    log "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
    log "  1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover"
    log "  2. –°–æ–∑–¥–∞–π—Ç–µ DR runbooks"
    log "  3. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ DR drill"
    log "  4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ DR –º–µ—Ç—Ä–∏–∫"
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
trap 'log "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ DR"; exit 1' ERR

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"
EOF

chmod +x multi-region-dr-setup.sh
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ failover:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç automated-failover.sh
cat << 'EOF' > automated-failover.sh
#!/bin/bash

echo "üö® –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Disaster Recovery Failover"
echo "=============================================="

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
PRIMARY_CLUSTER="hashfoundry-ha"
DR_CLUSTER="hashfoundry-dr"
PRIMARY_REGION="fra1"
DR_REGION="ams3"
DOMAIN="hashfoundry.com"
SLACK_WEBHOOK="$SLACK_WEBHOOK_URL"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1"
}

# –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
send_notification() {
    local severity="$1"
    local message="$2"
    
    log "$severity $message"
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Slack
    if [ -n "$SLACK_WEBHOOK" ]; then
        local color="good"
        case $severity in
            "üö®") color="danger" ;;
            "‚ö†Ô∏è") color="warning" ;;
            "‚úÖ") color="good" ;;
        esac
        
        curl -X POST -H 'Content-type: application/json' \
            --data "{\"attachments\":[{\"color\":\"$color\",\"text\":\"$severity DR Alert: $message\",\"ts\":$(date +%s)}]}" \
            "$SLACK_WEBHOOK" >/dev/null 2>&1
    fi
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ Prometheus
    if [ -n "$PROMETHEUS_PUSHGATEWAY" ]; then
        echo "dr_failover_event{severity=\"$severity\",message=\"$message\"} 1" | \
            curl --data-binary @- "$PROMETHEUS_PUSHGATEWAY/metrics/job/dr_failover" >/dev/null 2>&1
    fi
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è primary –∫–ª–∞—Å—Ç–µ—Ä–∞
check_primary_health() {
    log "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è primary –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ primary –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$PRIMARY_REGION-$PRIMARY_CLUSTER >/dev/null 2>&1
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API server
    if ! timeout 30 kubectl cluster-info >/dev/null 2>&1; then
        log "‚ùå Primary API server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ etcd
    if ! timeout 15 kubectl get --raw /healthz/etcd >/dev/null 2>&1; then
        log "‚ùå etcd –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–¥–æ–≤
    local failed_pods=$(kubectl get pods -n kube-system --field-selector=status.phase!=Running --no-headers 2>/dev/null | wc -l)
    if [ "$failed_pods" -gt 5 ]; then
        log "‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–¥–æ–≤: $failed_pods"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∑–ª–æ–≤
    local not_ready_nodes=$(kubectl get nodes --no-headers 2>/dev/null | grep -v Ready | wc -l)
    if [ "$not_ready_nodes" -gt 1 ]; then
        log "‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ–≥–æ—Ç–æ–≤—ã—Ö —É–∑–ª–æ–≤: $not_ready_nodes"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ ingress controller
    if ! kubectl get pods -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx --field-selector=status.phase=Running >/dev/null 2>&1; then
        log "‚ùå Ingress controller –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        return 1
    fi
    
    log "‚úÖ Primary –∫–ª–∞—Å—Ç–µ—Ä –∑–¥–æ—Ä–æ–≤"
    return 0
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
check_dr_health() {
    log "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$DR_REGION-$DR_CLUSTER >/dev/null 2>&1
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API server
    if ! timeout 30 kubectl cluster-info >/dev/null 2>&1; then
        log "‚ùå DR API server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∑–ª–æ–≤
    local ready_nodes=$(kubectl get nodes --no-headers 2>/dev/null | grep Ready | wc -l)
    if [ "$ready_nodes" -lt 2 ]; then
        log "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–æ—Ç–æ–≤—ã—Ö —É–∑–ª–æ–≤ –≤ DR –∫–ª–∞—Å—Ç–µ—Ä–µ: $ready_nodes"
        return 1
    fi
    
    log "‚úÖ DR –∫–ª–∞—Å—Ç–µ—Ä –≥–æ—Ç–æ–≤ –∫ failover"
    return 0
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è emergency backup
create_emergency_backup() {
    log "üíæ –°–æ–∑–¥–∞–Ω–∏–µ emergency backup..."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ primary –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$PRIMARY_REGION-$PRIMARY_CLUSTER >/dev/null 2>&1
    
    # –°–æ–∑–¥–∞–Ω–∏–µ emergency backup —á–µ—Ä–µ–∑ Velero
    local backup_name="emergency-backup-$(date +%Y%m%d-%H%M%S)"
    
    if timeout 300 velero backup create $backup_name \
        --include-namespaces argocd,monitoring,default \
        --wait >/dev/null 2>&1; then
        log "‚úÖ Emergency backup —Å–æ–∑–¥–∞–Ω: $backup_name"
        echo $backup_name
    else
        log "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å emergency backup"
        echo ""
    fi
}

# –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ failover
initiate_failover() {
    log "üö® –ò–Ω–∏—Ü–∏–∞—Ü–∏—è failover –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä..."
    
    send_notification "üö®" "Primary cluster failure detected. Initiating failover to DR cluster."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ emergency backup (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
    local backup_name=$(create_emergency_backup)
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-$DR_REGION-$DR_CLUSTER
    
    # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ DR –∫–ª–∞—Å—Ç–µ—Ä–∞
    scale_dr_cluster
    
    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
    if [ -n "$backup_name" ]; then
        restore_from_backup "$backup_name"
    else
        restore_from_latest_backup
    fi
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π
    update_dns_records
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    deploy_critical_services
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
    verify_dr_services
    
    send_notification "‚úÖ" "Failover completed successfully. Services are running on DR cluster."
}

# –§—É–Ω–∫—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞
scale_dr_cluster() {
    log "üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ DR –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    # –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–∑–ª–æ–≤
    doctl kubernetes cluster node-pool update $DR_CLUSTER dr-worker-pool \
        --count 6 \
        --auto-scale \
        --min-nodes 3 \
        --max-nodes 12 >/dev/null 2>&1
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —É–∑–ª–æ–≤
    log "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —É–∑–ª–æ–≤..."
    for i in {1..30}; do
        local ready_nodes=$(kubectl get nodes --no-headers | grep Ready | wc -l)
        if [ "$ready_nodes" -ge 4 ]; then
            log "‚úÖ DR –∫–ª–∞—Å—Ç–µ—Ä –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω: $ready_nodes —É–∑–ª–æ–≤ –≥–æ—Ç–æ–≤–æ"
            break
        fi
        sleep 10
    done
}

# –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ backup
restore_from_backup() {
    local backup_name="$1"
    log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup: $backup_name"
    
    # –°–æ–∑–¥–∞–Ω–∏–µ restore
    local restore_name="dr-restore-$(date +%s)"
    velero restore create $restore_name --from-backup $backup_name >/dev/null 2>&1
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è restore
    log "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è restore..."
    for i in {1..60}; do
        local status=$(velero restore get $restore_name -o json 2>/dev/null | jq -r '.status.phase' 2>/dev/null)
        if [ "$status" = "Completed" ]; then
            log "‚úÖ Restore –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ"
            return 0
        elif [ "$status" = "Failed" ]; then
            log "‚ùå Restore –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π"
            return 1
        fi
        sleep 10
    done
    
    log "‚ö†Ô∏è Restore –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –≤ –æ–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è"
    return 1
}

# –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup
restore_from_latest_backup() {
    log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup..."
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup
    local latest_backup=$(velero backup get -o json 2>/dev/null | jq -r '.items | sort_by(.metadata.creationTimestamp) | last | .metadata.name' 2>/dev/null)
    
    if [ "$latest_backup" != "null" ] && [ -n "$latest_backup" ]; then
        restore_from_backup "$latest_backup"
    else
        log "‚ö†Ô∏è Backup –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –Ω—É–ª—è"
        deploy_from_scratch
    fi
}

# –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS –∑–∞–ø–∏—Å–µ–π
update_dns_records() {
    log "üåê –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π..."
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP DR –∫–ª–∞—Å—Ç–µ—Ä–∞
    local dr_external_ip=$(kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}' 2>/dev/null)
    
    if [ -n "$dr_external_ip" ]; then
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ A –∑–∞–ø–∏—Å–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
        doctl compute domain records update $DOMAIN \
            --record-type A \
            --record-name api \
            --record-data $dr_external_ip \
            --record-ttl 60 >/dev/null 2>&1
        
        log "‚úÖ DNS –æ–±–Ω–æ–≤–ª–µ–Ω: api.$DOMAIN -> $dr_external_ip"
    else
        log "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP DR –∫–ª–∞—Å—Ç–µ—Ä–∞"
    fi
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
deploy_critical_services() {
    log "üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤..."
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ArgoCD
    deploy_argocd_dr
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    deploy_monitoring_dr
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    deploy_applications_dr
    
    log "‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã"
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ArgoCD –¥–ª—è DR
deploy_argocd_dr() {
    log "üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ArgoCD –¥–ª—è DR..."
    
    # –°–æ–∑–¥–∞–Ω–∏–µ namespace
    kubectl create namespace argocd --dry-run=client -o yaml | kubectl apply -f -
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ArgoCD
    kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml >/dev/null 2>&1
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=300s >/dev/null 2>&1
    
    log "‚úÖ ArgoCD —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç"
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è DR
deploy_monitoring_dr() {
    log "üìä –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è DR..."
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    if kubectl get namespace monitoring >/dev/null 2>&1; then
        log "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç"
        return 0
    fi
    
    # –°–æ–∑–¥–∞–Ω–∏–µ namespace
    kubectl create namespace monitoring --dry-run=client -o yaml | kubectl apply -f -
    
    # –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
    kubectl apply -f - << PROMETHEUS_EOF
apiVersion: apps/v1
kind: Deployment
metadata:
  name: prometheus
  namespace: monitoring
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus
  template:
    metadata:
      labels:
        app: prometheus
    spec:
      tolerations:
      - key: disaster-recovery
        value: "true"
        effect: NoSchedule
      containers:
      - name: prometheus
        image: prom/prometheus:latest
        ports:
        - containerPort: 9090
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 1Gi
PROMETHEUS_EOF
    
    log "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è DR —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç"
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è DR
deploy_applications_dr() {
    log "üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è DR..."
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    kubectl apply -f - << APP_EOF
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hashfoundry-app
  namespace: default
spec:
  replicas: 2
  selector:
    matchLabels:
      app: hashfoundry-app
  template:
    metadata:
      labels:
        app: hashfoundry-app
    spec:
      tolerations:
      - key: disaster-recovery
        value: "true"
        effect: NoSchedule
      containers:
      - name: app
        image: nginx:alpine
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 256Mi
---
apiVersion: v1
kind: Service
metadata:
  name: hashfoundry-app
  namespace: default
spec:
  selector:
    app: hashfoundry-app
  ports:
  - port: 80
    targetPort: 80
  type: ClusterIP
APP_EOF
    
    log "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è DR —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã"
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å –Ω—É–ª—è
deploy_from_scratch() {
    log "üèóÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –Ω—É–ª—è..."
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    deploy_critical_services
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    kubectl apply -f - << CONFIG_EOF
apiVersion: v1
kind: ConfigMap
metadata:
  name: dr-config
  namespace: default
data:
  environment: "disaster-recovery"
  cluster: "$DR_CLUSTER"
  region: "$DR_REGION"
  deployment_time: "$(date)"
CONFIG_EOF
    
    log "‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –Ω—É–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ DR —Å–µ—Ä–≤–∏—Å–æ–≤
verify_dr_services() {
    log "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ DR —Å–µ—Ä–≤–∏—Å–æ–≤..."
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∑–ª–æ–≤
    local ready_nodes=$(kubectl get nodes --no-headers | grep Ready | wc -l)
    log "–ì–æ—Ç–æ–≤—ã—Ö —É–∑–ª–æ–≤: $ready_nodes"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–¥–æ–≤
    log "–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ–¥—ã:"
    kubectl get pods -n kube-system --field-selector=status.phase=Running
    kubectl get pods -n ingress-nginx --field-selector=status.phase=Running
    
    # –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
    test_service_availability
    
    log "‚úÖ DR —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã"
}

# –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
test_service_availability() {
    log "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP
    local external_ip=$(kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}' 2>/dev/null)
    
    if [ -n "$external_ip" ]; then
        log "üåê –í–Ω–µ—à–Ω–∏–π IP DR –∫–ª–∞—Å—Ç–µ—Ä–∞: $external_ip"
        
        # –¢–µ—Å—Ç HTTP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
        if curl -f -s "http://$external_ip" >/dev/null 2>&1; then
            log "‚úÖ HTTP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞"
        else
            log "‚ö†Ô∏è HTTP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        fi
    else
        log "‚ö†Ô∏è –í–Ω–µ—à–Ω–∏–π IP –Ω–µ –ø–æ–ª—É—á–µ–Ω"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ DR
monitor_dr_health() {
    log "üìä –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ DR..."
    
    while true; do
        if ! check_primary_health; then
            log "üö® Primary –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!"
            
            if check_dr_health; then
                log "üö® –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ failover..."
                initiate_failover
                break
            else
                log "‚ùå DR –∫–ª–∞—Å—Ç–µ—Ä —Ç–∞–∫–∂–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!"
                send_notification "üö®" "Both primary and DR clusters are unavailable!"
            fi
        else
            log "‚úÖ Primary –∫–ª–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
        fi
        
        sleep 60  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    done
}

# –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è primary –∫–ª–∞—Å—Ç–µ—Ä–∞
restore_primary_cluster() {
    log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ primary –∫–ª–∞—Å—Ç–µ—Ä–∞..."
    
    send_notification "üîÑ" "Starting primary cluster recovery process."
    
    # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ primary
    kubectl config use-context do-$PRIMARY_REGION-$PRIMARY_CLUSTER
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è primary
    if check_primary_health; then
        log "‚úÖ Primary –∫–ª–∞—Å—Ç–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        
        # –°–æ–∑–¥–∞–Ω–∏–µ backup —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è DR
        create_dr_backup
        
        # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ DNS –æ–±—Ä–∞—Ç–Ω–æ
        switch_dns_to_primary
        
        # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ DR –∫–ª–∞—Å—Ç–µ—Ä–∞ –æ–±—Ä–∞—Ç–Ω–æ
        scale_down_dr_cluster
        
        send_notification "‚úÖ" "Primary cluster recovery completed. Traffic switched back."
    else
        log "‚ùå Primary –∫–ª–∞—Å—Ç–µ—Ä –≤—Å–µ –µ—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        send_notification "‚ö†Ô∏è" "Primary cluster recovery failed. Continuing on DR cluster."
    fi
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è backup DR —Å–æ—Å—Ç–æ—è–Ω–∏—è
create_dr_backup() {
    log "üíæ –°–æ–∑–¥–∞–Ω–∏–µ backup DR —Å–æ—Å—Ç–æ—è–Ω–∏—è..."
    
    kubectl config use-context do-$DR_REGION-$DR_CLUSTER
    
    local dr_backup_name="dr-state-backup-$(date +%Y%m%d-%H%M%S)"
    velero backup create $dr_backup_name \
        --include-namespaces default,monitoring,argocd \
        --wait >/dev/null 2>&1
    
    log "‚úÖ DR backup —Å–æ–∑–¥–∞–Ω: $dr_backup_name"
}

# –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è DNS –Ω–∞ primary
switch_dns_to_primary() {
    log "üåê –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ DNS –Ω–∞ primary –∫–ª–∞—Å—Ç–µ—Ä..."
    
    kubectl config use-context do-$PRIMARY_REGION-$PRIMARY_CLUSTER
    local primary_ip=$(kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}' 2>/dev/null)
    
    if [ -n "$primary_ip" ]; then
        doctl compute domain records update $DOMAIN \
            --record-type A \
            --record-name api \
            --record-data $primary_ip \
            --record-ttl 300 >/dev/null 2>&1
        
        log "‚úÖ DNS –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ primary: api.$DOMAIN -> $primary_ip"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è DR –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤–Ω–∏–∑
scale_down_dr_cluster() {
    log "üìâ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ DR –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤–Ω–∏–∑..."
    
    doctl kubernetes cluster node-pool update $DR_CLUSTER dr-worker-pool \
        --count 2 \
        --auto-scale \
        --min-nodes 2 \
        --max-nodes 4 >/dev/null 2>&1
    
    log "‚úÖ DR –∫–ª–∞—Å—Ç–µ—Ä –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω –≤–Ω–∏–∑"
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
main() {
    case "$1" in
        monitor)
            log "üîç –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ DR..."
            monitor_dr_health
            ;;
        failover)
            log "üö® –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π failover..."
            if check_dr_health; then
                initiate_failover
            else
                log "‚ùå DR –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è failover"
                exit 1
            fi
            ;;
        restore)
            log "üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ primary –∫–ª–∞—Å—Ç–µ—Ä–∞..."
            restore_primary_cluster
            ;;
        test)
            log "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏..."
            check_primary_health
            check_dr_health
            verify_dr_services
            ;;
        *)
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 {monitor|failover|restore|test}"
            echo "  monitor  - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover"
            echo "  failover - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π failover –Ω–∞ DR –∫–ª–∞—Å—Ç–µ—Ä"
            echo "  restore  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ primary –∫–ª–∞—Å—Ç–µ—Ä–∞"
            echo "  test     - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏"
            exit 1
            ;;
    esac
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
trap 'send_notification "‚ùå" "DR script error occurred"; exit 1' ERR

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"
EOF

chmod +x automated-failover.sh
```

## üìä **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Disaster Recovery:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Multi-Region DR Architecture                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Primary Region (fra1)          DR Region (ams3)           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Primary Cluster    ‚îÇ        ‚îÇ   DR Cluster        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Control Plane  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  ‚îú‚îÄ‚îÄ Control Plane  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Worker Nodes   ‚îÇ        ‚îÇ  ‚îú‚îÄ‚îÄ Worker Nodes   ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD         ‚îÇ        ‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD (Sync)  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Monitoring     ‚îÇ        ‚îÇ  ‚îú‚îÄ‚îÄ Monitoring     ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ Applications   ‚îÇ        ‚îÇ  ‚îî‚îÄ‚îÄ Applications   ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ           ‚îÇ                              ‚îÇ                  ‚îÇ
‚îÇ           ‚ñº                              ‚ñº                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ   Load Balancer     ‚îÇ        ‚îÇ   Load Balancer     ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ   (Primary LB)      ‚îÇ        ‚îÇ   (DR LB)           ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ           ‚îÇ                              ‚îÇ                  ‚îÇ
‚îÇ           ‚ñº                              ‚ñº                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ              DNS Failover Management                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  api.hashfoundry.com ‚Üí Primary LB (Normal)             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  api.hashfoundry.com ‚Üí DR LB (Failover)                ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Shared Components                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Backup Storage (Digital Ocean Spaces)                 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ etcd snapshots                                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Application data                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Configuration backups                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ Volume snapshots                                  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Monitoring & Alerting                                 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Health checks                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Automated failover triggers                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Slack/Teams notifications                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ Prometheus metrics                                ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ **–ú–∞—Ç—Ä–∏—Ü–∞ DR —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:**

### **1. RTO/RPO —Ü–µ–ª–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º —Å–µ—Ä–≤–∏—Å–æ–≤:**
| Tier | –°–µ—Ä–≤–∏—Å—ã | RTO | RPO | –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|------|---------|-----|-----|-----------|-----------|
| Tier 1 | API, Auth, etcd | < 15 –º–∏–Ω | < 5 –º–∏–Ω | Hot Standby | –í—ã—Å–æ–∫–∞—è |
| Tier 2 | Web App, Monitoring | < 1 —á–∞—Å | < 30 –º–∏–Ω | Warm Standby | –°—Ä–µ–¥–Ω—è—è |
| Tier 3 | Analytics, Reports | < 4 —á–∞—Å–∞ | < 4 —á–∞—Å–∞ | Cold Standby | –ù–∏–∑–∫–∞—è |

### **2. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ DR:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç dr-monitoring.sh
cat << 'EOF' > dr-monitoring.sh
#!/bin/bash

echo "üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ DR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏"
echo "=========================="

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ DR –º–µ—Ç—Ä–∏–∫
check_dr_metrics() {
    echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ DR –º–µ—Ç—Ä–∏–∫:"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö backup
    echo "üì¶ –ü–æ—Å–ª–µ–¥–Ω–∏–µ backup:"
    velero backup get --sort-by=.metadata.creationTimestamp | tail -5
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
    echo -e "\nüèóÔ∏è –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤:"
    
    # Primary –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-fra1-hashfoundry-ha >/dev/null 2>&1
    PRIMARY_NODES=$(kubectl get nodes --no-headers | grep Ready | wc -l)
    PRIMARY_PODS=$(kubectl get pods --all-namespaces --field-selector=status.phase=Running --no-headers | wc -l)
    echo "Primary: $PRIMARY_NODES —É–∑–ª–æ–≤, $PRIMARY_PODS –ø–æ–¥–æ–≤"
    
    # DR –∫–ª–∞—Å—Ç–µ—Ä
    kubectl config use-context do-ams3-hashfoundry-dr >/dev/null 2>&1
    DR_NODES=$(kubectl get nodes --no-headers | grep Ready | wc -l)
    DR_PODS=$(kubectl get pods --all-namespaces --field-selector=status.phase=Running --no-headers | wc -l)
    echo "DR: $DR_NODES —É–∑–ª–æ–≤, $DR_PODS –ø–æ–¥–æ–≤"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ backup –≤–æ–∑—Ä–∞—Å—Ç–∞
    echo -e "\n‚è∞ –í–æ–∑—Ä–∞—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup:"
    LATEST_BACKUP=$(velero backup get -o json | jq -r '.items | sort_by(.metadata.creationTimestamp) | last | .metadata.creationTimestamp')
    if [ "$LATEST_BACKUP" != "null" ]; then
        BACKUP_AGE=$(( $(date +%s) - $(date -d "$LATEST_BACKUP" +%s) ))
        BACKUP_AGE_MIN=$((BACKUP_AGE / 60))
        echo "–ü–æ—Å–ª–µ–¥–Ω–∏–π backup: $BACKUP_AGE_MIN –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥"
        
        if [ $BACKUP_AGE -gt 3600 ]; then
            echo "‚ö†Ô∏è WARNING: Backup —Å—Ç–∞—Ä—à–µ 1 —á–∞—Å–∞"
        else
            echo "‚úÖ Backup –∞–∫—Ç—É–∞–ª–µ–Ω"
        fi
    else
        echo "‚ùå Backup –Ω–µ –Ω–∞–π–¥–µ–Ω"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
check_dns_config() {
    echo -e "\nüåê –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö DNS –∑–∞–ø–∏—Å–µ–π
    API_IP=$(dig +short api.hashfoundry.com)
    echo "api.hashfoundry.com -> $API_IP"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
    if curl -f -s "http://$API_IP" >/dev/null 2>&1; then
        echo "‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω"
    else
        echo "‚ùå API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
check_automation() {
    echo -e "\nü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ CronJob –¥–ª—è backup
    BACKUP_JOBS=$(kubectl get cronjobs --all-namespaces --no-headers | grep backup | wc -l)
    echo "Backup CronJobs: $BACKUP_JOBS"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    MONITORING_PODS=$(kubectl get pods -n monitoring --field-selector=status.phase=Running --no-headers | wc -l)
    echo "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–≤: $MONITORING_PODS"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
    if kubectl get prometheusrules -n monitoring disaster-recovery-alerts >/dev/null 2>&1; then
        echo "‚úÖ DR –∞–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
    else
        echo "‚ö†Ô∏è DR –∞–ª–µ—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
    fi
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    echo "üöÄ –ó–ê–ü–£–°–ö DR –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê"
    echo "======================="
    
    check_dr_metrics
    check_dns_config
    check_automation
    
    echo -e "\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:"
    echo "1. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ DR –ø—Ä–æ—Ü–µ–¥—É—Ä—ã"
    echo "2. –û–±–Ω–æ–≤–ª—è–π—Ç–µ DR runbooks"
    echo "3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ RTO/RPO –º–µ—Ç—Ä–∏–∫–∏"
    echo "4. –ü—Ä–æ–≤–æ–¥–∏—Ç–µ DR drills –µ–∂–µ–º–µ—Å—è—á–Ω–æ"
    
    echo -e "\n‚úÖ DR –ú–û–ù–ò–¢–û–†–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù!"
}

# –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
main
EOF

chmod +x dr-monitoring.sh
```

## üéØ **Best Practices –¥–ª—è Disaster Recovery:**

### **1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ DR**
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ RTO/RPO —Ü–µ–ª–∏
- –°–æ–∑–¥–∞–π—Ç–µ multi-region –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π backup
- –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ runbooks

### **2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è DR**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π health monitoring
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ automated failover
- –°–æ–∑–¥–∞–π—Ç–µ DNS failover –º–µ—Ö–∞–Ω–∏–∑–º—ã
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### **3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DR**
- –ü—Ä–æ–≤–æ–¥–∏—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ DR drills
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ restore –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ RTO/RPO —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤

### **4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ª—É—á—à–µ–Ω–∏–µ**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ DR –º–µ—Ç—Ä–∏–∫–∏
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –û–±—É—á–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è Disaster Recovery –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ—Å–ª–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤ –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã!**
