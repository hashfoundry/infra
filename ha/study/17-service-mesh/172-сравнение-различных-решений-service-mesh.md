# 172. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π service mesh

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ service mesh —Ä–µ—à–µ–Ω–∏–π?**

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ service mesh —Ä–µ—à–µ–Ω–∏–π** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π, –≤–∫–ª—é—á–∞—é—â–∏–π –æ—Ü–µ–Ω–∫—É Istio vs Linkerd vs Consul Connect vs AWS App Mesh vs Cilium –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º performance overhead, feature completeness, operational complexity, security capabilities, observability depth –∏ ecosystem integration –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.

## üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ service mesh —Ä–µ—à–µ–Ω–∏—è:**

### **1. Istio - Enterprise-grade –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞**
- **Strengths**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, rich traffic management
- **Weaknesses**: –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π resource overhead
- **Best for**: Enterprise environments, complex microservices
- **Proxy**: Envoy, Control Plane: Istiod

### **2. Linkerd - Simplicity-focused —Ä–µ—à–µ–Ω–∏–µ**
- **Strengths**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–∏–∑–∫–∏–π overhead, Rust-based proxy
- **Weaknesses**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –º–µ–Ω—å—à–µ features
- **Best for**: Performance-critical apps, quick adoption
- **Proxy**: Linkerd2-proxy, Control Plane: Linkerd Controller

### **3. Consul Connect - HashiCorp ecosystem**
- **Strengths**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vault/Nomad, multi-platform
- **Weaknesses**: –ú–µ–Ω—å—à–µ Kubernetes-native features
- **Best for**: HashiCorp environments, hybrid deployments
- **Proxy**: Envoy/Built-in, Control Plane: Consul

### **4. AWS App Mesh - Cloud-native —Ä–µ—à–µ–Ω–∏–µ**
- **Strengths**: AWS integration, managed service
- **Weaknesses**: Vendor lock-in, AWS-specific
- **Best for**: AWS-heavy workloads, managed operations
- **Proxy**: Envoy, Control Plane: AWS Managed

### **5. Cilium Service Mesh - eBPF-powered**
- **Strengths**: eBPF performance, network-focused
- **Weaknesses**: –ù–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∑—Ä–µ–ª–æ—Å—Ç—å
- **Best for**: Network-intensive apps, performance optimization
- **Proxy**: eBPF, Control Plane: Cilium Agent

## üìä **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ HA –∫–ª–∞—Å—Ç–µ—Ä–∞:**

### **1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö service mesh –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö service mesh —Ä–µ—à–µ–Ω–∏–π
kubectl get namespace istio-system linkerd cilium-system consul --ignore-not-found
kubectl get pods -n kube-system -l k8s-app=cilium

# –ê–Ω–∞–ª–∏–∑ CNI —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
kubectl get pods -n kube-system -o jsonpath='{.items[*].spec.containers[*].image}' | grep -E "(calico|cilium|flannel|weave)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è service mesh
kubectl top nodes
kubectl describe nodes | grep -E "(Capacity|Allocatable)" -A 5

# –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ network policy support
kubectl get networkpolicies --all-namespaces
```

### **2. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ service mesh readiness:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Kubernetes –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
kubectl version --short

# –ê–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl get nodes -o custom-columns=NAME:.metadata.name,CPU:.status.capacity.cpu,MEMORY:.status.capacity.memory,PODS:.status.capacity.pods

# –ü—Ä–æ–≤–µ—Ä–∫–∞ storage classes –¥–ª—è persistent volumes
kubectl get storageclass

# –ê–Ω–∞–ª–∏–∑ load balancer capabilities
kubectl get svc -o wide | grep LoadBalancer
```

### **3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ service mesh performance baseline:**
```bash
# Baseline network performance
kubectl run network-test --image=busybox --rm -i --restart=Never -- sh -c "time wget -q -O- http://prometheus-server.monitoring/ > /dev/null"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ current latency –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
kubectl exec deployment/argocd-server -n argocd -- time curl -s http://grafana.monitoring/ > /dev/null

# –ê–Ω–∞–ª–∏–∑ current resource usage
kubectl top pods --all-namespaces --containers | head -20
```

## üîÑ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è comprehensive service mesh comparison:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ multi-mesh evaluation framework:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç service-mesh-evaluator.sh
cat << 'EOF' > service-mesh-evaluator.sh
#!/bin/bash

echo "üîç Comprehensive Service Mesh Evaluation Framework"
echo "================================================="

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
EVALUATION_NAMESPACE="mesh-evaluation"
TIMESTAMP=$(date +%Y%m%d-%H%M%S)
EVALUATION_LOG="/var/log/service-mesh-evaluation-$TIMESTAMP.log"

# –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a $EVALUATION_LOG
}

# –§—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ cluster readiness
analyze_cluster_readiness() {
    log "üè• –ê–Ω–∞–ª–∏–∑ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è service mesh"
    
    local readiness_report="/tmp/cluster-readiness-$TIMESTAMP.json"
    
    # Comprehensive cluster assessment
    cat > $readiness_report << READINESS_REPORT_EOF
{
  "timestamp": "$(date -Iseconds)",
  "cluster": "$(kubectl config current-context)",
  "cluster_readiness": {
    "kubernetes_version": "$(kubectl version --short 2>/dev/null | grep Server | awk '{print $3}' || echo "unknown")",
    "node_resources": {
      "total_nodes": $(kubectl get nodes --no-headers | wc -l),
      "ready_nodes": $(kubectl get nodes --no-headers | grep Ready | wc -l),
      "total_cpu": "$(kubectl get nodes -o jsonpath='{.items[*].status.capacity.cpu}' | tr ' ' '\n' | awk '{sum += $1} END {print sum}')cores",
      "total_memory": "$(kubectl get nodes -o jsonpath='{.items[*].status.capacity.memory}' | tr ' ' '\n' | sed 's/Ki$//' | awk '{sum += $1} END {print sum/1024/1024 "GB"}')",
      "total_pods_capacity": $(kubectl get nodes -o jsonpath='{.items[*].status.capacity.pods}' | tr ' ' '\n' | awk '{sum += $1} END {print sum}')
    },
    "network_capabilities": {
      "cni_plugin": "$(kubectl get pods -n kube-system -o jsonpath='{.items[*].spec.containers[*].image}' | grep -o -E '(calico|cilium|flannel|weave)' | head -1 || echo "unknown")",
      "network_policies_supported": $(kubectl get networkpolicies --all-namespaces --no-headers | wc -l | awk '{if($1>0) print "true"; else print "false"}'),
      "load_balancer_available": $(kubectl get svc --all-namespaces -o jsonpath='{.items[?(@.spec.type=="LoadBalancer")].metadata.name}' | wc -w | awk '{if($1>0) print "true"; else print "false"}')
    },
    "storage_capabilities": {
      "storage_classes": $(kubectl get storageclass --no-headers | wc -l),
      "default_storage_class": "$(kubectl get storageclass -o jsonpath='{.items[?(@.metadata.annotations.storageclass\.kubernetes\.io/is-default-class=="true")].metadata.name}' || echo "none")",
      "persistent_volumes": $(kubectl get pv --no-headers | wc -l)
    }
  },
  "service_mesh_compatibility": {
    "istio_compatible": $(kubectl version --short 2>/dev/null | grep Server | awk '{print $3}' | grep -E "v1\.(2[0-9]|3[0-9])" && echo "true" || echo "false"),
    "linkerd_compatible": $(kubectl version --short 2>/dev/null | grep Server | awk '{print $3}' | grep -E "v1\.(1[8-9]|2[0-9]|3[0-9])" && echo "true" || echo "false"),
    "consul_compatible": $(kubectl version --short 2>/dev/null | grep Server | awk '{print $3}' | grep -E "v1\.(1[6-9]|2[0-9]|3[0-9])" && echo "true" || echo "false"),
    "cilium_compatible": $(kubectl get pods -n kube-system -l k8s-app=cilium --no-headers | wc -l | awk '{if($1>0) print "true"; else print "false"}')
  }
}
READINESS_REPORT_EOF
    
    log "üìÑ Cluster readiness report: $readiness_report"
    
    # –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    local total_cpu=$(kubectl get nodes -o jsonpath='{.items[*].status.capacity.cpu}' | tr ' ' '\n' | awk '{sum += $1} END {print sum}')
    local ready_nodes=$(kubectl get nodes --no-headers | grep Ready | wc -l)
    local cni_plugin=$(kubectl get pods -n kube-system -o jsonpath='{.items[*].spec.containers[*].image}' | grep -o -E '(calico|cilium|flannel|weave)' | head -1 || echo "unknown")
    
    log "üéØ Cluster Readiness Summary:"
    log "  üñ•Ô∏è Ready nodes: $ready_nodes"
    log "  ‚ö° Total CPU: ${total_cpu} cores"
    log "  üåê CNI plugin: $cni_plugin"
    
    return 0
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è evaluation environment
create_evaluation_environment() {
    log "üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ evaluation environment"
    
    # –°–æ–∑–¥–∞–Ω–∏–µ namespace –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    kubectl create namespace $EVALUATION_NAMESPACE --dry-run=client -o yaml | kubectl apply -f -
    
    # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ test applications
    kubectl apply -f - << TEST_APPS_EOF
# Frontend application
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
  namespace: $EVALUATION_NAMESPACE
  labels:
    app: frontend
    tier: web
spec:
  replicas: 2
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
        tier: web
    spec:
      containers:
      - name: frontend
        image: nginx:1.21
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 256Mi
        env:
        - name: BACKEND_URL
          value: "http://backend:8080"
---
apiVersion: v1
kind: Service
metadata:
  name: frontend
  namespace: $EVALUATION_NAMESPACE
spec:
  selector:
    app: frontend
  ports:
  - port: 80
    targetPort: 80
---
# Backend application
apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend
  namespace: $EVALUATION_NAMESPACE
  labels:
    app: backend
    tier: api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: backend
  template:
    metadata:
      labels:
        app: backend
        tier: api
    spec:
      containers:
      - name: backend
        image: httpd:2.4
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 500m
            memory: 512Mi
        env:
        - name: DATABASE_URL
          value: "http://database:5432"
---
apiVersion: v1
kind: Service
metadata:
  name: backend
  namespace: $EVALUATION_NAMESPACE
spec:
  selector:
    app: backend
  ports:
  - port: 8080
    targetPort: 80
---
# Database application
apiVersion: apps/v1
kind: Deployment
metadata:
  name: database
  namespace: $EVALUATION_NAMESPACE
  labels:
    app: database
    tier: data
spec:
  replicas: 1
  selector:
    matchLabels:
      app: database
  template:
    metadata:
      labels:
        app: database
        tier: data
    spec:
      containers:
      - name: database
        image: postgres:13
        ports:
        - containerPort: 5432
        resources:
          requests:
            cpu: 200m
            memory: 256Mi
          limits:
            cpu: 1000m
            memory: 1Gi
        env:
        - name: POSTGRES_DB
          value: "testdb"
        - name: POSTGRES_USER
          value: "testuser"
        - name: POSTGRES_PASSWORD
          value: "testpass"
---
apiVersion: v1
kind: Service
metadata:
  name: database
  namespace: $EVALUATION_NAMESPACE
spec:
  selector:
    app: database
  ports:
  - port: 5432
    targetPort: 5432
TEST_APPS_EOF
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    kubectl wait --for=condition=available deployment/frontend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/backend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/database -n $EVALUATION_NAMESPACE --timeout=300s
    
    log "‚úÖ Evaluation environment —Å–æ–∑–¥–∞–Ω"
}

# –§—É–Ω–∫—Ü–∏—è baseline performance testing
run_baseline_performance_test() {
    log "üìä –ó–∞–ø—É—Å–∫ baseline performance test"
    
    local baseline_report="/tmp/baseline-performance-$TIMESTAMP.json"
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ service IPs
    local frontend_ip=$(kubectl get svc frontend -n $EVALUATION_NAMESPACE -o jsonpath='{.spec.clusterIP}')
    local backend_ip=$(kubectl get svc backend -n $EVALUATION_NAMESPACE -o jsonpath='{.spec.clusterIP}')
    
    # –ó–∞–ø—É—Å–∫ performance tests
    cat > $baseline_report << BASELINE_REPORT_EOF
{
  "timestamp": "$(date -Iseconds)",
  "test_type": "baseline_without_service_mesh",
  "cluster": "$(kubectl config current-context)",
  "performance_metrics": {
    "frontend_response_time": {
$(kubectl run perf-test-frontend --image=busybox --rm -i --restart=Never --quiet -- sh -c "
time for i in \$(seq 1 10); do
  wget -q -O- http://$frontend_ip/ > /dev/null 2>&1
done" 2>&1 | grep real | awk '{print "      \"average_time\": \"" $2 "\""}')
    },
    "backend_response_time": {
$(kubectl run perf-test-backend --image=busybox --rm -i --restart=Never --quiet -- sh -c "
time for i in \$(seq 1 10); do
  wget -q -O- http://$backend_ip/ > /dev/null 2>&1
done" 2>&1 | grep real | awk '{print "      \"average_time\": \"" $2 "\""}')
    },
    "resource_usage": {
      "total_cpu_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers | awk '{sum+=$2} END {print sum "m"}' | sed 's/m$//' || echo "0")m",
      "total_memory_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers | awk '{sum+=$3} END {print sum "Mi"}' | sed 's/Mi$//' || echo "0")Mi",
      "pod_count": $(kubectl get pods -n $EVALUATION_NAMESPACE --no-headers | wc -l)
    }
  }
}
BASELINE_REPORT_EOF
    
    log "üìÑ Baseline performance report: $baseline_report"
    
    # –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    local pod_count=$(kubectl get pods -n $EVALUATION_NAMESPACE --no-headers | wc -l)
    local total_cpu=$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers 2>/dev/null | awk '{sum+=$2} END {print sum}' | sed 's/m$//' || echo "0")
    
    log "üéØ Baseline Performance:"
    log "  üì¶ Active pods: $pod_count"
    log "  ‚ö° Total CPU: ${total_cpu}m"
    
    return 0
}

# –§—É–Ω–∫—Ü–∏—è evaluation Istio
evaluate_istio_performance() {
    log "üîç Evaluation Istio performance"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Istio
    if ! kubectl get namespace istio-system &>/dev/null; then
        log "‚ö†Ô∏è Istio –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ–ø—É—Å–∫ evaluation"
        return 1
    fi
    
    local istio_report="/tmp/istio-evaluation-$TIMESTAMP.json"
    
    # –í–∫–ª—é—á–µ–Ω–∏–µ Istio injection
    kubectl label namespace $EVALUATION_NAMESPACE istio-injection=enabled --overwrite
    
    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–≤ –¥–ª—è sidecar injection
    kubectl rollout restart deployment/frontend -n $EVALUATION_NAMESPACE
    kubectl rollout restart deployment/backend -n $EVALUATION_NAMESPACE
    kubectl rollout restart deployment/database -n $EVALUATION_NAMESPACE
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    kubectl wait --for=condition=available deployment/frontend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/backend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/database -n $EVALUATION_NAMESPACE --timeout=300s
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ sidecar injection
    local sidecar_count=$(kubectl get pods -n $EVALUATION_NAMESPACE -o jsonpath='{.items[*].spec.containers[*].name}' | grep -o istio-proxy | wc -l)
    
    # Performance testing —Å Istio
    local frontend_ip=$(kubectl get svc frontend -n $EVALUATION_NAMESPACE -o jsonpath='{.spec.clusterIP}')
    
    cat > $istio_report << ISTIO_REPORT_EOF
{
  "timestamp": "$(date -Iseconds)",
  "test_type": "istio_service_mesh",
  "cluster": "$(kubectl config current-context)",
  "istio_metrics": {
    "sidecar_injection": {
      "total_sidecars": $sidecar_count,
      "injection_successful": $([ $sidecar_count -gt 0 ] && echo "true" || echo "false")
    },
    "performance_metrics": {
      "frontend_response_time": {
$(kubectl run perf-test-istio --image=busybox --rm -i --restart=Never --quiet -- sh -c "
time for i in \$(seq 1 10); do
  wget -q -O- http://$frontend_ip/ > /dev/null 2>&1
done" 2>&1 | grep real | awk '{print "        \"average_time\": \"" $2 "\""}')
      },
      "resource_usage": {
        "total_cpu_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers 2>/dev/null | awk '{sum+=$2} END {print sum "m"}' | sed 's/m$//' || echo "0")m",
        "total_memory_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers 2>/dev/null | awk '{sum+=$3} END {print sum "Mi"}' | sed 's/Mi$//' || echo "0")Mi",
        "sidecar_overhead": {
          "cpu": "$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep istio-proxy | awk '{sum+=$4} END {print sum "m"}' | sed 's/m$//' || echo "0")m",
          "memory": "$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep istio-proxy | awk '{sum+=$5} END {print sum "Mi"}' | sed 's/Mi$//' || echo "0")Mi"
        }
      }
    },
    "security_features": {
      "mtls_enabled": $(kubectl get peerauthentication -n $EVALUATION_NAMESPACE --no-headers | wc -l | awk '{if($1>0) print "true"; else print "false"}'),
      "authorization_policies": $(kubectl get authorizationpolicies -n $EVALUATION_NAMESPACE --no-headers | wc -l)
    }
  }
}
ISTIO_REPORT_EOF
    
    log "üìÑ Istio evaluation report: $istio_report"
    
    # –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    local sidecar_cpu=$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep istio-proxy | awk '{sum+=$4} END {print sum}' | sed 's/m$//' || echo "0")
    local sidecar_memory=$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep istio-proxy | awk '{sum+=$5} END {print sum}' | sed 's/Mi$//' || echo "0")
    
    log "üéØ Istio Performance:"
    log "  üîó Sidecars injected: $sidecar_count"
    log "  ‚ö° Sidecar CPU overhead: ${sidecar_cpu}m"
    log "  üíæ Sidecar Memory overhead: ${sidecar_memory}Mi"
    
    return 0
}

# –§—É–Ω–∫—Ü–∏—è evaluation Linkerd
evaluate_linkerd_performance() {
    log "üîç Evaluation Linkerd performance"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Linkerd
    if ! kubectl get namespace linkerd &>/dev/null; then
        log "‚ö†Ô∏è Linkerd –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ–ø—É—Å–∫ evaluation"
        return 1
    fi
    
    local linkerd_report="/tmp/linkerd-evaluation-$TIMESTAMP.json"
    
    # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Istio injection
    kubectl label namespace $EVALUATION_NAMESPACE istio-injection-
    
    # –í–∫–ª—é—á–µ–Ω–∏–µ Linkerd injection
    kubectl annotate namespace $EVALUATION_NAMESPACE linkerd.io/inject=enabled --overwrite
    
    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–≤ –¥–ª—è sidecar injection
    kubectl rollout restart deployment/frontend -n $EVALUATION_NAMESPACE
    kubectl rollout restart deployment/backend -n $EVALUATION_NAMESPACE
    kubectl rollout restart deployment/database -n $EVALUATION_NAMESPACE
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    kubectl wait --for=condition=available deployment/frontend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/backend -n $EVALUATION_NAMESPACE --timeout=300s
    kubectl wait --for=condition=available deployment/database -n $EVALUATION_NAMESPACE --timeout=300s
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ sidecar injection
    local sidecar_count=$(kubectl get pods -n $EVALUATION_NAMESPACE -o jsonpath='{.items[*].spec.containers[*].name}' | grep -o linkerd-proxy | wc -l)
    
    # Performance testing —Å Linkerd
    local frontend_ip=$(kubectl get svc frontend -n $EVALUATION_NAMESPACE -o jsonpath='{.spec.clusterIP}')
    
    cat > $linkerd_report << LINKERD_REPORT_EOF
{
  "timestamp": "$(date -Iseconds)",
  "test_type": "linkerd_service_mesh",
  "cluster": "$(kubectl config current-context)",
  "linkerd_metrics": {
    "sidecar_injection": {
      "total_sidecars": $sidecar_count,
      "injection_successful": $([ $sidecar_count -gt 0 ] && echo "true" || echo "false")
    },
    "performance_metrics": {
      "frontend_response_time": {
$(kubectl run perf-test-linkerd --image=busybox --rm -i --restart=Never --quiet -- sh -c "
time for i in \$(seq 1 10); do
  wget -q -O- http://$frontend_ip/ > /dev/null 2>&1
done" 2>&1 | grep real | awk '{print "        \"average_time\": \"" $2 "\""}')
      },
      "resource_usage": {
        "total_cpu_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers 2>/dev/null | awk '{sum+=$2} END {print sum "m"}' | sed 's/m$//' || echo "0")m",
        "total_memory_usage": "$(kubectl top pods -n $EVALUATION_NAMESPACE --no-headers 2>/dev/null | awk '{sum+=$3} END {print sum "Mi"}' | sed 's/Mi$//' || echo "0")Mi",
        "sidecar_overhead": {
          "cpu": "$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep linkerd-proxy | awk '{sum+=$4} END {print sum "m"}' | sed 's/m$//' || echo "0")m",
          "memory": "$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep linkerd-proxy | awk '{sum+=$5} END {print sum "Mi"}' | sed 's/Mi$//' || echo "0")Mi"
        }
      }
    },
    "security_features": {
      "mtls_enabled": "true",
      "automatic_tls": "true"
    }
  }
}
LINKERD_REPORT_EOF
    
    log "üìÑ Linkerd evaluation report: $linkerd_report"
    
    # –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    local sidecar_cpu=$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep linkerd-proxy | awk '{sum+=$4} END {print sum}' | sed 's/m$//' || echo "0")
    local sidecar_memory=$(kubectl top pods -n $EVALUATION_NAMESPACE --containers 2>/dev/null | grep linkerd-proxy | awk '{sum+=$5} END {print sum}' | sed 's/Mi$//' || echo "0")
    
    log "üéØ Linkerd Performance:"
    log "  üîó Sidecars injected: $sidecar_count"
    log "  ‚ö° Sidecar CPU overhead: ${sidecar_cpu}m"
    log "  üíæ Sidecar Memory overhead: ${sidecar_memory}Mi"
    
    return 0
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è comparison report
create_comparison_report() {
    log "üìã –°–æ–∑–¥–∞–Ω–∏–µ comprehensive comparison report"
    
    local comparison_report="/tmp/service-mesh-comparison-$TIMESTAMP.json"
    
    cat > $comparison_report << COMPARISON_REPORT_EOF
{
  "report_metadata": {
    "timestamp": "$(date -Iseconds)",
    "cluster": "$(kubectl config current-context)",
    "evaluation_namespace": "$EVALUATION_NAMESPACE",
    "kubernetes_version": "$(kubectl version --short 2>/dev/null | grep Server | awk '{print $3}' || echo "unknown")"
  },
  "service_mesh_comparison": {
    "available_solutions": {
      "istio": $(kubectl get namespace istio-system &>/dev/null && echo "true" || echo "false"),
      "linkerd": $(kubectl get namespace linkerd &>/dev/null && echo "true" || echo "false"),
      "consul": $(kubectl get namespace consul &>/dev/null && echo "true" || echo "false"),
      "cilium": $(kubectl get pods -n kube-system -l k8s-app=cilium --no-headers | wc -l | awk '{if($1>0) print "true"; else print "false"}')
    },
    "cluster_characteristics": {
      "total_nodes": $(kubectl get nodes --no-headers | wc -l),
      "total_cpu_cores": "$(kubectl get nodes -o jsonpath='{.items[*].status.capacity.cpu}' | tr ' ' '\n' | awk '{sum += $1} END {print sum}')cores",
      "total_memory": "$(kubectl get nodes -o jsonpath='{.items[*].status.capacity.memory}' | tr ' ' '\n' | sed 's/Ki$//' | awk '{sum += $1} END {print sum/1024/1024 "GB"}')",
      "cni_plugin": "$(kubectl get pods -n kube-system -o jsonpath='{.items[*].spec.containers[*].image}' | grep -o -E '(calico|cilium|flannel|weave)' | head -1 || echo "unknown")"
    },
    "recommendations": {
      "for_performance": "Linkerd –∏–ª–∏ Cilium",
      "for_features": "Istio",
      "for_simplicity": "Linkerd –∏–ª–∏ AWS App Mesh",
      "for_aws_workloads": "AWS App Mesh",
      "for_hashicorp_ecosystem": "Consul Connect",
      "for_network_focus": "Cilium Service Mesh"
    }
  },
  "evaluation_summary": {
    "baseline_established": $([ -f "/tmp/baseline-performance-$TIMESTAMP.json" ] && echo "true" || echo "false"),
    "istio_evaluated": $([ -f "/tmp/istio-evaluation-$TIMESTAMP.json" ] && echo "true" || echo "false"),
    "linkerd_evaluated": $([ -f "/tmp/linkerd-evaluation-$TIMESTAMP.json" ] && echo "true" || echo "false"),
    "next_steps": [
      "Review performance reports",
      "Consider feature requirements",
      "Evaluate operational complexity",
      "Plan pilot deployment"
    ]
  }
}
COMPARISON_REPORT_EOF
    
    log "üìÑ Comprehensive comparison report: $comparison_report"
    
    # Summary
    local available_meshes=0
    kubectl get namespace istio-system &>/dev/null && available_meshes=$((available_meshes + 1))
    kubectl get namespace linkerd &>/dev/null && available_meshes=$((available_meshes + 1))
    kubectl get namespace consul &>/dev/null && available_meshes=$((available_meshes + 1))
    
    log "üéØ Service Mesh Comparison Summary:"
    log "  üìä Available meshes: $available_meshes"
    log "  üè• Cluster ready for service mesh"
    log "  üìã Evaluation reports generated"
    
    return 0
}

# –§—É–Ω–∫—Ü–∏—è cleanup
cleanup_evaluation_environment() {
    log "üßπ Cleanup evaluation environment"
    
    # –£–¥–∞–ª–µ–Ω–∏–µ test namespace
    kubectl delete namespace $EVALUATION_NAMESPACE --ignore-not-found
    
    # –£–¥–∞–ª–µ–Ω–∏–µ temporary reports
    rm -f /tmp/*-evaluation-$TIMESTAMP.json
    rm -f /tmp/cluster-readiness-$TIMESTAMP.json
    rm -f /tmp/service-mesh-comparison-$TIMESTAMP.json
    
    log "‚úÖ Cleanup –∑–∞–≤–µ—Ä—à–µ–Ω"
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
main() {
    case "$1" in
        readiness)
            analyze_cluster_readiness
            ;;
        setup)
            create_evaluation_environment
            ;;
        baseline)
            run_baseline_performance_test
            ;;
        istio)
            evaluate_istio_performance
            ;;
        linkerd)
            evaluate_linkerd_performance
            ;;
        report)
            create_comparison_report
            ;;
        cleanup)
            cleanup_evaluation_environment
            ;;
        full)
            log "üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ service mesh evaluation"
            analyze_cluster_readiness
            create_evaluation_environment
            run_baseline_performance_test
            evaluate_istio_performance
            evaluate_linkerd_performance
            create_comparison_report
            log "üéâ Service mesh evaluation –∑–∞–≤–µ—Ä—à–µ–Ω!"
            ;;
        *)
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 {readiness|setup|baseline|istio|linkerd|report|cleanup|full}"
            echo "  readiness - –ê–Ω–∞–ª–∏–∑ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞"
            echo "  setup     - –°–æ–∑–¥–∞–Ω–∏–µ evaluation environment"
            echo "  baseline  - Baseline performance test"
            echo "  istio     - Evaluation Istio performance"
            echo "  linkerd   - Evaluation Linkerd performance"
            echo "  report    - –°–æ–∑–¥–∞–Ω–∏–µ comparison report"
            echo "  cleanup   - Cleanup evaluation environment"
            echo "  full      - –ü–æ–ª–Ω–æ–µ evaluation"
            exit 1
            ;;
    esac
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
trap 'log "‚ùå –û—à–∏–±–∫–∞ –≤ service mesh evaluator"; exit 1' ERR

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"
EOF

chmod +x service-mesh-evaluator.sh
```

## üìä **Service Mesh Decision Matrix:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Istio | Linkerd | Consul Connect | AWS App Mesh | Cilium |
|----------|-------|---------|----------------|--------------|--------|
| **Performance** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Features** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **Complexity** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **Security** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Observability** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **Ecosystem** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ comparison –≤ HA –∫–ª–∞—Å—Ç–µ—Ä–µ:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Service Mesh Comparison Architecture           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Evaluation Environment (mesh-evaluation namespace)        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îÇFrontend ‚îÇ    ‚îÇBackend  ‚îÇ    ‚îÇDatabase ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îÇ(nginx)  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∂‚îÇ(httpd)  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∂‚îÇ(postgres)              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Service Mesh Options Testing                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Istio     ‚îÇ  Linkerd    ‚îÇ   Consul    ‚îÇ   Cilium    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Envoy   ‚îÇ ‚îú‚îÄ‚îÄ Rust    ‚îÇ ‚îú‚îÄ‚îÄ Envoy   ‚îÇ ‚îú‚îÄ‚îÄ eBPF    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Istiod  ‚îÇ ‚îú‚îÄ‚îÄ Control ‚îÇ ‚îú‚îÄ‚îÄ Agent   ‚îÇ ‚îú‚îÄ‚îÄ Agent   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Rich    ‚îÇ ‚îú‚îÄ‚îÄ Simple  ‚îÇ ‚îú‚îÄ‚îÄ Vault   ‚îÇ ‚îú‚îÄ‚îÄ Network ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ Complex ‚îÇ ‚îî‚îÄ‚îÄ Fast    ‚îÇ ‚îî‚îÄ‚îÄ Multi   ‚îÇ ‚îî‚îÄ‚îÄ Focus   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Performance Metrics Collection                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Latency Measurement                                 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Resource Usage Tracking                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Sidecar Overhead Analysis                           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îú‚îÄ‚îÄ Feature Completeness Assessment                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ Operational Complexity Evaluation                   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ **Best Practices –¥–ª—è –≤—ã–±–æ—Ä–∞ service mesh:**

### **1. Performance Requirements**
- **High Performance**: Linkerd –∏–ª–∏ Cilium
- **Balanced Performance**: Consul Connect
- **Feature-rich**: Istio (—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π)

### **2. Operational Complexity**
- **Simple Operations**: Linkerd –∏–ª–∏ AWS App Mesh
- **Advanced Operations**: Istio
- **Hybrid Environments**: Consul Connect

### **3. Security Requirements**
- **Zero-trust**: Istio –∏–ª–∏ Consul Connect
- **Automatic mTLS**: Linkerd
- **Policy Enforcement**: Istio

### **4. Ecosystem Integration**
- **Kubernetes-native**: Istio –∏–ª–∏ Linkerd
- **HashiCorp stack**: Consul Connect
- **AWS workloads**: AWS App Mesh
- **Network focus**: Cilium

**Service mesh comparison –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç data-driven –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π –≤ HA –∫–ª–∞—Å—Ç–µ—Ä–µ!**
