# 15. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç kube-proxy?

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ kube-proxy?**

**kube-proxy** ‚Äî —ç—Ç–æ —Å–µ—Ç–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–π Node –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª –¥–ª—è Service'–æ–≤. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å –∏ load balancing –¥–ª—è Pod'–æ–≤.

## üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ kube-proxy:**

### **1. Service Discovery**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç Service'—ã –∏ Endpoints
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Service'–æ–≤

### **2. Load Balancing**
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É Pod'–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç session affinity

### **3. Network Proxy**
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Pod'–∞–º
- –†–µ–∞–ª–∏–∑—É–µ—Ç ClusterIP, NodePort, LoadBalancer
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫

## üìä **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ HA –∫–ª–∞—Å—Ç–µ—Ä–∞:**

### **1. kube-proxy –Ω–∞ Node'–∞—Ö:**
```bash
# kube-proxy —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ DaemonSet –Ω–∞ –≤—Å–µ—Ö Node'–∞—Ö
kubectl get pods -n kube-system -l k8s-app=kube-proxy

# kube-proxy –Ω–∞ –∫–∞–∂–¥–æ–π Node
kubectl get pods -n kube-system -l k8s-app=kube-proxy -o wide

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è kube-proxy
kubectl describe configmap kube-proxy -n kube-system
```

### **2. Service'—ã –∏ kube-proxy:**
```bash
# ArgoCD Service
kubectl get svc argocd-server -n argocd

# kube-proxy —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —ç—Ç–æ–≥–æ Service
kubectl describe svc argocd-server -n argocd

# Endpoints, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç kube-proxy
kubectl get endpoints argocd-server -n argocd
```

### **3. ClusterIP –≤ –¥–µ–π—Å—Ç–≤–∏–∏:**
```bash
# ClusterIP Service –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl get svc -n monitoring

# kube-proxy –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Prometheus
kubectl run test-curl --image=curlimages/curl -it --rm -- \
  curl http://prometheus-server.monitoring.svc.cluster.local

# kube-proxy –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ Pod'—É Prometheus
```

### **4. NodePort Service:**
```bash
# –ï—Å–ª–∏ –µ—Å—Ç—å NodePort Service'—ã
kubectl get svc --all-namespaces | grep NodePort

# kube-proxy –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –≤—Å–µ—Ö Node'–∞—Ö
# –¢—Ä–∞—Ñ–∏–∫ –Ω–∞ NodePort –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ Pod'–∞–º
```

### **5. Load Balancer Service:**
```bash
# NGINX Ingress Controller –∫–∞–∫ LoadBalancer
kubectl get svc -n ingress-nginx

# kube-proxy —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º Load Balancer
kubectl describe svc ingress-nginx-controller -n ingress-nginx
```

## üîÑ **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã kube-proxy:**

### **1. iptables mode (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```bash
# kube-proxy —Å–æ–∑–¥–∞–µ—Ç iptables –ø—Ä–∞–≤–∏–ª–∞
# –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
# –°–ª—É—á–∞–π–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∂–∏–º kube-proxy
kubectl logs -n kube-system -l k8s-app=kube-proxy | grep "Using"
```

### **2. IPVS mode:**
```bash
# –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º
# –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
# –ë–æ–ª—å—à–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É IPVS
kubectl get configmap kube-proxy -n kube-system -o yaml | grep mode
```

### **3. userspace mode (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π):**
```bash
# –°—Ç–∞—Ä—ã–π —Ä–µ–∂–∏–º, –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
# –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```

## üîß **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã kube-proxy:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ Service –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å Deployment
kubectl create deployment test-app --image=nginx --replicas=3

# –°–æ–∑–¥–∞—Ç—å Service
kubectl expose deployment test-app --port=80 --target-port=80

# –ü–æ–ª—É—á–∏—Ç—å ClusterIP
kubectl get svc test-app

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø (kube-proxy –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã)
kubectl run test-client --image=curlimages/curl -it --rm -- \
  curl http://test-app.default.svc.cluster.local

# kube-proxy —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É 3 Pod'–∞–º–∏
kubectl get pods -l app=test-app -o wide

# –û—á–∏—Å—Ç–∫–∞
kubectl delete deployment test-app
kubectl delete svc test-app
```

### **2. Session Affinity:**
```bash
# Service —Å session affinity
cat << EOF | kubectl apply -f -
apiVersion: v1
kind: Service
metadata:
  name: sticky-service
spec:
  selector:
    app: test-sticky
  ports:
  - port: 80
    targetPort: 80
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 3600
EOF

# kube-proxy –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –æ–¥–Ω–æ–≥–æ IP –∫ –æ–¥–Ω–æ–º—É Pod'—É
kubectl describe svc sticky-service

# –û—á–∏—Å—Ç–∫–∞
kubectl delete svc sticky-service
```

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ kube-proxy:**

### **1. kube-proxy –º–µ—Ç—Ä–∏–∫–∏:**
```bash
# Port forward –∫ Prometheus
kubectl port-forward svc/prometheus-server -n monitoring 9090:80

# kube-proxy –º–µ—Ç—Ä–∏–∫–∏:
# kubeproxy_sync_proxy_rules_duration_seconds - –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª
# kubeproxy_network_programming_duration_seconds - –≤—Ä–µ–º—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏
# rest_client_requests_total - –∑–∞–ø—Ä–æ—Å—ã –∫ API Server
```

### **2. kube-proxy –ª–æ–≥–∏:**
```bash
# –õ–æ–≥–∏ kube-proxy
kubectl logs -n kube-system -l k8s-app=kube-proxy

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π Node
kubectl logs -n kube-system -l k8s-app=kube-proxy --field-selector spec.nodeName=<node-name>
```

### **3. –°–µ—Ç–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
```bash
# –í managed –∫–ª–∞—Å—Ç–µ—Ä–µ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Node –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
# –ù–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ debug Pod

kubectl run debug-pod --image=nicolaka/netshoot -it --rm -- iptables -t nat -L | grep KUBE
```

## üè≠ **kube-proxy –≤ –≤–∞—à–µ–º HA –∫–ª–∞—Å—Ç–µ—Ä–µ:**

### **1. High Availability:**
```bash
# kube-proxy —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö Node'–∞—Ö
kubectl get nodes
kubectl get pods -n kube-system -l k8s-app=kube-proxy -o wide

# –ï—Å–ª–∏ –æ–¥–Ω–∞ Node –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –¥—Ä—É–≥–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
# Service'—ã –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ Node'—ã
```

### **2. ArgoCD –∏ kube-proxy:**
```bash
# ArgoCD Server Service
kubectl get svc argocd-server -n argocd

# kube-proxy –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç load balancing –º–µ–∂–¥—É ArgoCD Server Pod'–∞–º–∏
kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o wide

# –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ ArgoCD
kubectl run test-argocd --image=curlimages/curl -it --rm -- \
  curl -k https://argocd-server.argocd.svc.cluster.local
```

### **3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ kube-proxy:**
```bash
# Prometheus Service
kubectl get svc prometheus-server -n monitoring

# kube-proxy –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Prometheus
kubectl port-forward svc/prometheus-server -n monitoring 9090:80

# Grafana Service
kubectl get svc grafana -n monitoring

# kube-proxy –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Grafana
kubectl port-forward svc/grafana -n monitoring 3000:80
```

## üîÑ **–¢–∏–ø—ã Service'–æ–≤ –∏ kube-proxy:**

### **1. ClusterIP:**
```bash
# –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl get svc -n argocd | grep ClusterIP

# kube-proxy —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
# –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
```

### **2. NodePort:**
```bash
# –ü–æ—Ä—Ç –Ω–∞ –≤—Å–µ—Ö Node'–∞—Ö
kubectl get svc --all-namespaces | grep NodePort

# kube-proxy –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–π Node
# –î–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ —á–µ—Ä–µ–∑ <NodeIP>:<NodePort>
```

### **3. LoadBalancer:**
```bash
# –í–Ω–µ—à–Ω–∏–π Load Balancer
kubectl get svc -n ingress-nginx | grep LoadBalancer

# kube-proxy —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º LB
# Digital Ocean –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Load Balancer
```

### **4. ExternalName:**
```bash
# DNS CNAME –∑–∞–ø–∏—Å—å
# kube-proxy –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞
# –ü—Ä–æ—Å—Ç–æ DNS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
```

## üö® **–ü—Ä–æ–±–ª–µ–º—ã kube-proxy:**

### **1. Service –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Service –∏ Endpoints
kubectl get svc <service-name>
kubectl get endpoints <service-name>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å kube-proxy –ª–æ–≥–∏
kubectl logs -n kube-system -l k8s-app=kube-proxy | grep ERROR

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Pod'—ã kube-proxy
kubectl get pods -n kube-system -l k8s-app=kube-proxy
```

### **2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
kubectl describe svc <service-name>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å session affinity
kubectl get svc <service-name> -o yaml | grep sessionAffinity

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å readiness probes Pod'–æ–≤
kubectl describe pods -l <service-selector>
```

## üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ kube-proxy:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    kube-proxy                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Service Watcher                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Watch Services from API Server                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Watch Endpoints from API Server                       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Detect changes in real-time                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Proxy Mode                                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ iptables mode (default)                               ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Create iptables rules                             ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ DNAT for ClusterIP                               ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ Random load balancing                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ IPVS mode                                             ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Create IPVS rules                                 ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Multiple LB algorithms                            ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ Better performance                                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ userspace mode (deprecated)                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Network Programming                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ClusterIP implementation                              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ NodePort implementation                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ LoadBalancer integration                              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Session affinity handling                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Health Checking                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Monitor backend Pod health                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Remove unhealthy endpoints                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Update proxy rules                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è kube-proxy:**

### **1. ConfigMap:**
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è kube-proxy
kubectl get configmap kube-proxy -n kube-system -o yaml

# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
# - mode: iptables/ipvs/userspace
# - clusterCIDR: –¥–∏–∞–ø–∞–∑–æ–Ω IP Pod'–æ–≤
# - bindAddress: –∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
# iptables mode –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# - masqueradeAll: –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫
# - syncPeriod: –ø–µ—Ä–∏–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª

# IPVS mode –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# - scheduler: –∞–ª–≥–æ—Ä–∏—Ç–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ (rr, lc, sh)
# - strictARP: —Å—Ç—Ä–æ–≥–∏–π ARP —Ä–µ–∂–∏–º
```

## üéØ **Best Practices –¥–ª—è kube-proxy:**

### **1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏ kube-proxy
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Service'–æ–≤

### **2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IPVS –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Service'–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É

### **3. –û—Ç–ª–∞–¥–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ Endpoints –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ kube-proxy
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å

**kube-proxy ‚Äî —ç—Ç–æ —Å–µ—Ç–µ–≤–æ–π –º–æ—Å—Ç, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Service'–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ!**
