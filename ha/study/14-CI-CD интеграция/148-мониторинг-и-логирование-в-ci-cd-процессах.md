# 148. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö?

## üéØ –í–æ–ø—Ä–æ—Å
–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö?

## üí° –û—Ç–≤–µ—Ç

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å, –±—ã—Å—Ç—Ä—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–±–ª–µ–º –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏.

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CI/CD

#### 1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CI/CD Tools   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Metrics       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Dashboards    ‚îÇ
‚îÇ   (Jenkins,     ‚îÇ    ‚îÇ   Collection    ‚îÇ    ‚îÇ   (Grafana)     ‚îÇ
‚îÇ    GitHub       ‚îÇ    ‚îÇ   (Prometheus)  ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ    Actions)     ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Log           ‚îÇ    ‚îÇ   Alerting      ‚îÇ    ‚îÇ   Analytics     ‚îÇ
‚îÇ   Aggregation   ‚îÇ    ‚îÇ   (AlertManager)‚îÇ    ‚îÇ   (Kibana)      ‚îÇ
‚îÇ   (Loki/ELK)    ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2. **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ CI/CD**
```yaml
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
metrics:
  deployment:
    - deployment_frequency      # –ß–∞—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π
    - lead_time                # –í—Ä–µ–º—è –æ—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    - change_failure_rate      # –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
    - mean_time_to_recovery    # –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  
  pipeline:
    - build_duration           # –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
    - test_duration           # –í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    - pipeline_success_rate   # –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
    - queue_time              # –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏
```

### üõ†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Jenkins

#### 1. **Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è Jenkins**
```yaml
# jenkins-prometheus.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: jenkins-prometheus-config
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
    
    scrape_configs:
    - job_name: 'jenkins'
      static_configs:
      - targets: ['jenkins:8080']
      metrics_path: '/prometheus'
      scrape_interval: 5s
```

#### 2. **Jenkins Pipeline —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏**
```groovy
// Jenkinsfile —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
pipeline {
    agent any
    
    options {
        timestamps()
        timeout(time: 30, unit: 'MINUTES')
    }
    
    stages {
        stage('Build') {
            steps {
                script {
                    def startTime = System.currentTimeMillis()
                    
                    sh 'npm ci'
                    sh 'npm run build'
                    
                    def duration = System.currentTimeMillis() - startTime
                    
                    // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ Prometheus
                    sh """
                        echo 'jenkins_build_duration_seconds{job="${env.JOB_NAME}",stage="build"} ${duration/1000}' | \
                        curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
                    """
                }
            }
        }
        
        stage('Test') {
            steps {
                script {
                    def startTime = System.currentTimeMillis()
                    
                    sh 'npm test'
                    
                    def duration = System.currentTimeMillis() - startTime
                    def testResults = readFile('test-results.xml')
                    def failedTests = (testResults =~ /failures="(\d+)"/).findAll()
                    
                    sh """
                        echo 'jenkins_test_duration_seconds{job="${env.JOB_NAME}"} ${duration/1000}' | \
                        curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
                        
                        echo 'jenkins_test_failures_total{job="${env.JOB_NAME}"} ${failedTests[0][1]}' | \
                        curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
                    """
                }
            }
        }
        
        stage('Deploy') {
            steps {
                script {
                    def startTime = System.currentTimeMillis()
                    
                    sh '''
                        kubectl apply -f k8s/
                        kubectl rollout status deployment/myapp
                    '''
                    
                    def duration = System.currentTimeMillis() - startTime
                    
                    sh """
                        echo 'jenkins_deploy_duration_seconds{job="${env.JOB_NAME}"} ${duration/1000}' | \
                        curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
                        
                        echo 'jenkins_deployment_total{job="${env.JOB_NAME}",status="success"} 1' | \
                        curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
                    """
                }
            }
        }
    }
    
    post {
        always {
            // –°–±–æ—Ä –ª–æ–≥–æ–≤
            archiveArtifacts artifacts: 'logs/**/*', allowEmptyArchive: true
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ ELK
            sh '''
                curl -X POST "elasticsearch:9200/jenkins-logs/_doc" \
                -H "Content-Type: application/json" \
                -d "{
                    \"timestamp\": \"$(date -Iseconds)\",
                    \"job_name\": \"${JOB_NAME}\",
                    \"build_number\": \"${BUILD_NUMBER}\",
                    \"status\": \"${currentBuild.currentResult}\",
                    \"duration\": \"${currentBuild.duration}\"
                }"
            '''
        }
        
        failure {
            sh """
                echo 'jenkins_deployment_total{job="${env.JOB_NAME}",status="failure"} 1' | \
                curl -X POST --data-binary @- http://pushgateway:9091/metrics/job/jenkins
            """
        }
    }
}
```

### üìä –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ Prometheus:
```bash
kubectl port-forward svc/prometheus-server 9090:80 -n monitoring
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ ArgoCD:
```bash
kubectl logs -f deployment/argocd-application-controller -n argocd
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π:
```bash
kubectl get events --sort-by=.metadata.creationTimestamp -A
```

### üéØ GitHub Actions –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### 1. **Workflow —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏**
```yaml
# .github/workflows/monitored-deploy.yml
name: Monitored Deployment

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Record deployment start
      run: |
        curl -X POST "${{ secrets.WEBHOOK_URL }}/deployment/start" \
          -H "Content-Type: application/json" \
          -d '{
            "repository": "${{ github.repository }}",
            "commit": "${{ github.sha }}",
            "workflow": "${{ github.workflow }}",
            "run_id": "${{ github.run_id }}",
            "timestamp": "'$(date -Iseconds)'"
          }'
    
    - name: Build and test
      id: build
      run: |
        start_time=$(date +%s)
        
        npm ci
        npm run build
        npm test
        
        end_time=$(date +%s)
        duration=$((end_time - start_time))
        
        echo "duration=$duration" >> $GITHUB_OUTPUT
    
    - name: Deploy to Kubernetes
      id: deploy
      run: |
        start_time=$(date +%s)
        
        kubectl apply -f k8s/
        kubectl rollout status deployment/myapp --timeout=300s
        
        end_time=$(date +%s)
        duration=$((end_time - start_time))
        
        echo "duration=$duration" >> $GITHUB_OUTPUT
    
    - name: Record deployment success
      if: success()
      run: |
        curl -X POST "${{ secrets.WEBHOOK_URL }}/deployment/success" \
          -H "Content-Type: application/json" \
          -d '{
            "repository": "${{ github.repository }}",
            "commit": "${{ github.sha }}",
            "workflow": "${{ github.workflow }}",
            "run_id": "${{ github.run_id }}",
            "build_duration": "${{ steps.build.outputs.duration }}",
            "deploy_duration": "${{ steps.deploy.outputs.duration }}",
            "timestamp": "'$(date -Iseconds)'"
          }'
    
    - name: Record deployment failure
      if: failure()
      run: |
        curl -X POST "${{ secrets.WEBHOOK_URL }}/deployment/failure" \
          -H "Content-Type: application/json" \
          -d '{
            "repository": "${{ github.repository }}",
            "commit": "${{ github.sha }}",
            "workflow": "${{ github.workflow }}",
            "run_id": "${{ github.run_id }}",
            "error": "Deployment failed",
            "timestamp": "'$(date -Iseconds)'"
          }'
```

#### 2. **Webhook —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫**
```javascript
// webhook-server.js
const express = require('express');
const prometheus = require('prom-client');

const app = express();
app.use(express.json());

// Prometheus –º–µ—Ç—Ä–∏–∫–∏
const deploymentCounter = new prometheus.Counter({
  name: 'github_deployments_total',
  help: 'Total number of deployments',
  labelNames: ['repository', 'status']
});

const deploymentDuration = new prometheus.Histogram({
  name: 'github_deployment_duration_seconds',
  help: 'Deployment duration in seconds',
  labelNames: ['repository', 'stage'],
  buckets: [1, 5, 10, 30, 60, 120, 300, 600]
});

// Webhook endpoints
app.post('/deployment/start', (req, res) => {
  console.log('Deployment started:', req.body);
  res.status(200).send('OK');
});

app.post('/deployment/success', (req, res) => {
  const { repository, build_duration, deploy_duration } = req.body;
  
  deploymentCounter.inc({ repository, status: 'success' });
  deploymentDuration.observe({ repository, stage: 'build' }, parseInt(build_duration));
  deploymentDuration.observe({ repository, stage: 'deploy' }, parseInt(deploy_duration));
  
  console.log('Deployment succeeded:', req.body);
  res.status(200).send('OK');
});

app.post('/deployment/failure', (req, res) => {
  const { repository } = req.body;
  
  deploymentCounter.inc({ repository, status: 'failure' });
  
  console.log('Deployment failed:', req.body);
  res.status(200).send('OK');
});

// Prometheus metrics endpoint
app.get('/metrics', (req, res) => {
  res.set('Content-Type', prometheus.register.contentType);
  res.end(prometheus.register.metrics());
});

app.listen(3000, () => {
  console.log('Webhook server listening on port 3000');
});
```

### üìà Grafana Dashboards

#### 1. **CI/CD Pipeline Dashboard**
```json
{
  "dashboard": {
    "title": "CI/CD Pipeline Metrics",
    "panels": [
      {
        "title": "Deployment Frequency",
        "type": "stat",
        "targets": [
          {
            "expr": "increase(github_deployments_total{status=\"success\"}[24h])"
          }
        ]
      },
      {
        "title": "Pipeline Success Rate",
        "type": "stat",
        "targets": [
          {
            "expr": "rate(github_deployments_total{status=\"success\"}[24h]) / rate(github_deployments_total[24h]) * 100"
          }
        ]
      },
      {
        "title": "Build Duration",
        "type": "graph",
        "targets": [
          {
            "expr": "github_deployment_duration_seconds{stage=\"build\"}"
          }
        ]
      },
      {
        "title": "Deploy Duration",
        "type": "graph",
        "targets": [
          {
            "expr": "github_deployment_duration_seconds{stage=\"deploy\"}"
          }
        ]
      },
      {
        "title": "Lead Time",
        "type": "graph",
        "targets": [
          {
            "expr": "github_deployment_duration_seconds{stage=\"build\"} + github_deployment_duration_seconds{stage=\"deploy\"}"
          }
        ]
      }
    ]
  }
}
```

#### 2. **DORA Metrics Dashboard**
```json
{
  "dashboard": {
    "title": "DORA Metrics",
    "panels": [
      {
        "title": "Deployment Frequency",
        "description": "How often deployments occur",
        "type": "stat",
        "targets": [
          {
            "expr": "increase(github_deployments_total{status=\"success\"}[7d]) / 7"
          }
        ]
      },
      {
        "title": "Lead Time for Changes",
        "description": "Time from commit to production",
        "type": "stat",
        "targets": [
          {
            "expr": "avg(github_deployment_duration_seconds)"
          }
        ]
      },
      {
        "title": "Change Failure Rate",
        "description": "Percentage of deployments causing failures",
        "type": "stat",
        "targets": [
          {
            "expr": "rate(github_deployments_total{status=\"failure\"}[7d]) / rate(github_deployments_total[7d]) * 100"
          }
        ]
      },
      {
        "title": "Mean Time to Recovery",
        "description": "Time to recover from failures",
        "type": "stat",
        "targets": [
          {
            "expr": "avg(time() - github_deployment_failure_timestamp)"
          }
        ]
      }
    ]
  }
}
```

### üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ CI/CD

#### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```yaml
# fluentd-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: fluentd-config
data:
  fluent.conf: |
    <source>
      @type tail
      path /var/log/containers/*jenkins*.log
      pos_file /var/log/fluentd-jenkins.log.pos
      tag jenkins.*
      format json
      time_key timestamp
      time_format %Y-%m-%dT%H:%M:%S.%NZ
    </source>
    
    <filter jenkins.**>
      @type parser
      key_name log
      reserve_data true
      <parse>
        @type json
      </parse>
    </filter>
    
    <match jenkins.**>
      @type elasticsearch
      host elasticsearch.logging.svc.cluster.local
      port 9200
      index_name jenkins-logs
      type_name _doc
      include_tag_key true
      tag_key @log_name
      flush_interval 1s
    </match>
```

#### 2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**
```javascript
// logger.js –¥–ª—è CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  defaultMeta: {
    service: 'ci-cd-pipeline',
    version: process.env.BUILD_NUMBER || 'unknown'
  },
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' }),
    new winston.transports.Console({
      format: winston.format.simple()
    })
  ]
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI/CD —Å–∫—Ä–∏–ø—Ç–∞—Ö
logger.info('Deployment started', {
  repository: process.env.GITHUB_REPOSITORY,
  commit: process.env.GITHUB_SHA,
  workflow: process.env.GITHUB_WORKFLOW
});

logger.error('Deployment failed', {
  error: error.message,
  stack: error.stack,
  stage: 'kubernetes-deploy'
});
```

### üö® –ê–ª–µ—Ä—Ç–∏–Ω–≥ –¥–ª—è CI/CD

#### 1. **Prometheus Rules**
```yaml
# ci-cd-alerts.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: ci-cd-alerts
spec:
  groups:
  - name: ci-cd
    rules:
    - alert: HighDeploymentFailureRate
      expr: |
        (
          rate(github_deployments_total{status="failure"}[1h]) /
          rate(github_deployments_total[1h])
        ) > 0.1
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "High deployment failure rate"
        description: "Deployment failure rate is {{ $value | humanizePercentage }}"
    
    - alert: LongBuildTime
      expr: github_deployment_duration_seconds{stage="build"} > 600
      for: 2m
      labels:
        severity: warning
      annotations:
        summary: "Build taking too long"
        description: "Build duration is {{ $value }}s"
    
    - alert: DeploymentStuck
      expr: |
        time() - max(github_deployment_start_timestamp) > 1800
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "Deployment appears to be stuck"
        description: "No deployment activity for 30 minutes"
```

#### 2. **Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
```bash
#!/bin/bash
# notify-slack.sh

SLACK_WEBHOOK_URL="$1"
MESSAGE="$2"
STATUS="$3"

case $STATUS in
  "success")
    COLOR="good"
    EMOJI=":white_check_mark:"
    ;;
  "failure")
    COLOR="danger"
    EMOJI=":x:"
    ;;
  *)
    COLOR="warning"
    EMOJI=":warning:"
    ;;
esac

curl -X POST -H 'Content-type: application/json' \
  --data "{
    \"attachments\": [
      {
        \"color\": \"$COLOR\",
        \"text\": \"$EMOJI $MESSAGE\",
        \"fields\": [
          {
            \"title\": \"Repository\",
            \"value\": \"$GITHUB_REPOSITORY\",
            \"short\": true
          },
          {
            \"title\": \"Commit\",
            \"value\": \"$GITHUB_SHA\",
            \"short\": true
          },
          {
            \"title\": \"Workflow\",
            \"value\": \"$GITHUB_WORKFLOW\",
            \"short\": true
          }
        ]
      }
    ]
  }" \
  $SLACK_WEBHOOK_URL
```

### üìã –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CI/CD

#### 1. **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ DORA –º–µ—Ç—Ä–∏–∫–∏** (Deployment Frequency, Lead Time, MTTR, Change Failure Rate)
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ª—É—á—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **–°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–Ω–¥–æ–≤
- ‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–æ–≤

#### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
```bash
#!/bin/bash
# setup-monitoring.sh

echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CI/CD..."

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm install prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --create-namespace

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana dashboards
kubectl apply -f ci-cd-dashboards.yaml

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
kubectl apply -f ci-cd-alerts.yaml

echo "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
```

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å, –±—ã—Å—Ç—Ä—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–±–ª–µ–º –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏.
