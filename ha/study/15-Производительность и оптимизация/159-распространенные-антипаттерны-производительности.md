# 160. ĞšĞ°ĞºĞ¸Ğµ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸?

## ğŸ¯ **Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸?**

**ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ² Kubernetes** â€” ÑÑ‚Ğ¾ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸, Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ²Ğ¾Ğ´ÑÑ‚ Ğº ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸, Ğ½ĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¸ Ğ½ĞµÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¼Ñƒ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°.

## ğŸ—ï¸ **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**

### **1. Ğ ĞµÑÑƒÑ€ÑĞ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹**
- ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ resource requests/limits
- ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ CPU/Memory
- Over-provisioning Ğ¸ under-provisioning
- Ğ˜Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ QoS ĞºĞ»Ğ°ÑÑĞ¾Ğ²

### **2. Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹**
- ĞĞµĞ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Service Ñ‚Ğ¸Ğ¿Ñ‹
- Ğ˜Ğ·Ğ±Ñ‹Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ network hops
- ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° DNS
- ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ connection pooling

### **3. Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹**
- ĞĞµĞ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ Storage Classes
- Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ I/O Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
- ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- ĞĞµĞ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### **4. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹**
- ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
- Shared state Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ´Ğ°Ğ¼Ğ¸
- ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ConfigMaps
- ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ health checks

## ğŸ“Š **ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸Ğ· Ğ²Ğ°ÑˆĞµĞ³Ğ¾ HA ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°:**

### **1. Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ñ€ĞµÑÑƒÑ€ÑĞ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**
```bash
# ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ´Ğ¾Ğ² Ğ±ĞµĞ· resource requests
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.requests == null) | "\(.metadata.namespace)/\(.metadata.name)"'

# ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ´Ğ¾Ğ² Ğ±ĞµĞ· resource limits
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.limits == null) | "\(.metadata.namespace)/\(.metadata.name)"'

# ĞĞ½Ğ°Ğ»Ğ¸Ğ· QoS ĞºĞ»Ğ°ÑÑĞ¾Ğ²
kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,QOS:.status.qosClass | grep BestEffort

# ĞŸĞ¾Ğ¸ÑĞº over-provisioned Ğ¿Ğ¾Ğ´Ğ¾Ğ²
kubectl top pods --all-namespaces --sort-by=cpu | head -10
```

### **2. Ğ’Ñ‹ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**
```bash
# ĞĞ½Ğ°Ğ»Ğ¸Ğ· Service Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
kubectl get svc --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° DNS ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
kubectl get pods -n kube-system -l k8s-app=kube-dns
kubectl describe configmap coredns -n kube-system

# ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ingress ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
kubectl get ingress --all-namespaces -o yaml | grep -A 5 -B 5 "nginx.ingress.kubernetes.io"
```

### **3. ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ°:**
```bash
# ĞĞ½Ğ°Ğ»Ğ¸Ğ· Storage Classes
kubectl get storageclass -o custom-columns=NAME:.metadata.name,PROVISIONER:.provisioner,RECLAIM:.reclaimPolicy,BINDING:.volumeBindingMode

# ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ´Ğ¾Ğ² Ñ Ğ½ĞµĞ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ volume mount
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.volumes[]?.hostPath) | "\(.metadata.namespace)/\(.metadata.name)"'

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° PVC Ğ±ĞµĞ· ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ Storage Class
kubectl get pvc --all-namespaces -o json | jq -r '.items[] | select(.spec.storageClassName == null) | "\(.metadata.namespace)/\(.metadata.name)"'
```

## ğŸ”„ **Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**

### **1. Ğ ĞµÑÑƒÑ€ÑĞ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ Ğ¸Ñ… Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:**
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ resource-antipatterns-fix.sh
cat << 'EOF' > resource-antipatterns-fix.sh
#!/bin/bash

echo "ğŸš¨ Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²"
echo "===================================="

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 1: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ resource requests/limits
echo "âŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 1: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ resource requests/limits"
cat << 'BAD_EXAMPLE_EOF'
# ĞŸĞ›ĞĞ¥Ğ: Ğ‘ĞµĞ· resource requests/limits
apiVersion: v1
kind: Pod
metadata:
  name: bad-resource-example
spec:
  containers:
  - name: app
    image: nginx
    # ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ resources - BestEffort QoS
BAD_EXAMPLE_EOF

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²"
cat << 'GOOD_EXAMPLE_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: good-resource-example
  labels:
    antipattern-fix: resources
spec:
  containers:
  - name: app
    image: nginx
    resources:
      requests:
        cpu: 100m        # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ½Ğ¾ÑÑ‚Ğ¸
        memory: 128Mi
      limits:
        cpu: 500m        # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
        memory: 512Mi    # Guaranteed QoS Ğ¿Ñ€Ğ¸ requests = limits
    livenessProbe:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 30
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 5
      periodSeconds: 5
  restartPolicy: Always
GOOD_EXAMPLE_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 2: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ CPU/Memory
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 2: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ CPU/Memory"
echo "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: CPU 2000m Ñ Memory 64Mi - Ğ½ĞµÑĞ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: Ğ¡Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹"
cat << 'BALANCED_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: balanced-resources-app
  labels:
    antipattern-fix: balanced
spec:
  replicas: 2
  selector:
    matchLabels:
      app: balanced-app
  template:
    metadata:
      labels:
        app: balanced-app
    spec:
      containers:
      - name: web
        image: nginx:1.21
        resources:
          requests:
            cpu: 200m      # Ğ¡Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ
            memory: 256Mi  # CPU:Memory = 1:1.28 (Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ web)
          limits:
            cpu: 500m
            memory: 512Mi
        ports:
        - containerPort: 80
      - name: sidecar
        image: busybox
        resources:
          requests:
            cpu: 50m       # ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ´Ğ»Ñ sidecar
            memory: 64Mi
          limits:
            cpu: 100m
            memory: 128Mi
        command: ["/bin/sh"]
        args: ["-c", "while true; do echo 'Sidecar running'; sleep 60; done"]
BALANCED_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 3: Over-provisioning
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 3: Over-provisioning Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²"
echo "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ 4 CPU Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ web ÑĞµÑ€Ğ²ĞµÑ€Ğ°"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²"
cat << 'RIGHTSIZED_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: rightsized-app
  labels:
    antipattern-fix: rightsized
spec:
  replicas: 3
  selector:
    matchLabels:
      app: rightsized
  template:
    metadata:
      labels:
        app: rightsized
    spec:
      containers:
      - name: app
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m      # Ğ ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ½Ğ¾ÑÑ‚Ğ¸
            memory: 128Mi  # ĞÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸
          limits:
            cpu: 200m      # Ğ Ğ°Ğ·ÑƒĞ¼Ğ½Ñ‹Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
            memory: 256Mi
        env:
        - name: NGINX_WORKER_PROCESSES
          value: "1"       # ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
        - name: NGINX_WORKER_CONNECTIONS
          value: "1024"
RIGHTSIZED_EOF

echo -e "\nğŸ“Š ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²:"
kubectl get pods -l antipattern-fix --show-labels
kubectl describe pod good-resource-example | grep -A 10 "QoS Class"

echo "âœ… Ğ ĞµÑÑƒÑ€ÑĞ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹"
EOF

chmod +x resource-antipatterns-fix.sh
```

### **2. Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ Ğ¸Ñ… Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:**
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ network-antipatterns-fix.sh
cat << 'EOF' > network-antipatterns-fix.sh
#!/bin/bash

echo "ğŸŒ Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²"
echo "=================================="

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 1: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Service Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
echo "âŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 1: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ NodePort Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ ÑĞ²ÑĞ·Ğ¸"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Service Ñ‚Ğ¸Ğ¿Ñ‹"
cat << 'SERVICE_EOF' | kubectl apply -f -
# ClusterIP Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ ÑĞ²ÑĞ·Ğ¸
apiVersion: v1
kind: Service
metadata:
  name: internal-service
  labels:
    antipattern-fix: service-types
spec:
  type: ClusterIP              # ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ ÑĞ²ÑĞ·Ğ¸
  selector:
    app: balanced-app
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  sessionAffinity: None        # Ğ›ÑƒÑ‡ÑˆĞµĞµ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
---
# LoadBalancer Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
apiVersion: v1
kind: Service
metadata:
  name: external-service
  labels:
    antipattern-fix: service-types
spec:
  type: LoadBalancer           # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°
  selector:
    app: balanced-app
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  loadBalancerSourceRanges:    # ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
  - 0.0.0.0/0
SERVICE_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 2: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ connection pooling
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 2: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ connection pooling Ğ² Ingress"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ingress Ñ connection pooling"
cat << 'INGRESS_EOF' | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: optimized-ingress
  labels:
    antipattern-fix: ingress-optimization
  annotations:
    kubernetes.io/ingress.class: "nginx"
    # Connection pooling Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    nginx.ingress.kubernetes.io/upstream-keepalive-connections: "100"
    nginx.ingress.kubernetes.io/upstream-keepalive-requests: "1000"
    nginx.ingress.kubernetes.io/upstream-keepalive-timeout: "60"
    # Compression
    nginx.ingress.kubernetes.io/enable-gzip: "true"
    nginx.ingress.kubernetes.io/gzip-level: "6"
    # Caching
    nginx.ingress.kubernetes.io/proxy-cache-valid: "200 302 10m"
    nginx.ingress.kubernetes.io/proxy-cache-valid: "404 1m"
    # Timeouts
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "5"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
spec:
  rules:
  - host: optimized-app.hashfoundry.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: internal-service
            port:
              number: 80
INGRESS_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 3: ĞĞµĞ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ DNS ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 3: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… DNS Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ DNS Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
cat << 'DNS_OPTIMIZED_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: dns-optimized-client
  labels:
    antipattern-fix: dns-optimization
spec:
  containers:
  - name: client
    image: busybox
    command: ["/bin/sh"]
    args:
    - -c
    - |
      echo "Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ DNS Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:"
      
      # ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğ³Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ namespace
      echo "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑĞµÑ€Ğ²Ğ¸ÑÑƒ Ğ² Ñ‚Ğ¾Ğ¼ Ğ¶Ğµ namespace:"
      nslookup internal-service
      
      # ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ: ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¸Ğ¼Ñ Ğ´Ğ»Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… namespace
      echo "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑĞµÑ€Ğ²Ğ¸ÑÑƒ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼ namespace:"
      nslookup prometheus-server.monitoring.svc.cluster.local
      
      # ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ: ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ DNS Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
      echo "Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ DNS ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:"
      for i in {1..5}; do
        time nslookup internal-service
      done
      
      # ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ°
      while true; do sleep 3600; done
    # DNS Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    dnsPolicy: ClusterFirst
    dnsConfig:
      options:
      - name: ndots
        value: "2"                    # Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞµĞ½Ğ¸Ğµ DNS Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
      - name: timeout
        value: "2"                    # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ timeout
      - name: attempts
        value: "2"                    # ĞœĞµĞ½ÑŒÑˆĞµ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
  restartPolicy: Always
DNS_OPTIMIZED_EOF

echo -e "\nğŸ“Š ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹:"
kubectl get svc -l antipattern-fix=service-types
kubectl get ingress -l antipattern-fix=ingress-optimization
kubectl describe ingress optimized-ingress | grep -A 5 "Annotations"

echo "âœ… Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹"
EOF

chmod +x network-antipatterns-fix.sh
```

### **3. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ Ğ¸Ñ… Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:**
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ architecture-antipatterns-fix.sh
cat << 'EOF' > architecture-antipatterns-fix.sh
#!/bin/bash

echo "ğŸ—ï¸ Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²"
echo "========================================"

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 1: ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
echo "âŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 1: ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ñ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°"
cat << 'MICROSERVICE_EOF' | kubectl apply -f -
# Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-service
  labels:
    antipattern-fix: microservices
    component: web
spec:
  replicas: 2
  selector:
    matchLabels:
      app: web-service
  template:
    metadata:
      labels:
        app: web-service
        component: web
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        ports:
        - containerPort: 80
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 30
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-service
  labels:
    antipattern-fix: microservices
    component: api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: api-service
  template:
    metadata:
      labels:
        app: api-service
        component: api
    spec:
      containers:
      - name: api
        image: busybox
        resources:
          requests:
            cpu: 150m
            memory: 256Mi
          limits:
            cpu: 300m
            memory: 512Mi
        command: ["/bin/sh"]
        args:
        - -c
        - |
          # Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ API ÑĞµÑ€Ğ²Ğ¸ÑĞ°
          while true; do
            echo "API service running on $(hostname)"
            sleep 30
          done
        livenessProbe:
          exec:
            command:
            - /bin/sh
            - -c
            - "ps aux | grep -v grep | grep -q sh"
          initialDelaySeconds: 10
        readinessProbe:
          exec:
            command:
            - /bin/sh
            - -c
            - "echo 'ready'"
          initialDelaySeconds: 5
MICROSERVICE_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 2: Shared state Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ´Ğ°Ğ¼Ğ¸
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 2: Shared state Ñ‡ĞµÑ€ĞµĞ· Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: Stateless Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼ state"
cat << 'STATELESS_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: stateless-app
  labels:
    antipattern-fix: stateless
spec:
  replicas: 3
  selector:
    matchLabels:
      app: stateless-app
  template:
    metadata:
      labels:
        app: stateless-app
    spec:
      containers:
      - name: app
        image: busybox
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        env:
        # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: app-secrets
              key: database-url
              optional: true
        - name: CACHE_URL
          value: "redis://redis-service:6379"
        - name: APP_MODE
          valueFrom:
            configMapKeyRef:
              name: app-config
              key: mode
              optional: true
        command: ["/bin/sh"]
        args:
        - -c
        - |
          echo "Stateless application starting..."
          echo "Database URL: ${DATABASE_URL:-not-configured}"
          echo "Cache URL: $CACHE_URL"
          echo "App Mode: ${APP_MODE:-production}"
          
          # Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ stateless Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
          while true; do
            echo "Processing request $(date) on $(hostname)"
            sleep 10
          done
        # ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ persistent volumes - stateless
        volumeMounts: []
---
# ConfigMap Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  labels:
    antipattern-fix: stateless
data:
  mode: "production"
  log-level: "info"
  workers: "4"
STATELESS_EOF

# ĞĞ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ 3: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ health checks
echo -e "\nâŒ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 3: ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ health checks"

echo -e "\nâœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: Comprehensive health checks"
cat << 'HEALTH_CHECKS_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: health-aware-app
  labels:
    antipattern-fix: health-checks
spec:
  replicas: 2
  selector:
    matchLabels:
      app: health-aware-app
  template:
    metadata:
      labels:
        app: health-aware-app
    spec:
      containers:
      - name: app
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        ports:
        - containerPort: 80
          name: http
        # Startup probe - Ğ´Ğ»Ñ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚ÑƒÑÑ‰Ğ¸Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹
        startupProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 10
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 6
        # Liveness probe - Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ²Ğ¸ÑÑˆĞ¸Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹
        livenessProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
          successThreshold: 1
        # Readiness probe - Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ¼
        readinessProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 2
          successThreshold: 1
        # Graceful shutdown
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - "nginx -s quit; while killall -0 nginx; do sleep 1; done"
      # Graceful termination
      terminationGracePeriodSeconds: 30
HEALTH_CHECKS_EOF

echo -e "\nğŸ“Š ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğ¹:"
kubectl get deployments -l antipattern-fix
kubectl describe deployment health-aware-app | grep -A 15 "Liveness\|Readiness\|Startup"

echo "âœ… ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹"
EOF

chmod +x architecture-antipatterns-fix.sh
```

## ğŸ”§ **Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**

### **1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ antipattern-analyzer.sh
cat << 'EOF' > antipattern-analyzer.sh
#!/bin/bash

echo "ğŸ” ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸"
echo "=================================================="

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ñ€ĞµÑÑƒÑ€ÑĞ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
analyze_resource_antipatterns() {
    echo "ğŸ’¾ ĞĞĞĞ›Ğ˜Ğ— Ğ Ğ•Ğ¡Ğ£Ğ Ğ¡ĞĞ«Ğ¥ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’:"
    
    # ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· resource requests
    no_requests=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.requests == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âŒ ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· resource requests: $no_requests"
    
    # ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· resource limits
    no_limits=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.limits == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âŒ ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· resource limits: $no_limits"
    
    # BestEffort Ğ¿Ğ¾Ğ´Ñ‹
    besteffort_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.status.qosClass == "BestEffort") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âš ï¸ BestEffort Ğ¿Ğ¾Ğ´Ñ‹: $besteffort_count"
    
    # Over-provisioned Ğ¿Ğ¾Ğ´Ñ‹ (Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğµ requests, Ğ½Ğ¸Ğ·ĞºĞ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
    echo -e "\nğŸ”¥ Ğ¢Ğ¾Ğ¿ Ğ¿Ğ¾Ğ´Ğ¾Ğ² Ğ¿Ğ¾ CPU requests (Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ over-provisioned):"
    kubectl get pods --all-namespaces -o json | \
    jq -r '.items[] | select(.spec.containers[].resources.requests.cpu != null) | "\(.metadata.namespace)/\(.metadata.name): \(.spec.containers[0].resources.requests.cpu)"' | \
    sort -k2 -nr | head -5
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
analyze_network_antipatterns() {
    echo -e "\nğŸŒ ĞĞĞĞ›Ğ˜Ğ— Ğ¡Ğ•Ğ¢Ğ•Ğ’Ğ«Ğ¥ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’:"
    
    # NodePort ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
    nodeport_count=$(kubectl get svc --all-namespaces -o json | jq -r '.items[] | select(.spec.type == "NodePort") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âš ï¸ NodePort ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: $nodeport_count"
    
    # LoadBalancer ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¸Ğµ)
    lb_count=$(kubectl get svc --all-namespaces -o json | jq -r '.items[] | select(.spec.type == "LoadBalancer") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "ğŸ’° LoadBalancer ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: $lb_count"
    
    # Ingress Ğ±ĞµĞ· Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹
    echo -e "\nğŸ“Š Ingress Ğ±ĞµĞ· connection pooling Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹:"
    kubectl get ingress --all-namespaces -o json | \
    jq -r '.items[] | select(.metadata.annotations."nginx.ingress.kubernetes.io/upstream-keepalive-connections" == null) | "\(.metadata.namespace)/\(.metadata.name)"' | \
    head -5
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ°
analyze_storage_antipatterns() {
    echo -e "\nğŸ’¾ ĞĞĞĞ›Ğ˜Ğ— ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’ Ğ¥Ğ ĞĞĞ˜Ğ›Ğ˜Ğ©Ğ:"
    
    # PVC Ğ±ĞµĞ· ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ Storage Class
    no_sc_count=$(kubectl get pvc --all-namespaces -o json | jq -r '.items[] | select(.spec.storageClassName == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âš ï¸ PVC Ğ±ĞµĞ· Storage Class: $no_sc_count"
    
    # hostPath volumes (Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğµ)
    hostpath_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.volumes[]?.hostPath != null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âŒ ĞŸĞ¾Ğ´Ñ‹ Ñ hostPath volumes: $hostpath_count"
    
    # emptyDir Ğ±ĞµĞ· sizeLimit
    echo -e "\nğŸ“Š emptyDir volumes Ğ±ĞµĞ· size limits:"
    kubectl get pods --all-namespaces -o json | \
    jq -r '.items[] | select(.spec.volumes[]?.emptyDir != null and .spec.volumes[]?.emptyDir.sizeLimit == null) | "\(.metadata.namespace)/\(.metadata.name)"' | \
    head -5
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
analyze_architecture_antipatterns() {
    echo -e "\nğŸ—ï¸ ĞĞĞĞ›Ğ˜Ğ— ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ ĞĞ«Ğ¥ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’:"
    
    # ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· health checks
    no_health_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].livenessProbe == null and .spec.containers[].readinessProbe == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âŒ ĞŸĞ¾Ğ´Ñ‹ Ğ±ĞµĞ· health checks: $no_health_count"
    
    # Deployments Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¾Ğ¹ (SPOF)
    single_replica=$(kubectl get deployments --all-namespaces -o json | jq -r '.items[] | select(.spec.replicas == 1) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "âš ï¸ Deployments Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¾Ğ¹: $single_replica"
    
    # ĞŸĞ¾Ğ´Ñ‹ Ñ privileged ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ğ¼Ğ¸
    privileged_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].securityContext.privileged == true) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "ğŸ”’ Privileged Ğ¿Ğ¾Ğ´Ñ‹: $privileged_count"
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹
generate_recommendations() {
    echo -e "\nğŸ’¡ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”ĞĞ¦Ğ˜Ğ˜ ĞŸĞ Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ®:"
    
    echo "1. ğŸ“Š Ğ ĞµÑÑƒÑ€ÑÑ‹:"
    echo "   - Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ resource requests/limits Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²"
    echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Guaranteed QoS Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹"
    echo "   - ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²"
    echo "   - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ VPA Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸"
    
    echo -e "\n2. ğŸŒ Ğ¡ĞµÑ‚ÑŒ:"
    echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ClusterIP Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ ÑĞ²ÑĞ·Ğ¸"
    echo "   - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ connection pooling Ğ² Ingress"
    echo "   - ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ DNS ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ"
    echo "   - ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞ¹Ñ‚Ğµ Network Policies Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸"
    
    echo -e "\n3. ğŸ’¾ Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ:"
    echo "   - Ğ’ÑĞµĞ³Ğ´Ğ° ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Storage Class"
    echo "   - Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ hostPath volumes"
    echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹"
    echo "   - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ size limits Ğ´Ğ»Ñ emptyDir"
    
    echo -e "\n4. ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:"
    echo "   - Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ health checks Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²"
    echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½ÑƒÑ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ"
    echo "   - Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ shared state Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ´Ğ°Ğ¼Ğ¸"
    echo "   - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ graceful shutdown"
    
    echo -e "\n5. ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:"
    echo "   - Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ privileged ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²"
    echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ non-root Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"
    echo "   - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Pod Security Standards"
    echo "   - ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ least privilege"
}

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²
echo "ğŸš€ Ğ—ĞĞŸĞ£Ğ¡Ğš ĞšĞĞœĞŸĞ›Ğ•ĞšĞ¡ĞĞĞ“Ğ ĞĞĞĞ›Ğ˜Ğ—Ğ ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’:"
echo "============================================"

analyze_resource_antipatterns
analyze_network_antipatterns
analyze_storage_antipatterns
analyze_architecture_antipatterns
generate_recommendations

echo -e "\nğŸ“ˆ Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜:"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
echo "Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²:"
kubectl top nodes 2>/dev/null || echo "Metrics server Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½"
kubectl top pods --all-namespaces --sort-by=cpu 2>/dev/null | head -5 || echo "Pod metrics Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸
echo -e "\nĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸:"
kubectl get events --all-namespaces --field-selector type=Warning --sort-by=.metadata.creationTimestamp | tail -5

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° failed Ğ¿Ğ¾Ğ´Ğ¾Ğ²
echo -e "\nFailed Ğ¿Ğ¾Ğ´Ñ‹:"
kubectl get pods --all-namespaces --field-selector status.phase=Failed

echo -e "\nâœ… ĞĞĞĞ›Ğ˜Ğ— ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•Ğ!"
echo "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑƒÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼:"
echo "- ./resource-antipatterns-fix.sh"
echo "- ./network-antipatterns-fix.sh" 
echo "- ./architecture-antipatterns-fix.sh"
EOF

chmod +x antipattern-analyzer.sh
```

### **2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:**
```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ fix-all-antipatterns.sh
cat << 'EOF' > fix-all-antipatterns.sh
#!/bin/bash

echo "ğŸ”§ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²"
echo "=============================================="

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ² Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
scripts=("resource-antipatterns-fix.sh" "network-antipatterns-fix.sh" "architecture-antipatterns-fix.sh")
missing_scripts=()

for script in "${scripts[@]}"; do
    if [[ ! -f "$script" ]]; then
        missing_scripts+=("$script")
    fi
done

if [[ ${#missing_scripts[@]} -gt 0 ]]; then
    echo "âŒ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
    printf '%s\n' "${missing_scripts[@]}"
    echo "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ñ… ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ°, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸Ğ· ÑÑ‚Ğ°Ñ‚ÑŒĞ¸"
    exit 1
fi

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ¿ĞµÑ€ĞµĞ´ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼
echo "ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¿ĞµÑ€ĞµĞ´ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼:"
if [[ -f "antipattern-analyzer.sh" ]]; then
    ./antipattern-analyzer.sh > antipatterns-before.log 2>&1
    echo "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ² antipatterns-before.log"
else
    echo "âš ï¸ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½"
fi

# Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
echo -e "\nğŸ”§ 1. Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:"
./resource-antipatterns-fix.sh

# Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
echo -e "\nğŸ”§ 2. Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:"
./network-antipatterns-fix.sh

# Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
echo -e "\nğŸ”§ 3. Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:"
./architecture-antipatterns-fix.sh

# ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
echo -e "\nâ³ ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹..."
sleep 30

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
echo -e "\nğŸ“Š ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
kubectl get pods -l antipattern-fix --show-labels
kubectl get svc -l antipattern-fix
kubectl get deployments -l antipattern-fix

# ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ğ¾ÑĞ»Ğµ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
echo -e "\nğŸ“ˆ ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¿Ğ¾ÑĞ»Ğµ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
if [[ -f "antipattern-analyzer.sh" ]]; then
    ./antipattern-analyzer.sh > antipatterns-after.log 2>&1
    echo "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ² antipatterns-after.log"
    
    # Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
    echo -e "\nğŸ“Š Ğ¡Ğ ĞĞ’ĞĞ•ĞĞ˜Ğ• Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢ĞĞ’:"
    echo "Ğ”Ğ¾ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
    grep -E "(âŒ|âš ï¸)" antipatterns-before.log | head -10
    echo -e "\nĞŸĞ¾ÑĞ»Ğµ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:"
    grep -E "(âŒ|âš ï¸)" antipatterns-after.log | head -10
else
    echo "âš ï¸ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸"
fi

echo -e "\nâœ… ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ• Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ• ĞĞĞ¢Ğ˜ĞŸĞĞ¢Ğ¢Ğ•Ğ ĞĞĞ’ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ!"
echo "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ antipatterns-before.log Ğ¸ antipatterns-after.log Ğ´Ğ»Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ"
EOF

chmod +x fix-all-antipatterns.sh
```

## ğŸ“Š **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Antipattern Detection & Remediation             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Detection Layer                                            â”‚
â”‚  â”œâ”€â”€ Resource Analysis (CPU/Memory/QoS)                     â”‚
â”‚  â”œâ”€â”€ Network Analysis (Services/Ingress/DNS)               â”‚
â”‚  â”œâ”€â”€ Storage Analysis (PVC/StorageClass/Volumes)           â”‚
â”‚  â””â”€â”€ Architecture Analysis (Health/Replicas/Security)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Remediation Layer                                          â”‚
â”‚  â”œâ”€â”€ Automated Fixes (Resource Requests/Limits)            â”‚
â”‚  â”œâ”€â”€ Configuration Optimization (Services/Ingress)         â”‚
â”‚  â”œâ”€â”€ Architecture Improvements (Health Checks/Replicas)    â”‚
â”‚  â””â”€â”€ Security Hardening (Non-privileged/RBAC)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Validation Layer                                           â”‚
â”‚  â”œâ”€â”€ Before/After Comparison                               â”‚
â”‚  â”œâ”€â”€ Performance Impact Assessment                         â”‚
â”‚  â”œâ”€â”€ Compliance Verification                               â”‚
â”‚  â””â”€â”€ Continuous Monitoring                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ **Ğ¢Ğ¾Ğ¿-10 ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸:**

### **1. ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ resource requests/limits**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: BestEffort QoS, Ğ½ĞµĞ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Guaranteed Ğ¸Ğ»Ğ¸ Burstable QoS Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ğ¼Ğ¸

### **2. Over-provisioning Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: ĞĞµÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ VPA Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### **3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ NodePort Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ ÑĞ²ÑĞ·Ğ¸**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ network hops
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ClusterIP Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### **4. ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ health checks**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Liveness, Readiness Ğ¸ Startup probes

### **5. ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### **6. Shared state Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ´Ğ°Ğ¼Ğ¸**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ stateless Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¾Ğ²
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (Redis, DB)

### **7. ĞĞµĞ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Storage Classes**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: ĞĞ¸Ğ·ĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ I/O
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: SSD Ğ´Ğ¸ÑĞºĞ¸ Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸

### **8. ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ connection pooling**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ latency ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° keepalive Ğ² Ingress

### **9. Single replica deployments**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: Single Point of Failure
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 2 Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ¸ Ñ PodDisruptionBudget

### **10. Privileged ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹**
- **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°**: ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
- **Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Non-root Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¸ Pod Security Standards

## ğŸ” **ĞœĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ Ğ²Ñ‹ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²:**

### **1. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·**
```bash
# Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ°
./antipattern-analyzer.sh

# Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² CI/CD
kubectl apply -f antipattern-detection-cronjob.yaml
```

### **2. ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº**
- ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ QoS Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ
- ĞĞ½Ğ°Ğ»Ğ¸Ğ· resource utilization
- ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ network latency
- ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ storage performance

### **3. Code review Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° YAML Ğ¼Ğ°Ğ½Ğ¸Ñ„ĞµÑÑ‚Ğ¾Ğ²
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ resource specifications
- ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ review
- Security assessment

### **4. Continuous improvement**
- Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ performance audits
- ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ best practices
- ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹

**Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ½Ñ‚Ğ¸Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² â€” ĞºĞ»ÑÑ‡ Ğº Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¼Ñƒ Ğ¸ Ğ½Ğ°Ğ´ĞµĞ¶Ğ½Ğ¾Ğ¼Ñƒ Kubernetes ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ñƒ!**
