# 160. –ö–∞–∫–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?**

**–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ Kubernetes** ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞.

## üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

### **1. –†–µ—Å—É—Ä—Å–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource requests/limits
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ CPU/Memory
- Over-provisioning –∏ under-provisioning
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ QoS –∫–ª–∞—Å—Å–æ–≤

### **2. –°–µ—Ç–µ–≤—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ Service —Ç–∏–ø—ã
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ network hops
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling

### **3. –•—Ä–∞–Ω–∏–ª–∏—â–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ Storage Classes
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ I/O –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã

### **4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- Shared state –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfigMaps
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health checks

## üìä **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ HA –∫–ª–∞—Å—Ç–µ—Ä–∞:**

### **1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
```bash
# –ü–æ–∏—Å–∫ –ø–æ–¥–æ–≤ –±–µ–∑ resource requests
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.requests == null) | "\(.metadata.namespace)/\(.metadata.name)"'

# –ü–æ–∏—Å–∫ –ø–æ–¥–æ–≤ –±–µ–∑ resource limits
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.limits == null) | "\(.metadata.namespace)/\(.metadata.name)"'

# –ê–Ω–∞–ª–∏–∑ QoS –∫–ª–∞—Å—Å–æ–≤
kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,QOS:.status.qosClass | grep BestEffort

# –ü–æ–∏—Å–∫ over-provisioned –ø–æ–¥–æ–≤
kubectl top pods --all-namespaces --sort-by=cpu | head -10
```

### **2. –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
```bash
# –ê–Ω–∞–ª–∏–∑ Service —Ç–∏–ø–æ–≤
kubectl get svc --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
kubectl get pods -n kube-system -l k8s-app=kube-dns
kubectl describe configmap coredns -n kube-system

# –ê–Ω–∞–ª–∏–∑ Ingress –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
kubectl get ingress --all-namespaces -o yaml | grep -A 5 -B 5 "nginx.ingress.kubernetes.io"
```

### **3. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**
```bash
# –ê–Ω–∞–ª–∏–∑ Storage Classes
kubectl get storageclass -o custom-columns=NAME:.metadata.name,PROVISIONER:.provisioner,RECLAIM:.reclaimPolicy,BINDING:.volumeBindingMode

# –ü–æ–∏—Å–∫ –ø–æ–¥–æ–≤ —Å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ volume mount
kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.volumes[]?.hostPath) | "\(.metadata.namespace)/\(.metadata.name)"'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PVC –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è Storage Class
kubectl get pvc --all-namespaces -o json | jq -r '.items[] | select(.spec.storageClassName == null) | "\(.metadata.namespace)/\(.metadata.name)"'
```

## üîÑ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

### **1. –†–µ—Å—É—Ä—Å–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç resource-antipatterns-fix.sh
cat << 'EOF' > resource-antipatterns-fix.sh
#!/bin/bash

echo "üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤"
echo "===================================="

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource requests/limits
echo "‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource requests/limits"
cat << 'BAD_EXAMPLE_EOF'
# –ü–õ–û–•–û: –ë–µ–∑ resource requests/limits
apiVersion: v1
kind: Pod
metadata:
  name: bad-resource-example
spec:
  containers:
  - name: app
    image: nginx
    # –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç resources - BestEffort QoS
BAD_EXAMPLE_EOF

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤"
cat << 'GOOD_EXAMPLE_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: good-resource-example
  labels:
    antipattern-fix: resources
spec:
  containers:
  - name: app
    image: nginx
    resources:
      requests:
        cpu: 100m        # –ë–∞–∑–æ–≤—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
        memory: 128Mi
      limits:
        cpu: 500m        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
        memory: 512Mi    # Guaranteed QoS –ø—Ä–∏ requests = limits
    livenessProbe:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 30
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 5
      periodSeconds: 5
  restartPolicy: Always
GOOD_EXAMPLE_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ CPU/Memory
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ CPU/Memory"
echo "–ü—Ä–∏–º–µ—Ä: CPU 2000m —Å Memory 64Mi - –Ω–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã"
cat << 'BALANCED_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: balanced-resources-app
  labels:
    antipattern-fix: balanced
spec:
  replicas: 2
  selector:
    matchLabels:
      app: balanced-app
  template:
    metadata:
      labels:
        app: balanced-app
    spec:
      containers:
      - name: web
        image: nginx:1.21
        resources:
          requests:
            cpu: 200m      # –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
            memory: 256Mi  # CPU:Memory = 1:1.28 (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è web)
          limits:
            cpu: 500m
            memory: 512Mi
        ports:
        - containerPort: 80
      - name: sidecar
        image: busybox
        resources:
          requests:
            cpu: 50m       # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è sidecar
            memory: 64Mi
          limits:
            cpu: 100m
            memory: 128Mi
        command: ["/bin/sh"]
        args: ["-c", "while true; do echo 'Sidecar running'; sleep 60; done"]
BALANCED_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 3: Over-provisioning
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 3: Over-provisioning —Ä–µ—Å—É—Ä—Å–æ–≤"
echo "–ü—Ä–∏–º–µ—Ä: –ó–∞–ø—Ä–æ—Å 4 CPU –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ web —Å–µ—Ä–≤–µ—Ä–∞"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤"
cat << 'RIGHTSIZED_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: rightsized-app
  labels:
    antipattern-fix: rightsized
spec:
  replicas: 3
  selector:
    matchLabels:
      app: rightsized
  template:
    metadata:
      labels:
        app: rightsized
    spec:
      containers:
      - name: app
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m      # –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
            memory: 128Mi  # –û—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–∏
          limits:
            cpu: 200m      # –†–∞–∑—É–º–Ω—ã–µ –ª–∏–º–∏—Ç—ã
            memory: 256Mi
        env:
        - name: NGINX_WORKER_PROCESSES
          value: "1"       # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        - name: NGINX_WORKER_CONNECTIONS
          value: "1024"
RIGHTSIZED_EOF

echo -e "\nüìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:"
kubectl get pods -l antipattern-fix --show-labels
kubectl describe pod good-resource-example | grep -A 10 "QoS Class"

echo "‚úÖ –†–µ—Å—É—Ä—Å–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
EOF

chmod +x resource-antipatterns-fix.sh
```

### **2. –°–µ—Ç–µ–≤—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç network-antipatterns-fix.sh
cat << 'EOF' > network-antipatterns-fix.sh
#!/bin/bash

echo "üåê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤"
echo "=================================="

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Service —Ç–∏–ø–æ–≤
echo "‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NodePort –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ Service —Ç–∏–ø—ã"
cat << 'SERVICE_EOF' | kubectl apply -f -
# ClusterIP –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏
apiVersion: v1
kind: Service
metadata:
  name: internal-service
  labels:
    antipattern-fix: service-types
spec:
  type: ClusterIP              # –ü—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏
  selector:
    app: balanced-app
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  sessionAffinity: None        # –õ—É—á—à–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
---
# LoadBalancer —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
apiVersion: v1
kind: Service
metadata:
  name: external-service
  labels:
    antipattern-fix: service-types
spec:
  type: LoadBalancer           # –¢–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
  selector:
    app: balanced-app
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  loadBalancerSourceRanges:    # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
  - 0.0.0.0/0
SERVICE_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling –≤ Ingress"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Ingress —Å connection pooling"
cat << 'INGRESS_EOF' | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: optimized-ingress
  labels:
    antipattern-fix: ingress-optimization
  annotations:
    kubernetes.io/ingress.class: "nginx"
    # Connection pooling –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    nginx.ingress.kubernetes.io/upstream-keepalive-connections: "100"
    nginx.ingress.kubernetes.io/upstream-keepalive-requests: "1000"
    nginx.ingress.kubernetes.io/upstream-keepalive-timeout: "60"
    # Compression
    nginx.ingress.kubernetes.io/enable-gzip: "true"
    nginx.ingress.kubernetes.io/gzip-level: "6"
    # Caching
    nginx.ingress.kubernetes.io/proxy-cache-valid: "200 302 10m"
    nginx.ingress.kubernetes.io/proxy-cache-valid: "404 1m"
    # Timeouts
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "5"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
spec:
  rules:
  - host: optimized-app.hashfoundry.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: internal-service
            port:
              number: 80
INGRESS_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 3: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö DNS –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DNS –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
cat << 'DNS_OPTIMIZED_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: dns-optimized-client
  labels:
    antipattern-fix: dns-optimization
spec:
  containers:
  - name: client
    image: busybox
    command: ["/bin/sh"]
    args:
    - -c
    - |
      echo "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ DNS –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:"
      
      # –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∏–º–µ–Ω–∏ –¥–ª—è —Ç–æ–≥–æ –∂–µ namespace
      echo "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–∏—Å—É –≤ —Ç–æ–º –∂–µ namespace:"
      nslookup internal-service
      
      # –ü–†–ê–í–ò–õ–¨–ù–û: –ü–æ–ª–Ω–æ–µ –∏–º—è –¥–ª—è –¥—Ä—É–≥–∏—Ö namespace
      echo "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–∏—Å—É –≤ –¥—Ä—É–≥–æ–º namespace:"
      nslookup prometheus-server.monitoring.svc.cluster.local
      
      # –ü–†–ê–í–ò–õ–¨–ù–û: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DNS —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DNS –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:"
      for i in {1..5}; do
        time nslookup internal-service
      done
      
      # –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–¥–∞
      while true; do sleep 3600; done
    # DNS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    dnsPolicy: ClusterFirst
    dnsConfig:
      options:
      - name: ndots
        value: "2"                    # –£–º–µ–Ω—å—à–µ–Ω–∏–µ DNS –∑–∞–ø—Ä–æ—Å–æ–≤
      - name: timeout
        value: "2"                    # –ë—ã—Å—Ç—Ä—ã–π timeout
      - name: attempts
        value: "2"                    # –ú–µ–Ω—å—à–µ –ø–æ–ø—ã—Ç–æ–∫
  restartPolicy: Always
DNS_OPTIMIZED_EOF

echo -e "\nüìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:"
kubectl get svc -l antipattern-fix=service-types
kubectl get ingress -l antipattern-fix=ingress-optimization
kubectl describe ingress optimized-ingress | grep -A 5 "Annotations"

echo "‚úÖ –°–µ—Ç–µ–≤—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
EOF

chmod +x network-antipatterns-fix.sh
```

### **3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç architecture-antipatterns-fix.sh
cat << 'EOF' > architecture-antipatterns-fix.sh
#!/bin/bash

echo "üèóÔ∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤"
echo "========================================"

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 1: –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
echo "‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 1: –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"
cat << 'MICROSERVICE_EOF' | kubectl apply -f -
# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-service
  labels:
    antipattern-fix: microservices
    component: web
spec:
  replicas: 2
  selector:
    matchLabels:
      app: web-service
  template:
    metadata:
      labels:
        app: web-service
        component: web
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        ports:
        - containerPort: 80
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 30
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-service
  labels:
    antipattern-fix: microservices
    component: api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: api-service
  template:
    metadata:
      labels:
        app: api-service
        component: api
    spec:
      containers:
      - name: api
        image: busybox
        resources:
          requests:
            cpu: 150m
            memory: 256Mi
          limits:
            cpu: 300m
            memory: 512Mi
        command: ["/bin/sh"]
        args:
        - -c
        - |
          # –°–∏–º—É–ª—è—Ü–∏—è API —Å–µ—Ä–≤–∏—Å–∞
          while true; do
            echo "API service running on $(hostname)"
            sleep 30
          done
        livenessProbe:
          exec:
            command:
            - /bin/sh
            - -c
            - "ps aux | grep -v grep | grep -q sh"
          initialDelaySeconds: 10
        readinessProbe:
          exec:
            command:
            - /bin/sh
            - -c
            - "echo 'ready'"
          initialDelaySeconds: 5
MICROSERVICE_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 2: Shared state –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 2: Shared state —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Stateless –¥–∏–∑–∞–π–Ω —Å –≤–Ω–µ—à–Ω–∏–º state"
cat << 'STATELESS_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: stateless-app
  labels:
    antipattern-fix: stateless
spec:
  replicas: 3
  selector:
    matchLabels:
      app: stateless-app
  template:
    metadata:
      labels:
        app: stateless-app
    spec:
      containers:
      - name: app
        image: busybox
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        env:
        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: app-secrets
              key: database-url
              optional: true
        - name: CACHE_URL
          value: "redis://redis-service:6379"
        - name: APP_MODE
          valueFrom:
            configMapKeyRef:
              name: app-config
              key: mode
              optional: true
        command: ["/bin/sh"]
        args:
        - -c
        - |
          echo "Stateless application starting..."
          echo "Database URL: ${DATABASE_URL:-not-configured}"
          echo "Cache URL: $CACHE_URL"
          echo "App Mode: ${APP_MODE:-production}"
          
          # –°–∏–º—É–ª—è—Ü–∏—è stateless –æ–±—Ä–∞–±–æ—Ç–∫–∏
          while true; do
            echo "Processing request $(date) on $(hostname)"
            sleep 10
          done
        # –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ persistent volumes - stateless
        volumeMounts: []
---
# ConfigMap –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  labels:
    antipattern-fix: stateless
data:
  mode: "production"
  log-level: "info"
  workers: "4"
STATELESS_EOF

# –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health checks
echo -e "\n‚ùå –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health checks"

echo -e "\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Comprehensive health checks"
cat << 'HEALTH_CHECKS_EOF' | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: health-aware-app
  labels:
    antipattern-fix: health-checks
spec:
  replicas: 2
  selector:
    matchLabels:
      app: health-aware-app
  template:
    metadata:
      labels:
        app: health-aware-app
    spec:
      containers:
      - name: app
        image: nginx:1.21
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        ports:
        - containerPort: 80
          name: http
        # Startup probe - –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ç–∞—Ä—Ç—É—é—â–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
        startupProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 10
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 6
        # Liveness probe - –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
        livenessProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
          successThreshold: 1
        # Readiness probe - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º
        readinessProbe:
          httpGet:
            path: /
            port: http
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 2
          successThreshold: 1
        # Graceful shutdown
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - "nginx -s quit; while killall -0 nginx; do sleep 1; done"
      # Graceful termination
      terminationGracePeriodSeconds: 30
HEALTH_CHECKS_EOF

echo -e "\nüìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:"
kubectl get deployments -l antipattern-fix
kubectl describe deployment health-aware-app | grep -A 15 "Liveness\|Readiness\|Startup"

echo "‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
EOF

chmod +x architecture-antipatterns-fix.sh
```

## üîß **–°–∫—Ä–∏–ø—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç antipattern-analyzer.sh
cat << 'EOF' > antipattern-analyzer.sh
#!/bin/bash

echo "üîç –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"
echo "=================================================="

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ—Å—É—Ä—Å–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
analyze_resource_antipatterns() {
    echo "üíæ –ê–ù–ê–õ–ò–ó –†–ï–°–£–†–°–ù–´–• –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í:"
    
    # –ü–æ–¥—ã –±–µ–∑ resource requests
    no_requests=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.requests == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ùå –ü–æ–¥—ã –±–µ–∑ resource requests: $no_requests"
    
    # –ü–æ–¥—ã –±–µ–∑ resource limits
    no_limits=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].resources.limits == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ùå –ü–æ–¥—ã –±–µ–∑ resource limits: $no_limits"
    
    # BestEffort –ø–æ–¥—ã
    besteffort_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.status.qosClass == "BestEffort") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ö†Ô∏è BestEffort –ø–æ–¥—ã: $besteffort_count"
    
    # Over-provisioned –ø–æ–¥—ã (–≤—ã—Å–æ–∫–∏–µ requests, –Ω–∏–∑–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
    echo -e "\nüî• –¢–æ–ø –ø–æ–¥–æ–≤ –ø–æ CPU requests (–≤–æ–∑–º–æ–∂–Ω–æ over-provisioned):"
    kubectl get pods --all-namespaces -o json | \
    jq -r '.items[] | select(.spec.containers[].resources.requests.cpu != null) | "\(.metadata.namespace)/\(.metadata.name): \(.spec.containers[0].resources.requests.cpu)"' | \
    sort -k2 -nr | head -5
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ç–µ–≤—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
analyze_network_antipatterns() {
    echo -e "\nüåê –ê–ù–ê–õ–ò–ó –°–ï–¢–ï–í–´–• –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í:"
    
    # NodePort —Å–µ—Ä–≤–∏—Å—ã (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
    nodeport_count=$(kubectl get svc --all-namespaces -o json | jq -r '.items[] | select(.spec.type == "NodePort") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ö†Ô∏è NodePort —Å–µ—Ä–≤–∏—Å—ã: $nodeport_count"
    
    # LoadBalancer —Å–µ—Ä–≤–∏—Å—ã (–¥–æ—Ä–æ–≥–∏–µ)
    lb_count=$(kubectl get svc --all-namespaces -o json | jq -r '.items[] | select(.spec.type == "LoadBalancer") | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "üí∞ LoadBalancer —Å–µ—Ä–≤–∏—Å—ã: $lb_count"
    
    # Ingress –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
    echo -e "\nüìä Ingress –±–µ–∑ connection pooling –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:"
    kubectl get ingress --all-namespaces -o json | \
    jq -r '.items[] | select(.metadata.annotations."nginx.ingress.kubernetes.io/upstream-keepalive-connections" == null) | "\(.metadata.namespace)/\(.metadata.name)"' | \
    head -5
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
analyze_storage_antipatterns() {
    echo -e "\nüíæ –ê–ù–ê–õ–ò–ó –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í –•–†–ê–ù–ò–õ–ò–©–ê:"
    
    # PVC –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è Storage Class
    no_sc_count=$(kubectl get pvc --all-namespaces -o json | jq -r '.items[] | select(.spec.storageClassName == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ö†Ô∏è PVC –±–µ–∑ Storage Class: $no_sc_count"
    
    # hostPath volumes (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ)
    hostpath_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.volumes[]?.hostPath != null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ùå –ü–æ–¥—ã —Å hostPath volumes: $hostpath_count"
    
    # emptyDir –±–µ–∑ sizeLimit
    echo -e "\nüìä emptyDir volumes –±–µ–∑ size limits:"
    kubectl get pods --all-namespaces -o json | \
    jq -r '.items[] | select(.spec.volumes[]?.emptyDir != null and .spec.volumes[]?.emptyDir.sizeLimit == null) | "\(.metadata.namespace)/\(.metadata.name)"' | \
    head -5
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
analyze_architecture_antipatterns() {
    echo -e "\nüèóÔ∏è –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–• –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í:"
    
    # –ü–æ–¥—ã –±–µ–∑ health checks
    no_health_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].livenessProbe == null and .spec.containers[].readinessProbe == null) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ùå –ü–æ–¥—ã –±–µ–∑ health checks: $no_health_count"
    
    # Deployments —Å –æ–¥–Ω–æ–π —Ä–µ–ø–ª–∏–∫–æ–π (SPOF)
    single_replica=$(kubectl get deployments --all-namespaces -o json | jq -r '.items[] | select(.spec.replicas == 1) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "‚ö†Ô∏è Deployments —Å –æ–¥–Ω–æ–π —Ä–µ–ø–ª–∏–∫–æ–π: $single_replica"
    
    # –ü–æ–¥—ã —Å privileged –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
    privileged_count=$(kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.spec.containers[].securityContext.privileged == true) | "\(.metadata.namespace)/\(.metadata.name)"' | wc -l)
    echo "üîí Privileged –ø–æ–¥—ã: $privileged_count"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
generate_recommendations() {
    echo -e "\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ:"
    
    echo "1. üìä –†–µ—Å—É—Ä—Å—ã:"
    echo "   - –î–æ–±–∞–≤—å—Ç–µ resource requests/limits –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
    echo "   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Guaranteed QoS –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
    echo "   - –ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤"
    echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ VPA –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏"
    
    echo -e "\n2. üåê –°–µ—Ç—å:"
    echo "   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ClusterIP –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏"
    echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ connection pooling –≤ Ingress"
    echo "   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ DNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é"
    echo "   - –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ Network Policies –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
    
    echo -e "\n3. üíæ –•—Ä–∞–Ω–∏–ª–∏—â–µ:"
    echo "   - –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ Storage Class"
    echo "   - –ò–∑–±–µ–≥–∞–π—Ç–µ hostPath volumes"
    echo "   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã"
    echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ size limits –¥–ª—è emptyDir"
    
    echo -e "\n4. üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:"
    echo "   - –î–æ–±–∞–≤—å—Ç–µ health checks –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
    echo "   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É"
    echo "   - –ò–∑–±–µ–≥–∞–π—Ç–µ shared state –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏"
    echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ graceful shutdown"
    
    echo -e "\n5. üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:"
    echo "   - –ò–∑–±–µ–≥–∞–π—Ç–µ privileged –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
    echo "   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
    echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Pod Security Standards"
    echo "   - –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø least privilege"
}

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
echo "üöÄ –ó–ê–ü–£–°–ö –ö–û–ú–ü–õ–ï–ö–°–ù–û–ì–û –ê–ù–ê–õ–ò–ó–ê –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í:"
echo "============================================"

analyze_resource_antipatterns
analyze_network_antipatterns
analyze_storage_antipatterns
analyze_architecture_antipatterns
generate_recommendations

echo -e "\nüìà –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò:"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
echo "–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:"
kubectl top nodes 2>/dev/null || echo "Metrics server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
kubectl top pods --all-namespaces --sort-by=cpu 2>/dev/null | head -5 || echo "Pod metrics –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
echo -e "\n–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —Å –æ—à–∏–±–∫–∞–º–∏:"
kubectl get events --all-namespaces --field-selector type=Warning --sort-by=.metadata.creationTimestamp | tail -5

# –ü—Ä–æ–≤–µ—Ä–∫–∞ failed –ø–æ–¥–æ–≤
echo -e "\nFailed –ø–æ–¥—ã:"
kubectl get pods --all-namespaces --field-selector status.phase=Failed

echo -e "\n‚úÖ –ê–ù–ê–õ–ò–ó –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í –ó–ê–í–ï–†–®–ï–ù!"
echo "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:"
echo "- ./resource-antipatterns-fix.sh"
echo "- ./network-antipatterns-fix.sh" 
echo "- ./architecture-antipatterns-fix.sh"
EOF

chmod +x antipattern-analyzer.sh
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç fix-all-antipatterns.sh
cat << 'EOF' > fix-all-antipatterns.sh
#!/bin/bash

echo "üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤"
echo "=============================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
scripts=("resource-antipatterns-fix.sh" "network-antipatterns-fix.sh" "architecture-antipatterns-fix.sh")
missing_scripts=()

for script in "${scripts[@]}"; do
    if [[ ! -f "$script" ]]; then
        missing_scripts+=("$script")
    fi
done

if [[ ${#missing_scripts[@]} -gt 0 ]]; then
    echo "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:"
    printf '%s\n' "${missing_scripts[@]}"
    echo "–°–æ–∑–¥–∞–π—Ç–µ –∏—Ö —Å–Ω–∞—á–∞–ª–∞, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Å—Ç–∞—Ç—å–∏"
    exit 1
fi

# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
echo "üìä –ê–Ω–∞–ª–∏–∑ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–µ—Ä–µ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º:"
if [[ -f "antipattern-analyzer.sh" ]]; then
    ./antipattern-analyzer.sh > antipatterns-before.log 2>&1
    echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ antipatterns-before.log"
else
    echo "‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
echo -e "\nüîß 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:"
./resource-antipatterns-fix.sh

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
echo -e "\nüîß 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:"
./network-antipatterns-fix.sh

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
echo -e "\nüîß 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:"
./architecture-antipatterns-fix.sh

# –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
echo -e "\n‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π..."
sleep 30

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
echo -e "\nüìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:"
kubectl get pods -l antipattern-fix --show-labels
kubectl get svc -l antipattern-fix
kubectl get deployments -l antipattern-fix

# –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
echo -e "\nüìà –ê–Ω–∞–ª–∏–∑ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:"
if [[ -f "antipattern-analyzer.sh" ]]; then
    ./antipattern-analyzer.sh > antipatterns-after.log 2>&1
    echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ antipatterns-after.log"
    
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    echo -e "\nüìä –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:"
    echo "–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:"
    grep -E "(‚ùå|‚ö†Ô∏è)" antipatterns-before.log | head -10
    echo -e "\n–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:"
    grep -E "(‚ùå|‚ö†Ô∏è)" antipatterns-after.log | head -10
else
    echo "‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏"
fi

echo -e "\n‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–û–í –ó–ê–í–ï–†–®–ï–ù–û!"
echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ antipatterns-before.log –∏ antipatterns-after.log –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è"
EOF

chmod +x fix-all-antipatterns.sh
```

## üìä **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Antipattern Detection & Remediation             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Detection Layer                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Resource Analysis (CPU/Memory/QoS)                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Network Analysis (Services/Ingress/DNS)               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Storage Analysis (PVC/StorageClass/Volumes)           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Architecture Analysis (Health/Replicas/Security)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Remediation Layer                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Automated Fixes (Resource Requests/Limits)            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Configuration Optimization (Services/Ingress)         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Architecture Improvements (Health Checks/Replicas)    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Security Hardening (Non-privileged/RBAC)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Validation Layer                                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Before/After Comparison                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Performance Impact Assessment                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Compliance Verification                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Continuous Monitoring                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ **–¢–æ–ø-10 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

### **1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource requests/limits**
- **–ü—Ä–æ–±–ª–µ–º–∞**: BestEffort QoS, –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–†–µ—à–µ–Ω–∏–µ**: Guaranteed –∏–ª–∏ Burstable QoS —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏

### **2. Over-provisioning —Ä–µ—Å—É—Ä—Å–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ VPA –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### **3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NodePort –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ network hops
- **–†–µ—à–µ–Ω–∏–µ**: ClusterIP –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### **4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ health checks**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- **–†–µ—à–µ–Ω–∏–µ**: Liveness, Readiness –∏ Startup probes

### **5. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### **6. Shared state –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ä—É—à–µ–Ω–∏–µ stateless –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (Redis, DB)

### **7. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ Storage Classes**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å I/O
- **–†–µ—à–µ–Ω–∏–µ**: SSD –¥–∏—Å–∫–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### **8. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ connection pooling**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í—ã—Å–æ–∫–∞—è latency —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ keepalive –≤ Ingress

### **9. Single replica deployments**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Single Point of Failure
- **–†–µ—à–µ–Ω–∏–µ**: –ú–∏–Ω–∏–º—É–º 2 —Ä–µ–ø–ª–∏–∫–∏ —Å PodDisruptionBudget

### **10. Privileged –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ä—É—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–†–µ—à–µ–Ω–∏–µ**: Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ Pod Security Standards

## üîç **–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**
```bash
# –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
./antipattern-analyzer.sh

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD
kubectl apply -f antipattern-detection-cronjob.yaml
```

### **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ QoS —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –ê–Ω–∞–ª–∏–∑ resource utilization
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ network latency
- –ö–æ–Ω—Ç—Ä–æ–ª—å storage performance

### **3. Code review –ø—Ä–æ—Ü–µ—Å—Å**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ YAML –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è resource specifications
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π review
- Security assessment

### **4. Continuous improvement**
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ performance audits
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ best practices
- –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–ò–∑–±–µ–≥–∞–Ω–∏–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ ‚Äî –∫–ª—é—á –∫ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–º—É –∏ –Ω–∞–¥–µ–∂–Ω–æ–º—É Kubernetes –∫–ª–∞—Å—Ç–µ—Ä—É!**
