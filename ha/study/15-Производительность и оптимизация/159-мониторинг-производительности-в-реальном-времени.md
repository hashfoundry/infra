# 159. ะะฐะบ ะฝะฐัััะพะธัั ะผะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ?

## ๐ฏ **ะงัะพ ัะฐะบะพะต ะผะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ?**

**ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ ะฒ Kubernetes** โ ััะพ ัะธััะตะผะฐ ะฝะตะฟัะตััะฒะฝะพะณะพ ัะฑะพัะฐ, ะฐะฝะฐะปะธะทะฐ ะธ ะฒะธะทัะฐะปะธะทะฐัะธะธ ะผะตััะธะบ ะบะปะฐััะตัะฐ ั ะผะธะฝะธะผะฐะปัะฝะพะน ะทะฐะดะตัะถะบะพะน ะดะปั ะพะฟะตัะฐัะธะฒะฝะพะณะพ ะพะฑะฝะฐััะถะตะฝะธั ะฟัะพะฑะปะตะผ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ, ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั ะธ ะฟัะธะฝััะธั ัะตัะตะฝะธะน ะฝะฐ ะพัะฝะพะฒะต ะฐะบััะฐะปัะฝัั ะดะฐะฝะฝัั.

## ๐๏ธ **ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั real-time ะผะพะฝะธัะพัะธะฝะณะฐ:**

### **1. ะกะฑะพั ะผะตััะธะบ**
- Prometheus ั ะฒััะพะบะพะน ัะฐััะพัะพะน scraping
- Node Exporter ะดะปั ัะธััะตะผะฝัั ะผะตััะธะบ
- cAdvisor ะดะปั ะบะพะฝัะตะนะฝะตัะฝัั ะผะตััะธะบ
- Custom metrics ะธ application metrics

### **2. ะะฑัะฐะฑะพัะบะฐ ะธ ััะฐะฝะตะฝะธะต**
- Time-series ะฑะฐะทะฐ ะดะฐะฝะฝัั
- Retention ะฟะพะปะธัะธะบะธ
- Downsampling ะธ aggregation
- High availability ะบะพะฝัะธะณััะฐัะธั

### **3. ะะธะทัะฐะปะธะทะฐัะธั**
- Grafana real-time ะดะฐัะฑะพัะดั
- Live refresh ะธ streaming
- Alerting ะธ notifications
- Mobile-friendly ะธะฝัะตััะตะนัั

### **4. ะะฒัะพะผะฐัะธะทะฐัะธั**
- HPA ะฝะฐ ะพัะฝะพะฒะต custom metrics
- VPA ะดะปั ะฒะตััะธะบะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั
- Cluster Autoscaler
- Automated remediation

## ๐ **ะัะฐะบัะธัะตัะบะธะต ะฟัะธะผะตัั ะธะท ะฒะฐัะตะณะพ HA ะบะปะฐััะตัะฐ:**

### **1. ะะฝะฐะปะธะท ัะตะบััะตะณะพ ะผะพะฝะธัะพัะธะฝะณะฐ:**
```bash
# ะัะพะฒะตัะบะฐ Prometheus ะบะพะฝัะธะณััะฐัะธะธ
kubectl get prometheus -n monitoring -o yaml

# ะกัะฐััั ัะฑะพัะฐ ะผะตััะธะบ
kubectl port-forward svc/prometheus-server -n monitoring 9090:80 &
curl -s "http://localhost:9090/api/v1/targets" | jq '.data.activeTargets[] | {job: .labels.job, health: .health, lastScrape: .lastScrape}'

# ะัะพะฒะตัะบะฐ Grafana ะดะฐัะฑะพัะดะพะฒ
kubectl get configmap -n monitoring | grep grafana

# ะะฝะฐะปะธะท ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ัะฑะพัะฐ ะผะตััะธะบ
kubectl top pods -n monitoring --sort-by=cpu
```

### **2. ะะพะฝะธัะพัะธะฝะณ real-time ะผะตััะธะบ:**
```bash
# ะขะตะบััะฐั ะฝะฐะณััะทะบะฐ ะฝะฐ ะบะปะฐััะตั
kubectl top nodes
kubectl top pods --all-namespaces --sort-by=cpu | head -10

# ะัะพะฒะตัะบะฐ HPA ััะฐัััะฐ
kubectl get hpa --all-namespaces

# ะะฝะฐะปะธะท ัะพะฑััะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
kubectl get events --all-namespaces --sort-by=.metadata.creationTimestamp | tail -20

# ะะพะฝะธัะพัะธะฝะณ ัะตัะตะฒะพะณะพ ััะฐัะธะบะฐ
kubectl get --raw /metrics | grep container_network
```

## ๐ **ะะตะผะพะฝัััะฐัะธั real-time ะผะพะฝะธัะพัะธะฝะณะฐ:**

### **1. ะะฐัััะพะนะบะฐ ะฒััะพะบะพัะฐััะพัะฝะพะณะพ Prometheus:**
```bash
# ะกะพะทะดะฐัั ัะบัะธะฟั realtime-prometheus-config.sh
cat << 'EOF' > realtime-prometheus-config.sh
#!/bin/bash

echo "โก ะะฐัััะพะนะบะฐ real-time Prometheus ะผะพะฝะธัะพัะธะฝะณะฐ"
echo "==========================================="

# ะกะพะทะดะฐะฝะธะต ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะพะน ะบะพะฝัะธะณััะฐัะธะธ Prometheus
echo "๐ง ะกะพะทะดะฐะฝะธะต high-frequency Prometheus ะบะพะฝัะธะณััะฐัะธะธ:"
cat << 'PROMETHEUS_CONFIG_EOF' | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-realtime-config
  namespace: monitoring
  labels:
    app: prometheus
    component: realtime
data:
  prometheus.yml: |
    global:
      scrape_interval: 5s          # ะััะพะบะฐั ัะฐััะพัะฐ ัะฑะพัะฐ
      evaluation_interval: 5s     # ะััััะฐั ะพัะตะฝะบะฐ ะฟัะฐะฒะธะป
      external_labels:
        cluster: 'ha-cluster'
        environment: 'production'
    
    rule_files:
    - "/etc/prometheus/rules/*.yml"
    
    alerting:
      alertmanagers:
      - static_configs:
        - targets:
          - alertmanager:9093
    
    scrape_configs:
    # Kubernetes API Server
    - job_name: 'kubernetes-apiservers'
      kubernetes_sd_configs:
      - role: endpoints
      scheme: https
      tls_config:
        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
      relabel_configs:
      - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]
        action: keep
        regex: default;kubernetes;https
      scrape_interval: 5s
    
    # Node Exporter - ัะธััะตะผะฝัะต ะผะตััะธะบะธ
    - job_name: 'kubernetes-nodes'
      kubernetes_sd_configs:
      - role: node
      scheme: https
      tls_config:
        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
      relabel_configs:
      - action: labelmap
        regex: __meta_kubernetes_node_label_(.+)
      - target_label: __address__
        replacement: kubernetes.default.svc:443
      - source_labels: [__meta_kubernetes_node_name]
        regex: (.+)
        target_label: __metrics_path__
        replacement: /api/v1/nodes/${1}/proxy/metrics
      scrape_interval: 5s
    
    # cAdvisor - ะบะพะฝัะตะนะฝะตัะฝัะต ะผะตััะธะบะธ
    - job_name: 'kubernetes-cadvisor'
      kubernetes_sd_configs:
      - role: node
      scheme: https
      tls_config:
        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
      relabel_configs:
      - action: labelmap
        regex: __meta_kubernetes_node_label_(.+)
      - target_label: __address__
        replacement: kubernetes.default.svc:443
      - source_labels: [__meta_kubernetes_node_name]
        regex: (.+)
        target_label: __metrics_path__
        replacement: /api/v1/nodes/${1}/proxy/metrics/cadvisor
      scrape_interval: 5s
    
    # Pods ั ะฐะฝะฝะพัะฐัะธัะผะธ
    - job_name: 'kubernetes-pods'
      kubernetes_sd_configs:
      - role: pod
      relabel_configs:
      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
        action: keep
        regex: true
      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
        action: replace
        target_label: __metrics_path__
        regex: (.+)
      - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]
        action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        target_label: __address__
      - action: labelmap
        regex: __meta_kubernetes_pod_label_(.+)
      - source_labels: [__meta_kubernetes_namespace]
        action: replace
        target_label: kubernetes_namespace
      - source_labels: [__meta_kubernetes_pod_name]
        action: replace
        target_label: kubernetes_pod_name
      scrape_interval: 5s
    
    # ะกะตัะฒะธัั ั ะฐะฝะฝะพัะฐัะธัะผะธ
    - job_name: 'kubernetes-services'
      kubernetes_sd_configs:
      - role: service
      relabel_configs:
      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]
        action: keep
        regex: true
      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]
        action: replace
        target_label: __scheme__
        regex: (https?)
      - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_path]
        action: replace
        target_label: __metrics_path__
        regex: (.+)
      - source_labels: [__address__, __meta_kubernetes_service_annotation_prometheus_io_port]
        action: replace
        target_label: __address__
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - source_labels: [__meta_kubernetes_namespace]
        action: replace
        target_label: kubernetes_namespace
      - source_labels: [__meta_kubernetes_service_name]
        action: replace
        target_label: kubernetes_name
      scrape_interval: 5s
PROMETHEUS_CONFIG_EOF

echo "โ Real-time Prometheus ะบะพะฝัะธะณััะฐัะธั ัะพะทะดะฐะฝะฐ"
EOF

chmod +x realtime-prometheus-config.sh
```

### **2. ะกะพะทะดะฐะฝะธะต real-time ะดะฐัะฑะพัะดะพะฒ Grafana:**
```bash
# ะกะพะทะดะฐัั ัะบัะธะฟั realtime-grafana-dashboards.sh
cat << 'EOF' > realtime-grafana-dashboards.sh
#!/bin/bash

echo "๐ ะกะพะทะดะฐะฝะธะต real-time Grafana ะดะฐัะฑะพัะดะพะฒ"
echo "======================================"

# ะกะพะทะดะฐะฝะธะต real-time ะดะฐัะฑะพัะดะฐ ะดะปั ะบะปะฐััะตัะฐ
echo "๐ ะกะพะทะดะฐะฝะธะต real-time cluster ะดะฐัะฑะพัะดะฐ:"
cat << 'DASHBOARD_EOF' | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-realtime-cluster-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  realtime-cluster.json: |
    {
      "dashboard": {
        "id": null,
        "title": "Real-time Cluster Performance",
        "tags": ["kubernetes", "realtime", "cluster"],
        "timezone": "browser",
        "refresh": "5s",
        "time": {
          "from": "now-5m",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "CPU Usage by Node",
            "type": "stat",
            "targets": [
              {
                "expr": "100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[30s])) * 100)",
                "legendFormat": "{{instance}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "percent",
                "min": 0,
                "max": 100,
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": null},
                    {"color": "yellow", "value": 70},
                    {"color": "red", "value": 90}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0}
          },
          {
            "id": 2,
            "title": "Memory Usage by Node",
            "type": "stat",
            "targets": [
              {
                "expr": "100 * (1 - ((node_memory_MemAvailable_bytes) / (node_memory_MemTotal_bytes)))",
                "legendFormat": "{{instance}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "percent",
                "min": 0,
                "max": 100,
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": null},
                    {"color": "yellow", "value": 80},
                    {"color": "red", "value": 95}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}
          },
          {
            "id": 3,
            "title": "Pod CPU Usage (Top 10)",
            "type": "timeseries",
            "targets": [
              {
                "expr": "topk(10, rate(container_cpu_usage_seconds_total{container!=\"POD\",container!=\"\"}[30s]) * 100)",
                "legendFormat": "{{namespace}}/{{pod}}/{{container}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "percent"
              }
            },
            "gridPos": {"h": 8, "w": 24, "x": 0, "y": 8}
          },
          {
            "id": 4,
            "title": "Network I/O",
            "type": "timeseries",
            "targets": [
              {
                "expr": "rate(container_network_receive_bytes_total[30s])",
                "legendFormat": "RX {{pod}}"
              },
              {
                "expr": "rate(container_network_transmit_bytes_total[30s])",
                "legendFormat": "TX {{pod}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "Bps"
              }
            },
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16}
          },
          {
            "id": 5,
            "title": "Disk I/O",
            "type": "timeseries",
            "targets": [
              {
                "expr": "rate(container_fs_reads_bytes_total[30s])",
                "legendFormat": "Read {{pod}}"
              },
              {
                "expr": "rate(container_fs_writes_bytes_total[30s])",
                "legendFormat": "Write {{pod}}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "Bps"
              }
            },
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16}
          }
        ]
      }
    }
DASHBOARD_EOF

# ะกะพะทะดะฐะฝะธะต real-time ะดะฐัะฑะพัะดะฐ ะดะปั ะฟัะธะปะพะถะตะฝะธะน
echo -e "\n๐ฑ ะกะพะทะดะฐะฝะธะต real-time application ะดะฐัะฑะพัะดะฐ:"
cat << 'APP_DASHBOARD_EOF' | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-realtime-apps-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  realtime-apps.json: |
    {
      "dashboard": {
        "id": null,
        "title": "Real-time Application Performance",
        "tags": ["kubernetes", "realtime", "applications"],
        "timezone": "browser",
        "refresh": "5s",
        "time": {
          "from": "now-5m",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "ArgoCD Performance",
            "type": "timeseries",
            "targets": [
              {
                "expr": "rate(container_cpu_usage_seconds_total{namespace=\"argocd\"}[30s]) * 100",
                "legendFormat": "CPU {{pod}}"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0}
          },
          {
            "id": 2,
            "title": "Prometheus Performance",
            "type": "timeseries",
            "targets": [
              {
                "expr": "rate(container_cpu_usage_seconds_total{namespace=\"monitoring\",pod=~\"prometheus.*\"}[30s]) * 100",
                "legendFormat": "CPU {{pod}}"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}
          },
          {
            "id": 3,
            "title": "Ingress Controller Performance",
            "type": "timeseries",
            "targets": [
              {
                "expr": "rate(nginx_ingress_controller_requests[30s])",
                "legendFormat": "Requests/sec {{controller_class}}"
              }
            ],
            "gridPos": {"h": 8, "w": 24, "x": 0, "y": 8}
          }
        ]
      }
    }
APP_DASHBOARD_EOF

echo "โ Real-time ะดะฐัะฑะพัะดั ัะพะทะดะฐะฝั"

# ะะตัะตะทะฐะฟััะบ Grafana ะดะปั ะทะฐะณััะทะบะธ ะดะฐัะฑะพัะดะพะฒ
echo -e "\n๐ ะะตัะตะทะฐะฟััะบ Grafana ะดะปั ะทะฐะณััะทะบะธ ะดะฐัะฑะพัะดะพะฒ:"
kubectl rollout restart deployment grafana -n monitoring
kubectl rollout status deployment grafana -n monitoring

echo "โ Real-time Grafana ะดะฐัะฑะพัะดั ะฝะฐัััะพะตะฝั"
EOF

chmod +x realtime-grafana-dashboards.sh
```

### **3. ะะฐัััะพะนะบะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั:**
```bash
# ะกะพะทะดะฐัั ัะบัะธะฟั realtime-autoscaling.sh
cat << 'EOF' > realtime-autoscaling.sh
#!/bin/bash

echo "๐ ะะฐัััะพะนะบะฐ real-time ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั"
echo "=================================================="

# ะกะพะทะดะฐะฝะธะต HPA ะดะปั ะบัะธัะธัะฝัั ะฟัะธะปะพะถะตะฝะธะน
echo "๐ ะกะพะทะดะฐะฝะธะต HPA ะดะปั ArgoCD:"
cat << 'ARGOCD_HPA_EOF' | kubectl apply -f -
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: argocd-server-hpa
  namespace: argocd
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: argocd-server
  minReplicas: 2
  maxReplicas: 6
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 10
        periodSeconds: 60
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Percent
        value: 50
        periodSeconds: 30
ARGOCD_HPA_EOF

# ะกะพะทะดะฐะฝะธะต VPA ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ัะตััััะพะฒ
echo -e "\n๐ ะกะพะทะดะฐะฝะธะต VPA ะดะปั Prometheus:"
cat << 'PROMETHEUS_VPA_EOF' | kubectl apply -f -
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: prometheus-vpa
  namespace: monitoring
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: prometheus-server
  updatePolicy:
    updateMode: "Auto"
  resourcePolicy:
    containerPolicies:
    - containerName: prometheus-server
      minAllowed:
        cpu: 100m
        memory: 512Mi
      maxAllowed:
        cpu: 2000m
        memory: 8Gi
      controlledResources: ["cpu", "memory"]
PROMETHEUS_VPA_EOF

# ะกะพะทะดะฐะฝะธะต PodDisruptionBudget ะดะปั ััะฐะฑะธะปัะฝะพััะธ
echo -e "\n๐ก๏ธ ะกะพะทะดะฐะฝะธะต PodDisruptionBudget:"
cat << 'PDB_EOF' | kubectl apply -f -
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: argocd-server-pdb
  namespace: argocd
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: argocd-server
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: prometheus-pdb
  namespace: monitoring
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: prometheus
PDB_EOF

# ะัะพะฒะตัะบะฐ ัะพะทะดะฐะฝะฝัั ัะตััััะพะฒ
echo -e "\n๐ ะัะพะฒะตัะบะฐ ัะพะทะดะฐะฝะฝัั ัะตััััะพะฒ ะฐะฒัะพะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั:"
kubectl get hpa --all-namespaces
kubectl get vpa --all-namespaces
kubectl get pdb --all-namespaces

echo "โ Real-time ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะฝะฐัััะพะตะฝะพ"
EOF

chmod +x realtime-autoscaling.sh
```

## ๐ง **ะกะบัะธะฟั ะบะพะผะฟะปะตะบัะฝะพะณะพ real-time ะผะพะฝะธัะพัะธะฝะณะฐ:**

### **1. ะกะพะทะดะฐะฝะธะต ะผะพะฝะธัะพัะธะฝะณะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ:**
```bash
# ะกะพะทะดะฐัั ัะบัะธะฟั realtime-monitor.sh
cat << 'EOF' > realtime-monitor.sh
#!/bin/bash

echo "โก Real-time ะผะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ HA ะบะปะฐััะตัะฐ"
echo "=================================================="

# ะคัะฝะบัะธั ะดะปั ะพัะพะฑัะฐะถะตะฝะธั ะผะตััะธะบ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
show_realtime_metrics() {
    while true; do
        clear
        echo "๐ REAL-TIME KUBERNETES PERFORMANCE MONITOR"
        echo "==========================================="
        echo "ะัะตะผั: $(date)"
        echo
        
        # 1. ะะฑัะตะต ัะพััะพัะฝะธะต ะบะปะฐััะตัะฐ
        echo "๐๏ธ ะกะะกะขะะฏะะะ ะะะะกะขะะะ:"
        kubectl get nodes --no-headers | awk '{print $1 ": " $2}' | column -t
        echo
        
        # 2. ะขะพะฟ ะฟะพะดะพะฒ ะฟะพ CPU
        echo "๐ฅ ะขะะ ะะะะะ ะะ CPU:"
        kubectl top pods --all-namespaces --sort-by=cpu | head -6
        echo
        
        # 3. ะขะพะฟ ะฟะพะดะพะฒ ะฟะพ ะฟะฐะผััะธ
        echo "๐พ ะขะะ ะะะะะ ะะ ะะะะฏะขะ:"
        kubectl top pods --all-namespaces --sort-by=memory | head -6
        echo
        
        # 4. ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะทะปะพะฒ
        echo "๐ฅ๏ธ ะะกะะะะฌะะะะะะะ ะฃะะะะ:"
        kubectl top nodes
        echo
        
        # 5. HPA ััะฐััั
        echo "๐ ะะะขะะะะกะจะขะะะะะะะะะะ (HPA):"
        kubectl get hpa --all-namespaces --no-headers 2>/dev/null | head -5 || echo "HPA ะฝะต ะฝะฐัััะพะตะฝ"
        echo
        
        # 6. ะะพัะปะตะดะฝะธะต ัะพะฑััะธั
        echo "๐ ะะะกะะะะะะ ะกะะะซะขะะฏ:"
        kubectl get events --all-namespaces --sort-by=.metadata.creationTimestamp | tail -5
        echo
        
        # 7. ะกัะฐััั ะบัะธัะธัะฝัั ะฟะพะดะพะฒ
        echo "๐ฏ ะะะะขะะงะะซะ ะะะะซ:"
        echo "ArgoCD:"
        kubectl get pods -n argocd --no-headers | awk '{print "  " $1 ": " $3}'
        echo "Monitoring:"
        kubectl get pods -n monitoring --no-headers | head -3 | awk '{print "  " $1 ": " $3}'
        echo "Ingress:"
        kubectl get pods -n ingress-nginx --no-headers | head -2 | awk '{print "  " $1 ": " $3}'
        echo
        
        echo "ะะฑะฝะพะฒะปะตะฝะธะต ะบะฐะถะดัะต 5 ัะตะบัะฝะด... (Ctrl+C ะดะปั ะฒััะพะดะฐ)"
        sleep 5
    done
}

# ะคัะฝะบัะธั ะดะปั ะฟัะพะฒะตัะบะธ Prometheus ะผะตััะธะบ
check_prometheus_metrics() {
    echo "๐ ะะะะะะะะ PROMETHEUS ะะะขะะะ:"
    
    if kubectl get svc prometheus-server -n monitoring &>/dev/null; then
        kubectl port-forward svc/prometheus-server -n monitoring 9090:80 &
        PF_PID=$!
        sleep 3
        
        echo "ะะพัััะฟะฝัะต ะผะตััะธะบะธ:"
        echo "- ะฃะทะปั: $(curl -s 'http://localhost:9090/api/v1/query?query=up{job="kubernetes-nodes"}' | jq '.data.result | length')"
        echo "- ะะพะดั: $(curl -s 'http://localhost:9090/api/v1/query?query=up{job="kubernetes-pods"}' | jq '.data.result | length')"
        echo "- ะกะตัะฒะธัั: $(curl -s 'http://localhost:9090/api/v1/query?query=up{job="kubernetes-services"}' | jq '.data.result | length')"
        
        # ะัะพะฒะตัะบะฐ ะทะฐะดะตัะถะบะธ ัะฑะพัะฐ ะผะตััะธะบ
        echo "ะะฐะดะตัะถะบะฐ ัะฑะพัะฐ ะผะตััะธะบ:"
        curl -s 'http://localhost:9090/api/v1/query?query=prometheus_tsdb_head_max_time - prometheus_tsdb_head_min_time' | \
        jq -r '.data.result[0].value[1] // "N/A"' | awk '{print "  " $1/1000 " ัะตะบัะฝะด"}'
        
        kill $PF_PID 2>/dev/null
    else
        echo "Prometheus ะฝะตะดะพัััะฟะตะฝ"
    fi
}

# ะคัะฝะบัะธั ะดะปั ัะตััะธัะพะฒะฐะฝะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
performance_test() {
    echo "๐งช ะขะะกะข ะะะะะะะะะะขะะะฌะะะกะขะ REAL-TIME ะะะะะขะะะะะะ:"
    
    # ะกะพะทะดะฐะฝะธะต ัะตััะพะฒะพะน ะฝะฐะณััะทะบะธ
    echo "ะกะพะทะดะฐะฝะธะต ัะตััะพะฒะพะน ะฝะฐะณััะทะบะธ..."
    kubectl run stress-test --image=progrium/stress --rm -it --restart=Never -- --cpu 2 --timeout 30s &
    STRESS_PID=$!
    
    # ะะพะฝะธัะพัะธะฝะณ ะฒ ัะตัะตะฝะธะต ัะตััะฐ
    echo "ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะฒ ัะตัะตะฝะธะต 30 ัะตะบัะฝะด:"
    for i in {1..6}; do
        echo "ะะทะผะตัะตะฝะธะต $i/6:"
        kubectl top nodes
        kubectl top pods --all-namespaces --sort-by=cpu | head -3
        echo "---"
        sleep 5
    done
    
    wait $STRESS_PID
    echo "ะขะตัั ะทะฐะฒะตััะตะฝ"
}

# ะะปะฐะฒะฝะพะต ะผะตะฝั
echo "ะัะฑะตัะธัะต ัะตะถะธะผ ะผะพะฝะธัะพัะธะฝะณะฐ:"
echo "1) Real-time ะผะพะฝะธัะพัะธะฝะณ (ะธะฝัะตัะฐะบัะธะฒะฝัะน)"
echo "2) ะัะพะฒะตัะบะฐ Prometheus ะผะตััะธะบ"
echo "3) ะขะตัั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ"
echo "4) ะัะต ะฟัะพะฒะตัะบะธ"
read -p "ะะฒะตะดะธัะต ะฝะพะผะตั (1-4): " choice

case $choice in
    1)
        show_realtime_metrics
        ;;
    2)
        check_prometheus_metrics
        ;;
    3)
        performance_test
        ;;
    4)
        check_prometheus_metrics
        echo
        performance_test
        echo
        echo "ะะฐะฟััะบ real-time ะผะพะฝะธัะพัะธะฝะณะฐ ัะตัะตะท 5 ัะตะบัะฝะด..."
        sleep 5
        show_realtime_metrics
        ;;
    *)
        echo "ะะตะฒะตัะฝัะน ะฒัะฑะพั. ะะฐะฟััะบ real-time ะผะพะฝะธัะพัะธะฝะณะฐ..."
        show_realtime_metrics
        ;;
esac
EOF

chmod +x realtime-monitor.sh
```

## ๐ **ะััะธัะตะบัััะฐ real-time ะผะพะฝะธัะพัะธะฝะณะฐ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Real-time Monitoring Architecture             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Visualization Layer (5s refresh)                          โ
โ  โโโ Grafana Live Dashboards                               โ
โ  โโโ Mobile-friendly interfaces                            โ
โ  โโโ Real-time alerts & notifications                      โ
โ  โโโ Custom monitoring applications                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Processing Layer                                           โ
โ  โโโ Prometheus (5s scrape interval)                       โ
โ  โโโ AlertManager (instant notifications)                  โ
โ  โโโ Recording rules (pre-computed metrics)                โ
โ  โโโ Federation & HA setup                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Collection Layer                                           โ
โ  โโโ Node Exporter (system metrics)                        โ
โ  โโโ cAdvisor (container metrics)                          โ
โ  โโโ Kube State Metrics (K8s objects)                      โ
โ  โโโ Application metrics (custom)                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Automation Layer                                           โ
โ  โโโ HPA (CPU/Memory based scaling)                        โ
โ  โโโ VPA (Resource optimization)                           โ
โ  โโโ Cluster Autoscaler (Node scaling)                     โ
โ  โโโ Custom controllers (Event-driven)                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฏ **Best Practices ะดะปั real-time ะผะพะฝะธัะพัะธะฝะณะฐ:**

### **1. ะะฟัะธะผะธะทะฐัะธั ัะฑะพัะฐ ะผะตััะธะบ:**
- ะัะฟะพะปัะทัะนัะต ะฒััะพะบัั ัะฐััะพัั scraping (5-15s) ะดะปั ะบัะธัะธัะฝัั ะผะตััะธะบ
- ะะฐัััะพะนัะต retention ะฟะพะปะธัะธะบะธ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะพะฑัะตะผะพะผ ะดะฐะฝะฝัั
- ะัะธะผะตะฝัะนัะต recording rules ะดะปั ะฟัะตะดะฒะฐัะธัะตะปัะฝัั ะฒััะธัะปะตะฝะธะน
- ะะพะฝะธัะพัััะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ัะฐะผะพะณะพ Prometheus

### **2. ะญััะตะบัะธะฒะฝะฐั ะฒะธะทัะฐะปะธะทะฐัะธั:**
- ะกะพะทะดะฐะฒะฐะนัะต ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ะดะฐัะฑะพัะดั ะดะปั ัะฐะทะฝัั ัะพะปะตะน
- ะัะฟะพะปัะทัะนัะต live refresh ะธ streaming ะดะฐะฝะฝัั
- ะะฐัััะพะนัะต mobile-friendly ะธะฝัะตััะตะนัั
- ะัะธะผะตะฝัะนัะต ัะฒะตัะพะฒะพะต ะบะพะดะธัะพะฒะฐะฝะธะต ะดะปั ะฑััััะพะณะพ ะฐะฝะฐะปะธะทะฐ

### **3. ะะฒัะพะผะฐัะธะทะฐัะธั ะธ ะฐะปะตััั:**
- ะะฐัััะพะนัะต ะผะณะฝะพะฒะตะฝะฝัะต ัะฒะตะดะพะผะปะตะฝะธั ะดะปั ะบัะธัะธัะฝัั ัะพะฑััะธะน
- ะัะฟะพะปัะทัะนัะต ะณัะฐะดัะธัะพะฒะฐะฝะฝัะต ะฐะปะตััั (warning โ critical)
- ะะฝัะตะณัะธััะนัะต ั ัะธััะตะผะฐะผะธ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั
- ะะพะฝะธัะพัััะต ัััะตะบัะธะฒะฝะพััั ัะฐะผะธั ะฐะปะตััะพะฒ

### **4. ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ัะธััะตะผั ะผะพะฝะธัะพัะธะฝะณะฐ:**
- ะะฐัััะฐะฑะธััะนัะต Prometheus ะณะพัะธะทะพะฝัะฐะปัะฝะพ ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ
- ะัะฟะพะปัะทัะนัะต SSD ะดะธัะบะธ ะดะปั time-series ะดะฐะฝะฝัั
- ะะฟัะธะผะธะทะธััะนัะต memory usage ะธ CPU ะดะปั ัะฑะพัะฐ ะผะตััะธะบ
- ะะตะณัะปััะฝะพ ะพัะธัะฐะนัะต ัััะฐัะตะฒัะธะต ะผะตััะธะบะธ

**Real-time ะผะพะฝะธัะพัะธะฝะณ โ ะพัะฝะพะฒะฐ ะดะปั ะฟัะพะฐะบัะธะฒะฝะพะณะพ ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั Kubernetes ะบะปะฐััะตัะฐ!**
