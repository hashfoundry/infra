# 157. –ö–∞–∫ –≤–ª–∏—è—é—Ç QoS –∫–ª–∞—Å—Å—ã –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ QoS –∫–ª–∞—Å—Å—ã –≤ Kubernetes?**

**QoS (Quality of Service) –∫–ª–∞—Å—Å—ã –≤ Kubernetes** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–æ–≤ –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤. QoS –∫–ª–∞—Å—Å—ã –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

## üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ QoS –∫–ª–∞—Å—Å—ã:**

### **1. Guaranteed (–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)**
- Requests = Limits –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ù–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã—Ç–µ—Å–Ω—è–µ—Ç—Å—è
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **2. Burstable (–ü–∞–∫–µ—Ç–Ω—ã–π)**
- Requests < Limits –∏–ª–∏ —Ç–æ–ª—å–∫–æ Requests
- –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –í—ã—Ç–µ—Å–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ BestEffort
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **3. BestEffort (–õ—É—á—à–∏–µ —É—Å–∏–ª–∏—è)**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç Requests –∏ Limits
- –ù–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –ü–µ—Ä–≤—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üìä **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ HA –∫–ª–∞—Å—Ç–µ—Ä–∞:**

### **1. –ê–Ω–∞–ª–∏–∑ QoS –∫–ª–∞—Å—Å–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä QoS –∫–ª–∞—Å—Å–æ–≤ –≤—Å–µ—Ö –ø–æ–¥–æ–≤
kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,QOS:.status.qosClass

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ QoS –∫–ª–∞—Å—Å–∞–º
kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.status.qosClass}{"\n"}{end}' | sort | uniq -c

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ QoS –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–¥–∞
kubectl describe pod <pod-name> -n <namespace> | grep -A 5 "QoS Class"

# –ü–æ–¥—ã –ø–æ QoS –∫–ª–∞—Å—Å–∞–º
for qos in Guaranteed Burstable BestEffort; do
    echo "=== $qos QoS ==="
    kubectl get pods --all-namespaces -o json | jq -r ".items[] | select(.status.qosClass == \"$qos\") | \"\(.metadata.namespace)/\(.metadata.name)\""
done
```

### **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ QoS:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ QoS –∫–ª–∞—Å—Å–∞–º
kubectl top pods --all-namespaces --sort-by=memory

# –ê–Ω–∞–ª–∏–∑ Prometheus –ø–æ–¥–æ–≤ (–æ–±—ã—á–Ω–æ Guaranteed)
kubectl describe pod -n monitoring -l app.kubernetes.io/name=prometheus | grep -A 10 "QoS Class\|Requests\|Limits"

# –ê–Ω–∞–ª–∏–∑ ArgoCD –ø–æ–¥–æ–≤
kubectl describe pod -n argocd -l app.kubernetes.io/name=argocd-server | grep -A 10 "QoS Class\|Requests\|Limits"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
kubectl get pods -n monitoring -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory
```

### **3. –°–æ–±—ã—Ç–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```bash
# –°–æ–±—ã—Ç–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
kubectl get events --all-namespaces --field-selector reason=Evicted --sort-by=.metadata.creationTimestamp

# –ü–æ–¥—ã —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ (–º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å QoS)
kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,RESTARTS:.status.containerStatuses[0].restartCount,QOS:.status.qosClass | grep -v "0"

# –ê–Ω–∞–ª–∏–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —É–∑–ª—ã
kubectl top nodes
kubectl describe nodes | grep -A 5 "Allocated resources"
```

## üîÑ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è QoS –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

### **1. Guaranteed QoS - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç guaranteed-qos-demo.sh
cat << 'EOF' > guaranteed-qos-demo.sh
#!/bin/bash

echo "üèÜ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Guaranteed QoS –∫–ª–∞—Å—Å–∞"
echo "===================================="

# –°–æ–∑–¥–∞–Ω–∏–µ Guaranteed –ø–æ–¥–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cat << 'GUARANTEED_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: guaranteed-database
  labels:
    app: critical-db
    qos-demo: guaranteed
spec:
  containers:
  - name: database
    image: postgres:13
    resources:
      requests:
        memory: "1Gi"      # Requests = Limits
        cpu: "500m"        # –¥–ª—è Guaranteed QoS
      limits:
        memory: "1Gi"      # –¢–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
        cpu: "500m"        # –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
    env:
    - name: POSTGRES_DB
      value: "testdb"
    - name: POSTGRES_USER
      value: "testuser"
    - name: POSTGRES_PASSWORD
      value: "testpass"
    - name: POSTGRES_INITDB_ARGS
      value: "--encoding=UTF-8"
  restartPolicy: Always
GUARANTEED_EOF

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ Guaranteed –ø–æ–¥–∞..."
kubectl wait --for=condition=Ready pod/guaranteed-database --timeout=60s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ QoS –∫–ª–∞—Å—Å–∞
echo "üìä QoS –∫–ª–∞—Å—Å –ø–æ–¥–∞:"
kubectl get pod guaranteed-database -o jsonpath='{.status.qosClass}'
echo

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
echo "üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Guaranteed –ø–æ–¥–∞:"
kubectl top pod guaranteed-database

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (30 —Å–µ–∫—É–Ω–¥):"
for i in {1..6}; do
    echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ $i/6:"
    kubectl get pod guaranteed-database -o custom-columns=STATUS:.status.phase,READY:.status.conditions[?@.type==\"Ready\"].status,RESTARTS:.status.containerStatuses[0].restartCount
    sleep 5
done

echo "‚úÖ Guaranteed QoS –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
EOF

chmod +x guaranteed-qos-demo.sh
```

### **2. Burstable QoS - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç burstable-qos-demo.sh
cat << 'EOF' > burstable-qos-demo.sh
#!/bin/bash

echo "‚ö° –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Burstable QoS –∫–ª–∞—Å—Å–∞"
echo "=================================="

# –°–æ–∑–¥–∞–Ω–∏–µ Burstable –ø–æ–¥–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cat << 'BURSTABLE_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: burstable-webserver
  labels:
    app: web-service
    qos-demo: burstable
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    resources:
      requests:
        memory: "256Mi"    # Requests < Limits
        cpu: "200m"        # –¥–ª—è Burstable QoS
      limits:
        memory: "512Mi"    # –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ
        cpu: "500m"        # –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
    ports:
    - containerPort: 80
  - name: app
    image: busybox
    resources:
      requests:
        memory: "128Mi"    # –¢–æ–ª—å–∫–æ requests
        cpu: "100m"        # –±–µ–∑ limits = Burstable
      # –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ limits —Ç–∞–∫–∂–µ –¥–∞–µ—Ç Burstable QoS
    command: ["/bin/sh"]
    args: ["-c", "while true; do echo 'App running'; sleep 30; done"]
  restartPolicy: Always
BURSTABLE_EOF

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ Burstable –ø–æ–¥–∞..."
kubectl wait --for=condition=Ready pod/burstable-webserver --timeout=60s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ QoS –∫–ª–∞—Å—Å–∞
echo "üìä QoS –∫–ª–∞—Å—Å –ø–æ–¥–∞:"
kubectl get pod burstable-webserver -o jsonpath='{.status.qosClass}'
echo

# –°–∏–º—É–ª—è—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ burst
echo "üöÄ –°–∏–º—É–ª—è—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ burst –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:"
kubectl exec burstable-webserver -c app -- sh -c "
echo '–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ CPU –∏ –ø–∞–º—è—Ç—å...'
dd if=/dev/zero of=/tmp/test bs=1M count=100 &
yes > /dev/null &
sleep 10
killall yes dd 2>/dev/null
echo '–ù–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞'
" &

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ –≤—Ä–µ–º—è –Ω–∞–≥—Ä—É–∑–∫–∏
echo "üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º—è –Ω–∞–≥—Ä—É–∑–∫–∏:"
for i in {1..5}; do
    echo "–ò–∑–º–µ—Ä–µ–Ω–∏–µ $i/5:"
    kubectl top pod burstable-webserver
    sleep 3
done

echo "‚úÖ Burstable QoS –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
EOF

chmod +x burstable-qos-demo.sh
```

### **3. BestEffort QoS - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç besteffort-qos-demo.sh
cat << 'EOF' > besteffort-qos-demo.sh
#!/bin/bash

echo "üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è BestEffort QoS –∫–ª–∞—Å—Å–∞"
echo "==================================="

# –°–æ–∑–¥–∞–Ω–∏–µ BestEffort –ø–æ–¥–∞ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
cat << 'BESTEFFORT_EOF' | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: besteffort-worker
  labels:
    app: background-worker
    qos-demo: besteffort
spec:
  containers:
  - name: worker
    image: busybox
    # –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resources = BestEffort QoS
    command: ["/bin/sh"]
    args: ["-c", "while true; do echo 'Background work'; sleep 10; done"]
  - name: logger
    image: busybox
    # BestEffort - –±–µ–∑ resource requests/limits
    command: ["/bin/sh"]
    args: ["-c", "while true; do echo 'Logging...'; sleep 15; done"]
  restartPolicy: Always
BESTEFFORT_EOF

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ BestEffort –ø–æ–¥–∞..."
kubectl wait --for=condition=Ready pod/besteffort-worker --timeout=60s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ QoS –∫–ª–∞—Å—Å–∞
echo "üìä QoS –∫–ª–∞—Å—Å –ø–æ–¥–∞:"
kubectl get pod besteffort-worker -o jsonpath='{.status.qosClass}'
echo

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∫ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—é
echo "‚ö†Ô∏è –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–∏ BestEffort –ø–æ–¥–æ–≤:"
echo "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–∞–º—è—Ç—å –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤..."

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
kubectl run memory-pressure --image=progrium/stress --rm -it --restart=Never -- --vm 1 --vm-bytes 512M --timeout 30s &
STRESS_PID=$!

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è BestEffort –ø–æ–¥–∞ –≤–æ –≤—Ä–µ–º—è –Ω–∞–≥—Ä—É–∑–∫–∏
echo "üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ BestEffort –ø–æ–¥–∞ –≤–æ –≤—Ä–µ–º—è –Ω–∞–≥—Ä—É–∑–∫–∏:"
for i in {1..10}; do
    echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ $i/10:"
    kubectl get pod besteffort-worker -o custom-columns=STATUS:.status.phase,READY:.status.conditions[?@.type==\"Ready\"].status
    sleep 3
done

wait $STRESS_PID

echo "‚úÖ BestEffort QoS –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
EOF

chmod +x besteffort-qos-demo.sh
```

## üîß **–°–∫—Ä–∏–ø—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ QoS:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ QoS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç qos-performance-analyzer.sh
cat << 'EOF' > qos-performance-analyzer.sh
#!/bin/bash

echo "üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ QoS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ HA –∫–ª–∞—Å—Ç–µ—Ä–∞"
echo "======================================================"

# 1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ QoS –∫–ª–∞—Å—Å–æ–≤
echo "üìà 1. –°–¢–ê–¢–ò–°–¢–ò–ö–ê QoS –ö–õ–ê–°–°–û–í:"
echo "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–æ–≤ –ø–æ QoS –∫–ª–∞—Å—Å–∞–º:"
kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.status.qosClass}{"\n"}{end}' | sort | uniq -c | while read count qos; do
    echo "  $qos: $count –ø–æ–¥–æ–≤"
done

# 2. –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
echo -e "\nüèÜ 2. –ê–ù–ê–õ–ò–ó –ö–†–ò–¢–ò–ß–ù–´–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í:"

echo "Prometheus (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥):"
kubectl get pods -n monitoring -l app.kubernetes.io/name=prometheus -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory

echo -e "\nArgoCD (GitOps):"
kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory

echo -e "\nNGINX Ingress (—Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫):"
kubectl get pods -n ingress-nginx -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ QoS
echo -e "\nüíª 3. –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –†–ï–°–£–†–°–û–í –ü–û QoS:"

for qos in Guaranteed Burstable BestEffort; do
    echo -e "\n$qos –ø–æ–¥—ã:"
    kubectl get pods --all-namespaces -o json | \
    jq -r ".items[] | select(.status.qosClass == \"$qos\") | \"\(.metadata.namespace)/\(.metadata.name)\"" | \
    head -5 | while read pod; do
        if [ ! -z "$pod" ]; then
            echo "  $pod"
            kubectl top pod ${pod##*/} -n ${pod%/*} 2>/dev/null | tail -1 || echo "    –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
        fi
    done
done

# 4. –°–æ–±—ã—Ç–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è
echo -e "\n‚ö†Ô∏è 4. –°–û–ë–´–¢–ò–Ø –í–´–¢–ï–°–ù–ï–ù–ò–Ø (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10):"
kubectl get events --all-namespaces --field-selector reason=Evicted --sort-by=.metadata.creationTimestamp | tail -10

# 5. –ü–æ–¥—ã —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
echo -e "\nüîÑ 5. –ü–û–î–´ –° –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê–ú–ò:"
kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,RESTARTS:.status.containerStatuses[0].restartCount,QOS:.status.qosClass | grep -v " 0 " | head -10

# 6. –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —É–∑–ª—ã
echo -e "\nüñ•Ô∏è 6. –ù–ê–ì–†–£–ó–ö–ê –ù–ê –£–ó–õ–´:"
kubectl top nodes

# 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
echo -e "\nüí° 7. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò:"

guaranteed_count=$(kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.status.qosClass}{"\n"}{end}' | grep -c "Guaranteed" || echo "0")
burstable_count=$(kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.status.qosClass}{"\n"}{end}' | grep -c "Burstable" || echo "0")
besteffort_count=$(kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.status.qosClass}{"\n"}{end}' | grep -c "BestEffort" || echo "0")

total_pods=$((guaranteed_count + burstable_count + besteffort_count))

if [ $total_pods -gt 0 ]; then
    guaranteed_percent=$((guaranteed_count * 100 / total_pods))
    burstable_percent=$((burstable_count * 100 / total_pods))
    besteffort_percent=$((besteffort_count * 100 / total_pods))
    
    echo "–¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:"
    echo "  Guaranteed: $guaranteed_percent% ($guaranteed_count –ø–æ–¥–æ–≤)"
    echo "  Burstable: $burstable_percent% ($burstable_count –ø–æ–¥–æ–≤)"
    echo "  BestEffort: $besteffort_percent% ($besteffort_count –ø–æ–¥–æ–≤)"
    
    if [ $guaranteed_percent -lt 20 ]; then
        echo "‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ–ª—é Guaranteed –ø–æ–¥–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤"
    fi
    
    if [ $besteffort_percent -gt 50 ]; then
        echo "‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ BestEffort –ø–æ–¥–æ–≤ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏"
    fi
    
    if [ $burstable_percent -gt 60 ]; then
        echo "üí° –•–æ—Ä–æ—à–æ: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Burstable QoS –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏"
    fi
fi

echo -e "\n‚úÖ –ê–Ω–∞–ª–∏–∑ QoS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω!"
EOF

chmod +x qos-performance-analyzer.sh
```

### **2. –°–∫—Ä–∏–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ QoS:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç qos-optimizer.sh
cat << 'EOF' > qos-optimizer.sh
#!/bin/bash

echo "üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è QoS –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"
echo "==============================================="

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –ø–æ–¥—É
analyze_pod_qos() {
    local namespace=$1
    local pod_name=$2
    
    echo "üîç –ê–Ω–∞–ª–∏–∑ –ø–æ–¥–∞: $namespace/$pod_name"
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ—Å—É—Ä—Å–∞—Ö
    local qos_class=$(kubectl get pod $pod_name -n $namespace -o jsonpath='{.status.qosClass}')
    local cpu_request=$(kubectl get pod $pod_name -n $namespace -o jsonpath='{.spec.containers[0].resources.requests.cpu}')
    local mem_request=$(kubectl get pod $pod_name -n $namespace -o jsonpath='{.spec.containers[0].resources.requests.memory}')
    local cpu_limit=$(kubectl get pod $pod_name -n $namespace -o jsonpath='{.spec.containers[0].resources.limits.cpu}')
    local mem_limit=$(kubectl get pod $pod_name -n $namespace -o jsonpath='{.spec.containers[0].resources.limits.memory}')
    
    echo "  QoS –∫–ª–∞—Å—Å: $qos_class"
    echo "  CPU: request=$cpu_request, limit=$cpu_limit"
    echo "  Memory: request=$mem_request, limit=$mem_limit"
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    local usage=$(kubectl top pod $pod_name -n $namespace --no-headers 2>/dev/null)
    if [ $? -eq 0 ]; then
        echo "  –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $usage"
    else
        echo "  –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
    fi
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    case $qos_class in
        "Guaranteed")
            echo "  ‚úÖ Guaranteed QoS - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å"
            ;;
        "Burstable")
            echo "  ‚ö° Burstable QoS - —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏"
            if [ -z "$cpu_limit" ] || [ -z "$mem_limit" ]; then
                echo "  üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ limits –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤"
            fi
            ;;
        "BestEffort")
            echo "  ‚ö†Ô∏è BestEffort QoS - –ø–æ–¥–≤–µ—Ä–∂–µ–Ω –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—é"
            echo "  üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ resource requests –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–¥–æ–≤"
            ;;
    esac
    echo
}

# –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
echo "üìä –ê–ù–ê–õ–ò–ó –ö–†–ò–¢–ò–ß–ù–´–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í:"

# Prometheus
if kubectl get pods -n monitoring -l app.kubernetes.io/name=prometheus &>/dev/null; then
    for pod in $(kubectl get pods -n monitoring -l app.kubernetes.io/name=prometheus -o jsonpath='{.items[*].metadata.name}'); do
        analyze_pod_qos "monitoring" "$pod"
    done
fi

# ArgoCD
if kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server &>/dev/null; then
    for pod in $(kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o jsonpath='{.items[*].metadata.name}'); do
        analyze_pod_qos "argocd" "$pod"
    done
fi

# NGINX Ingress
if kubectl get pods -n ingress-nginx &>/dev/null; then
    for pod in $(kubectl get pods -n ingress-nginx -o jsonpath='{.items[*].metadata.name}' | head -3); do
        analyze_pod_qos "ingress-nginx" "$pod"
    done
fi

# –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
echo "üí° –û–ë–©–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò QoS:"
echo "1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Guaranteed QoS –¥–ª—è:"
echo "   - –ë–∞–∑ –¥–∞–Ω–Ω—ã—Ö (etcd, PostgreSQL, Redis)"
echo "   - –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö API —Å–µ—Ä–≤–∏—Å–æ–≤"
echo "   - –°–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (DNS, Ingress)"

echo -e "\n2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Burstable QoS –¥–ª—è:"
echo "   - Web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π"
echo "   - –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
echo "   - API —Å –ø–∏–∫–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏"

echo -e "\n3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BestEffort QoS –¥–ª—è:"
echo "   - –§–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ batch –æ–±—Ä–∞–±–æ—Ç–∫–∏"
echo "   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ)"
echo "   - –í—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–¥–æ–≤"

echo -e "\n4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:"
echo "   - –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤"
echo "   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è"
echo "   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤"
echo "   - –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å"

echo -e "\n‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è QoS –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
EOF

chmod +x qos-optimizer.sh
```

## üìä **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–ª–∏—è–Ω–∏—è QoS –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                QoS Performance Impact Architecture         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Scheduler Priority (CPU Allocation)                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Guaranteed: Highest priority, reserved CPU            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Burstable: Medium priority, can burst                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ BestEffort: Lowest priority, leftover CPU             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Memory Management                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Guaranteed: Reserved memory, no swap                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Burstable: Baseline + burst capability                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ BestEffort: No guarantees, first to be killed         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Eviction Order (Resource Pressure)                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ 1st: BestEffort pods (lowest priority)                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ 2nd: Burstable pods exceeding requests                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ 3rd: Guaranteed pods (only in extreme cases)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Performance Characteristics                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Guaranteed: Predictable, stable, high performance     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Burstable: Variable, efficient, balanced              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ BestEffort: Unpredictable, opportunistic, low cost    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üö® **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ QoS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

### **1. Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è QoS:**
```bash
# –î–æ—Å—Ç—É–ø –∫ Prometheus –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ QoS –º–µ—Ç—Ä–∏–∫
kubectl port-forward svc/prometheus-server -n monitoring 9090:80 &

# –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ QoS:
# kube_pod_info{qos_class="Guaranteed"} - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Guaranteed –ø–æ–¥–æ–≤
# kube_pod_info{qos_class="Burstable"} - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Burstable –ø–æ–¥–æ–≤
# kube_pod_info{qos_class="BestEffort"} - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ BestEffort –ø–æ–¥–æ–≤
# kube_pod_container_resource_requests - –∑–∞–ø—Ä–æ—Å—ã —Ä–µ—Å—É—Ä—Å–æ–≤
# kube_pod_container_resource_limits - –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤
```

### **2. –ê–ª–µ—Ä—Ç—ã –¥–ª—è QoS –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```yaml
# qos-alerts.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: qos-performance-alerts
  namespace: monitoring
spec:
  groups:
  - name: qos-performance
    rules:
    - alert: TooManyBestEffortPods
      expr: count(kube_pod_info{qos_class="BestEffort"}) / count(kube_pod_info) > 0.5
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "Too many BestEffort pods"
        description: "{{ $value | humanizePercentage }} of pods are BestEffort"
    
    - alert: PodEvicted
      expr: increase(kube_pod_status_phase{phase="Failed"}[5m]) > 0
      for: 1m
      labels:
        severity: warning
      annotations:
        summary: "Pod evicted"
        description: "Pod {{ $labels.pod }} in namespace {{ $labels.namespace }} was evicted"
    
    - alert: HighMemoryPressure
      expr: node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes < 0.1
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "High memory pressure on node"
        description: "Node {{ $labels.instance }} has less than 10% memory available"
```

## üè≠ **QoS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤ –≤–∞—à–µ–º HA –∫–ª–∞—Å—Ç–µ—Ä–µ:**

### **1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è QoS:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ QoS –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
kubectl get pods -n monitoring -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory

kubectl get pods -n argocd -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory

kubectl get pods -n ingress-nginx -o custom-columns=NAME:.metadata.name,QOS:.status.qosClass,CPU-REQ:.spec.containers[*].resources.requests.cpu,MEM-REQ:.spec.containers[*].resources.requests.memory
```

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ QoS –ø–æ–≤–µ–¥–µ–Ω–∏—è:**
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
./guaranteed-qos-demo.sh
./burstable-qos-demo.sh
./besteffort-qos-demo.sh

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
./qos-performance-analyzer.sh

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
./qos-optimizer.sh
```

### **3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ QoS –º–µ—Ç—Ä–∏–∫ –≤ Grafana
kubectl port-forward svc/grafana -n monitoring 3000:80 &

# –ò–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤:
# - Kubernetes Resource Requests (ID: 7249)
# - Kubernetes Capacity Planning (ID: 5309)
```

## üéØ **Best Practices –¥–ª—è QoS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

### **1. –í—ã–±–æ—Ä QoS –∫–ª–∞—Å—Å–∞:**
- **Guaranteed**: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–ë–î, API, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- **Burstable**: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
- **BestEffort**: –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏, batch –æ–±—Ä–∞–±–æ—Ç–∫–∞, –Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ requests –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ limits –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è resource starvation
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è

### **3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –ø–æ–¥–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ QoS –∫–ª–∞—Å—Å–∞–º
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –≤—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### **4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ capacity:**
