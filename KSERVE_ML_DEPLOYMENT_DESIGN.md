# KServe ML Model Deployment Design Document

## üìå –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
**–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–π ML-–º–æ–¥–µ–ª–∏ (Iris classifier) –≤ HA Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º KServe**

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É KServe –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é HA –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É HashFoundry –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ML-–º–æ–¥–µ–ª–∏ Iris classifier —Å –ø—É–±–ª–∏—á–Ω—ã–º REST API endpoint'–æ–º.

### –ë–∏–∑–Ω–µ—Å-—Ü–µ–ª–∏:
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π ML inference –≤ production-ready Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ
- –°–æ–∑–¥–∞–Ω–∏–µ foundation –¥–ª—è –±—É–¥—É—â–∏—Ö ML workloads
- –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ML –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–±–∞–∑–æ–≤–∞—è)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DigitalOcean Cloud                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Load Balancer + NGINX Ingress                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD UI                                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Grafana                                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Prometheus                                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ React App                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  HA Kubernetes Cluster (3-6 nodes)                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD (GitOps)                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Monitoring Stack                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ NFS Provisioner                                       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Applications                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Å KServe) - –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–ê–Ø
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DigitalOcean Cloud                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Load Balancer + NGINX Ingress                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD UI                                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Grafana                                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Prometheus                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ React App                                             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ ML Model API (iris-classifier.ml.hashfoundry.local)   ‚îÇ ‚Üê NEW
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  HA Kubernetes Cluster (3-6 nodes)                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD (GitOps)                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Monitoring Stack                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ NFS Provisioner                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Applications                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ KServe Control Plane                                  ‚îÇ ‚Üê NEW ‚úÖ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ KServe Controller                                 ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Knative Serving                                   ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ Istio Service Mesh                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ML Workloads                                          ‚îÇ ‚Üê NEW ‚úÖ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Iris Classifier InferenceService (Ready)          ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Model Loader Job (Completed)                      ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ NFS PVC Storage (iris-model-storage)              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Model Storage Solution                                ‚îÇ ‚Üê UPDATED ‚úÖ
‚îÇ      ‚îú‚îÄ‚îÄ Job: DigitalOcean Spaces ‚Üí NFS PVC                ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ InferenceService: PVC ‚Üí sklearn server            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  DigitalOcean Spaces (S3-compatible)                       ‚îÇ ‚Üê SOURCE
‚îÇ  ‚îî‚îÄ‚îÄ ML Models Storage                                     ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ iris-classifier/v1/                               ‚îÇ
‚îÇ          ‚îú‚îÄ‚îÄ model.pkl (167KB)                             ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ metadata.json (1.3KB)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

#### 1. **KServe Platform**
- **KServe Controller**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ InferenceService —Ä–µ—Å—É—Ä—Å–∞–º–∏
- **Knative Serving**: Serverless runtime –¥–ª—è ML –º–æ–¥–µ–ª–µ–π
- **Istio Service Mesh**: Networking –∏ traffic management
- **Cert-Manager**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

#### 2. **Model Storage**
- **DigitalOcean Spaces**: S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è ML –º–æ–¥–µ–ª–µ–π
- **Bucket**: `hashfoundry-ml-models`
- **Path**: `/iris-classifier/v1/`

#### 3. **ML Model**
- **Framework**: Scikit-learn
- **Model**: Iris classifier (4 features ‚Üí 3 classes)
- **Format**: Pickle (.pkl)
- **Runtime**: sklearn server

#### 4. **Networking**
- **Ingress**: NGINX Ingress Controller (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
- **Domain**: `iris-classifier.ml.hashfoundry.local`
- **Protocol**: HTTPS —Å TLS

#### 5. **Monitoring**
- **Prometheus**: –ú–µ—Ç—Ä–∏–∫–∏ KServe –∏ Knative
- **Grafana**: –î–∞—à–±–æ—Ä–¥—ã –¥–ª—è ML inference
- **Alerting**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏

---

## üìã –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏

**–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 7.5 —á–∞—Å–æ–≤**

### **–ó–∞–¥–∞—á–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ML –º–æ–¥–µ–ª–∏ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** ‚è±Ô∏è 1.5 —á–∞—Å–∞

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–°–æ–∑–¥–∞–Ω–∏–µ, –æ–±—É—á–µ–Ω–∏–µ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è Iris classifier –º–æ–¥–µ–ª–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DigitalOcean Spaces –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ Python —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
2. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç pickle
3. –°–æ–∑–¥–∞–Ω–∏–µ metadata.json —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DigitalOcean Spaces bucket
5. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –≤ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [x] –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –Ω–∞ iris dataset —Å accuracy > 95% (96.67% CV accuracy) ‚úÖ
- [x] –ú–æ–¥–µ–ª—å —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç .pkl ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω metadata.json —Å –≤–µ—Ä—Å–∏–µ–π –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º ‚úÖ
- [x] DigitalOcean Spaces bucket —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
- [x] –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ bucket ‚úÖ

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏ –≤ DigitalOcean Spaces
doctl spaces ls
doctl spaces ls-objects hashfoundry-ml-models --prefix iris-classifier/v1/
```

---

### **–ó–∞–¥–∞—á–∞ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ KServe –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚è±Ô∏è 1.5 —á–∞—Å–∞

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ KServe platform –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π HA –∫–ª–∞—Å—Ç–µ—Ä —á–µ—Ä–µ–∑ Helm.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Istio —á–µ—Ä–µ–∑ Helm
2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Knative Serving —á–µ—Ä–µ–∑ Helm
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Cert-Manager —á–µ—Ä–µ–∑ Helm
4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ KServe —á–µ—Ä–µ–∑ Helm
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [x] Istio —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- [x] Knative Serving —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç ‚úÖ
- [x] Cert-Manager —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç ‚úÖ
- [x] KServe Controller –∑–∞–ø—É—â–µ–Ω ‚úÖ
- [x] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Å—Ç–∞—Ç—É—Å–µ Ready ‚úÖ

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ KServe –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
kubectl get pods -n knative-serving
kubectl get pods -n istio-system
kubectl get pods -n cert-manager
kubectl get pods -n kserve-system
```

---

### **–ó–∞–¥–∞—á–∞ 3: –°–æ–∑–¥–∞–Ω–∏–µ InferenceService** ‚è±Ô∏è 1 —á–∞—Å

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ InferenceService –¥–ª—è Iris classifier –º–æ–¥–µ–ª–∏.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ YAML –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ InferenceService
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ sklearn predictor
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è storage URI –¥–ª—è DigitalOcean Spaces
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ resource limits –∏ requests
5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [x] InferenceService –º–∞–Ω–∏—Ñ–µ—Å—Ç —Å–æ–∑–¥–∞–Ω ‚úÖ
- [x] –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ PVC (—Ä–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å S3 credentials) ‚úÖ
- [x] Pod –º–æ–¥–µ–ª–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ Running (2/2) ‚úÖ
- [x] InferenceService –≤ —Å—Ç–∞—Ç—É—Å–µ Ready ‚úÖ
- [x] –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Kubernetes API ‚úÖ

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ InferenceService
kubectl get inferenceservice iris-classifier -n ml-models
kubectl describe inferenceservice iris-classifier -n ml-models
```

---

### **–ó–∞–¥–∞—á–∞ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ingress –∏ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞** ‚è±Ô∏è 1.5 —á–∞—Å–∞

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ ML –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π NGINX Ingress.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ Ingress –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –¥–ª—è ML –º–æ–¥–µ–ª–∏
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è routing –ø—Ä–∞–≤–∏–ª
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Load Balancer
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [ ] Ingress —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—ã–ø—É—â–µ–Ω
- [ ] –î–æ–º–µ–Ω iris-classifier.ml.hashfoundry.local –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Routing –∫ InferenceService —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Ingress –∏ TLS
kubectl get ingress -n ml-models
curl -k https://iris-classifier.ml.hashfoundry.local/v1/models/iris-classifier
```

---

### **–ó–∞–¥–∞—á–∞ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** ‚è±Ô∏è 1 —á–∞—Å

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ KServe –∏ ML –º–æ–¥–µ–ª–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º Prometheus/Grafana —Å—Ç–µ–∫–µ.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ServiceMonitor –¥–ª—è KServe –º–µ—Ç—Ä–∏–∫
2. –°–æ–∑–¥–∞–Ω–∏–µ Grafana –¥–∞—à–±–æ—Ä–¥–∞ –¥–ª—è ML inference
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ Knative Serving
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [ ] KServe –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ Prometheus
- [ ] Grafana –¥–∞—à–±–æ—Ä–¥ —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å—Ç–µ–∫–æ–º
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Grafana UI

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ Prometheus
curl http://prometheus.hashfoundry.local/api/v1/query?query=kserve_model_request_duration_seconds
```

---

### **–ó–∞–¥–∞—á–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è** ‚è±Ô∏è 1 —á–∞—Å

#### –û–ø–∏—Å–∞–Ω–∏–µ:
–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ML API –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.

#### –ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ Python —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ latency
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥–µ–ª–∏
5. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- [ ] –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] Latency < 100ms –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã

#### –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏:
```python
# –¢–µ—Å—Ç API endpoint
import requests
response = requests.post(
    'https://iris-classifier.ml.hashfoundry.local/v1/models/iris-classifier:predict',
    json={"instances": [[5.1, 3.5, 1.4, 0.2]]}
)
assert response.status_code == 200
assert 'predictions' in response.json()
```

---

## üß™ –û–±—â–∏–π —Ç–µ—Å—Ç —Ä–µ—à–µ–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç:
```bash
#!/bin/bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç KServe ML deployment

echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ KServe ML Deployment..."

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ KServe –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤..."
kubectl get pods -n kserve-system --no-headers | grep -v Running && exit 1

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ InferenceService
echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ InferenceService..."
kubectl get inferenceservice iris-classifier -n ml-models -o jsonpath='{.status.conditions[?(@.type=="Ready")].status}' | grep -q True || exit 1

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ingress
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ingress –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏..."
curl -f -k https://iris-classifier.ml.hashfoundry.local/v1/models/iris-classifier > /dev/null || exit 1

# 4. –¢–µ—Å—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
echo "4. –¢–µ—Å—Ç ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è..."
RESPONSE=$(curl -s -k -X POST \
  https://iris-classifier.ml.hashfoundry.local/v1/models/iris-classifier:predict \
  -H "Content-Type: application/json" \
  -d '{"instances": [[5.1, 3.5, 1.4, 0.2]]}')

echo $RESPONSE | grep -q "predictions" || exit 1

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
echo "5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫..."
curl -s http://prometheus.hashfoundry.local/api/v1/query?query=kserve_model_request_duration_seconds | grep -q "success" || exit 1

echo "‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!"
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (Definition of Done)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] **ML –º–æ–¥–µ–ª—å**: Iris classifier –æ–±—É—á–µ–Ω–∞ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ DigitalOcean Spaces
- [ ] **KServe**: Platform —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] **InferenceService**: –†–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å Ready
- [ ] **API –¥–æ—Å—Ç—É–ø**: –ü—É–±–ª–∏—á–Ω—ã–π HTTPS endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è**: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

### –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Latency < 100ms –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: 99.9% uptime (—Å —É—á–µ—Ç–æ–º HA –∫–ª–∞—Å—Ç–µ—Ä–∞)
- [ ] **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: HTTPS —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- [ ] **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Auto-scaling —á–µ—Ä–µ–∑ Knative
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ê–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
- [ ] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π HA –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- [ ] **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã —á–µ—Ä–µ–∑ kubectl/Helm
- [ ] **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Pod Security Standards –∏ Network Policies
- [ ] **–†–µ—Å—É—Ä—Å—ã**: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/Memory
- [ ] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—Ç–µ–∫

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–ê–Ø):
```
ha/k8s/addons/
‚îú‚îÄ‚îÄ kserve/                          # KServe platform ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Chart.yaml
‚îÇ   ‚îú‚îÄ‚îÄ values.yaml
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îú‚îÄ‚îÄ istio/                           # Service mesh ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Chart.yaml
‚îÇ   ‚îú‚îÄ‚îÄ values.yaml
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îú‚îÄ‚îÄ knative-serving/                 # Knative Serving ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Chart.yaml
‚îÇ   ‚îú‚îÄ‚îÄ values.yaml
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îî‚îÄ‚îÄ cert-manager/                    # TLS certificates ‚úÖ
    ‚îú‚îÄ‚îÄ Chart.yaml
    ‚îú‚îÄ‚îÄ values.yaml
    ‚îî‚îÄ‚îÄ templates/

ha/k8s/apps/
‚îî‚îÄ‚îÄ ml-models/                       # ML applications ‚úÖ
    ‚îî‚îÄ‚îÄ iris-classifier/             # Iris classifier deployment ‚úÖ
        ‚îú‚îÄ‚îÄ Chart.yaml               # Helm chart
        ‚îú‚îÄ‚îÄ values.yaml              # Configuration values
        ‚îî‚îÄ‚îÄ templates/               # Kubernetes manifests
            ‚îú‚îÄ‚îÄ inferenceservice.yaml    # KServe InferenceService ‚úÖ
            ‚îú‚îÄ‚îÄ servingruntime.yaml      # Sklearn ServingRuntime ‚úÖ
            ‚îú‚îÄ‚îÄ clusterservingruntime.yaml # Cluster-wide runtime ‚úÖ
            ‚îú‚îÄ‚îÄ pvc.yaml                 # Model storage PVC ‚úÖ
            ‚îú‚îÄ‚îÄ model-loader-job.yaml   # S3 ‚Üí PVC loader Job ‚úÖ
            ‚îú‚îÄ‚îÄ secret.yaml              # S3 credentials ‚úÖ
            ‚îú‚îÄ‚îÄ configmap.yaml           # S3 configuration ‚úÖ
            ‚îú‚îÄ‚îÄ serviceaccount.yaml      # Service account ‚úÖ
            ‚îî‚îÄ‚îÄ ingress.yaml             # Public access (TODO)

ha/ml/                               # ML artifacts ‚úÖ
‚îú‚îÄ‚îÄ iris-classifier/                 # Model files ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ train_model.py               # Training script ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py                  # API testing ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ model.pkl                    # Trained model ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ metadata.json                # Model metadata ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt             # Dependencies ‚úÖ
‚îú‚îÄ‚îÄ scripts/                         # Utility scripts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ upload_model.sh              # DigitalOcean Spaces upload ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ test_deployment.sh           # Integration tests ‚úÖ
‚îú‚îÄ‚îÄ TASK_1_COMPLETION_REPORT.md      # Task 1 report ‚úÖ
‚îú‚îÄ‚îÄ TASK_2_COMPLETION_REPORT.md      # Task 2 report ‚úÖ
‚îú‚îÄ‚îÄ TASK_3_CREDENTIALS_PROBLEM_SOLUTION.md # Credentials fix ‚úÖ
‚îî‚îÄ‚îÄ IRIS_MODEL_LOADER_ANALYSIS.md    # Job analysis ‚úÖ
```

### –†–µ—Å—É—Ä—Å—ã –∫–ª–∞—Å—Ç–µ—Ä–∞:
- **CPU**: +2 cores –¥–ª—è KServe platform
- **Memory**: +4GB –¥–ª—è Istio + Knative + KServe
- **Storage**: +10GB –¥–ª—è model cache
- **Network**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Istio sidecars

### –°—Ç–æ–∏–º–æ—Å—Ç—å:
- **–ë–∞–∑–æ–≤–∞—è HA**: ~$96/–º–µ—Å—è—Ü (—Ç–µ–∫—É—â–∞—è)
- **–° KServe**: ~$120/–º–µ—Å—è—Ü (+$24 –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤)
- **DigitalOcean Spaces**: ~$5/–º–µ—Å—è—Ü (250GB)
- **–ò—Ç–æ–≥–æ**: ~$125/–º–µ—Å—è—á

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–î–µ–Ω—å 1)
1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—É—á–µ–Ω–∏–µ ML –º–æ–¥–µ–ª–∏
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DigitalOcean Spaces
3. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

### –§–∞–∑–∞ 2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–î–µ–Ω—å 2)
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Istio Service Mesh
2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Knative Serving
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Cert-Manager
4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ KServe Controller

### –§–∞–∑–∞ 3: ML Deployment (–î–µ–Ω—å 3)
1. –°–æ–∑–¥–∞–Ω–∏–µ InferenceService
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ingress
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –§–∞–∑–∞ 4: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–î–µ–Ω—å 4)
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
2. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üîç –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏:
1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Istio —Å NGINX Ingress**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Istio Gateway –≤–º–µ—Å—Ç–æ NGINX –¥–ª—è ML —Ç—Ä–∞—Ñ–∏–∫–∞
   
2. **–†–µ—Å—É—Ä—Å—ã –∫–ª–∞—Å—Ç–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ scale-up

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏ Knative/Istio**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, step-by-step —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –°—Ä–µ–¥–Ω–∏–µ —Ä–∏—Å–∫–∏:
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å S3 –¥–æ—Å—Ç—É–ø–∞**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: Model caching, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–µ–ª–∏
   
2. **TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ cert-manager –∑–∞—Ä–∞–Ω–µ–µ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. **Auto-scaling**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HPA –¥–ª—è InferenceService
2. **A/B Testing**: Canary deployments –¥–ª—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –º–æ–¥–µ–ª–∏
3. **Model Versioning**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –º–æ–¥–µ–ª–µ–π
4. **Batch Inference**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ batch –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
5. **Multi-model Serving**: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
6. **GPU Support**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GPU –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–µ—Å—É—Ä—Å—ã

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- API Reference –¥–ª—è Iris Classifier
- Troubleshooting Guide –¥–ª—è KServe
- Monitoring Runbook
- Deployment Procedures

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã:
- [KServe Documentation](https://kserve.github.io/website/)
- [Knative Serving Guide](https://knative.dev/docs/serving/)
- [Istio Service Mesh](https://istio.io/latest/docs/)
- [Scikit-learn Model Serving](https://scikit-learn.org/stable/)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 30.07.2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–ê–≤—Ç–æ—Ä**: HashFoundry Infrastructure Team  
**–°—Ç–∞—Ç—É—Å**: Ready for Implementation  

---

*–≠—Ç–æ—Ç design document —è–≤–ª—è–µ—Ç—Å—è –∂–∏–≤—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –∏ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.*
